{"version":3,"file":"pb-design-system-dataviz.js","sources":["../../../projects/pb-design-system/dataviz/dataviz.service.ts","../../../projects/pb-design-system/dataviz/dataviz-pie.component.ts","../../../projects/pb-design-system/dataviz/dataviz-bar.component.ts","../../../projects/pb-design-system/dataviz/dataviz-line.component.ts","../../../projects/pb-design-system/dataviz/dataviz-gauge.component.ts","../../../projects/pb-design-system/dataviz/dataviz-sparkline.component.ts","../../../projects/pb-design-system/dataviz/dataviz-bar-stacked.component.ts","../../../projects/pb-design-system/dataviz/dataviz-metric-indicator.component.ts","../../../projects/pb-design-system/dataviz/dataviz-metric-block.component.ts","../../../projects/pb-design-system/dataviz/dataviz-bubble-map.component.ts","../../../projects/pb-design-system/dataviz/dataviz-heatmap.component.ts","../../../projects/pb-design-system/dataviz/dataviz-choropleth-map.component.ts","../../../projects/pb-design-system/dataviz/dataviz-bar-grouped.component.ts","../../../projects/pb-design-system/dataviz/dataviz-bar-single-horizontal.component.ts","../../../projects/pb-design-system/dataviz/dataviz.module.ts","../../../projects/pb-design-system/dataviz/public_api.ts","../../../projects/pb-design-system/dataviz/pb-design-system-dataviz.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\nimport { format as d3_format, timeFormat as d3_timeFormat } from 'd3';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PbdsDatavizService {\n  private colors = {\n    classic: {\n      full: [\n        '#B70077',\n        '#0384D4',\n        '#EE6B0B',\n        '#A319B1',\n        '#11A611',\n        '#1BB9FF',\n        '#495A9C',\n        '#EDB700',\n        '#8B98C8',\n        '#E6C49C',\n        '#CCB8CE',\n        '#9B9B9B'\n      ],\n      mono: ['#001D56', '#003296', '#4B74C5', '#89A1D0', '#A3BCEE', '#C9D7F3'] // blue\n    },\n    twilight: {\n      full: [\n        '#A319B1',\n        '#11A611',\n        '#1BB9FF',\n        '#EE6B0B',\n        '#B70077',\n        '#0384D4',\n        '#495A9C',\n        '#EDB700',\n        '#8B98C8',\n        '#E6C49C',\n        '#CCB8CE',\n        '#9B9B9B'\n      ],\n      mono: ['#05395C', '#0A5B92', '#0072B8', '#5DA9DC', '#A5D4F3', '#D1EDFF'] // light blue\n    },\n    ocean: {\n      full: [\n        '#0384D4',\n        '#B70077',\n        '#1BB9FF',\n        '#495A9C',\n        '#EDB700',\n        '#A319B1',\n        '#EE6B0B',\n        '#11A611',\n        '#8B98C8',\n        '#E6C49C',\n        '#CCB8CE',\n        '#9B9B9B'\n      ],\n      mono: ['#394B4D', '#3A6B6E', '#14767D', '#99BFC2', '#C9E6E8', '#DEECED'] // blue-green\n    },\n    sunset: {\n      full: [\n        '#B70077',\n        '#EE6B0B',\n        '#1BB9FF',\n        '#EDB700',\n        '#11A611',\n        '#A319B1',\n        '#0384D4',\n        '#CCB8CE',\n        '#495A9C',\n        '#E6C49C',\n        '#8B98C8',\n        '#9B9B9B'\n      ],\n      mono: ['#31254A', '#50248F', '#7945C4', '#9A79E2', '#C4A8FF', '#D9C7FF'] // purple\n    }\n  };\n\n  constructor() {}\n\n  getColors = (mono = false, theme = 'classic') => {\n    return mono ? this.colors[theme].mono : this.colors[theme].full;\n  };\n\n  createGradientDefs = (svg, mono = false, theme = 'classic', vertical = true) => {\n    const colors = mono ? [this.colors[theme].mono[2]] : this.colors[theme].full;\n\n    for (let i = 0; i < colors.length; i++) {\n      const color = mono ? this.colors[theme].mono[2] : this.colors[theme].full[i];\n      let gradient;\n\n      if (vertical) {\n        gradient = svg\n          .append('defs')\n          .append('linearGradient')\n          .attr('id', `gradient-${color.replace('#', '')}`)\n          .attr('x1', '0')\n          .attr('y1', '0')\n          .attr('x2', '0')\n          .attr('y2', '1')\n          .attr('spreadMethod', 'pad');\n\n        gradient\n          .append('stop')\n          .attr('offset', '0%')\n          .attr('stop-color', color)\n          .attr('stop-opacity', '1'); // top of bar will be full opacity\n\n        gradient\n          .append('stop')\n          .attr('offset', '100%')\n          .attr('stop-color', color)\n          .attr('stop-opacity', '.3'); // bottom of bar will be .3 opacity\n      } else {\n        gradient = svg\n          .append('defs')\n          .append('linearGradient')\n          .attr('id', `gradient-horizontal-${color.replace('#', '')}`)\n          .attr('x1', '1')\n          .attr('y1', '0')\n          .attr('x2', '0')\n          .attr('y2', '0')\n          .attr('spreadMethod', 'pad');\n\n        gradient\n          .append('stop')\n          .attr('offset', '0%')\n          .attr('stop-color', color)\n          .attr('stop-opacity', '1'); // top of bar will be full opacity\n\n        gradient\n          .append('stop')\n          .attr('offset', '100%')\n          .attr('stop-color', color)\n          .attr('stop-opacity', '.3'); // bottom of bar will be .3 opacity\n      }\n    }\n\n    return colors;\n  };\n\n  createGlowFilter = svg => {\n    // add a new definition\n    const glow = svg\n      .append('defs')\n      .append('filter')\n      .attr('id', 'glow')\n      .attr('width', '200%')\n      .attr('height', '200%');\n\n    glow\n      .append('feGaussianBlur')\n      .attr('in', 'SourceGraphic')\n      .attr('stdDeviation', 4);\n\n    // build two dropshadows with different intensities\n    const feOffsets = [\n      {\n        dy: 2,\n        slope: 0.2\n      },\n      {\n        dy: 5,\n        slope: 0.05\n      }\n    ];\n\n    for (let i = 0; i < feOffsets.length; i++) {\n      glow\n        .append('feOffset')\n        .attr('result', 'offsetBlur' + i)\n        .attr('dx', 0)\n        .attr('dy', feOffsets[i].dy);\n    }\n\n    for (let y = 0; y < feOffsets.length; y++) {\n      glow\n        .append('feComponentTransfer')\n        .attr('result', 'coloredBlur' + y)\n        .attr('in', 'offsetBlur' + y)\n        .append('feFuncA')\n        .attr('type', 'linear')\n        .attr('slope', feOffsets[y].slope);\n    }\n\n    const merge = glow.append('feMerge');\n\n    merge.append('feMergeNode').attr('in', 'SourceGraphic');\n\n    for (let x = 0; x < feOffsets.length; x++) {\n      merge.append('feMergeNode').attr('in', 'coloredBlur' + x);\n    }\n  };\n\n  d3Format(type: string, string: string) {\n    let format;\n\n    switch (type) {\n      case 'number':\n        format = d3_format(string);\n        break;\n      case 'time':\n        format = d3_timeFormat(string);\n        break;\n      default:\n        format = null;\n        break;\n    }\n\n    return format;\n  }\n}\n","import {\n  Component,\n  OnInit,\n  Input,\n  ElementRef,\n  HostBinding,\n  OnChanges,\n  SimpleChanges,\n  Output,\n  EventEmitter,\n  ChangeDetectionStrategy,\n  OnDestroy\n} from '@angular/core';\n\nimport { select as d3_select, mouse as d3_mouse, event as d3_event } from 'd3-selection';\nimport { scaleOrdinal as d3_scaleOrdinal } from 'd3-scale';\nimport { pie as d3_pie, arc as d3_arc } from 'd3-shape';\nimport { interpolate as d3_interpolate } from 'd3-interpolate';\nimport { format as d3_format } from 'd3-format';\nimport { isoParse as d3_isoParse } from 'd3-time-format';\n\nimport { PbdsDatavizService } from './dataviz.service';\nimport { PbdsDatavizPie } from './dataviz.interfaces';\n\n@Component({\n  selector: 'pbds-dataviz-pie',\n  template: ``,\n  styleUrls: [],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class PbdsDatavizPieComponent implements OnInit, OnChanges, OnDestroy {\n  @HostBinding('class.pbds-chart')\n  chartClass = true;\n\n  @HostBinding('class.pbds-chart-pie')\n  pieClass = true;\n\n  @Input()\n  data: Array<PbdsDatavizPie>;\n\n  @Input()\n  width = 300;\n\n  @Input()\n  type: 'pie' | 'donut' = 'pie';\n\n  @Input()\n  monochrome = false;\n\n  @Input()\n  legendLabelFormatType: 'time' = null;\n\n  @Input()\n  legendLabelFormatString = '';\n\n  @Input()\n  legendValueFormatString = '';\n\n  @Input()\n  tooltipLabelFormatType: 'time' = null;\n\n  @Input()\n  tooltipLabelFormatString = '';\n\n  @Input()\n  tooltipValueFormatString = '';\n\n  @Input()\n  theme;\n\n  @Output()\n  hovered: EventEmitter<object> = new EventEmitter<object>();\n\n  @Output()\n  clicked: EventEmitter<object> = new EventEmitter<object>();\n\n  private currentData = [];\n  private height;\n  private chart;\n  private margin;\n  private colors;\n  private colorRange;\n  private arc;\n  private arcZoom;\n  private svg;\n  private pie;\n  private legendLabelFormat;\n  private legendValueFormat;\n  private innerRadius;\n  private anglePad;\n  private outerRadius;\n  private tooltip;\n  private tooltipLabelFormat;\n  private tooltipValueFormat;\n\n  constructor(private _dataviz: PbdsDatavizService, private _element: ElementRef) {}\n\n  ngOnInit() {\n    this.margin = { top: 10, right: 10, bottom: 10, left: 10 };\n    this.width = this.width - this.margin.left - this.margin.right;\n    this.height = this.width - this.margin.top - this.margin.bottom;\n    this.colors = this._dataviz.getColors(this.monochrome, this.theme);\n    this.innerRadius = Math.min(this.width, this.height) / 2.5;\n    this.outerRadius = Math.min(this.width, this.height) / 2;\n    this.arcZoom = 10;\n    this.anglePad = 0.02;\n    this.legendValueFormat = d3_format(this.legendValueFormatString);\n    this.tooltipValueFormat = d3_format(this.tooltipValueFormatString);\n\n    // create formatters\n    this.legendLabelFormat = this._dataviz.d3Format(this.legendLabelFormatType, this.legendLabelFormatString);\n    this.tooltipLabelFormat = this._dataviz.d3Format(this.tooltipLabelFormatType, this.tooltipLabelFormatString);\n\n    this.colorRange = d3_scaleOrdinal()\n      .range(this.colors)\n      .domain(this.data.map(c => c.label));\n\n    if (this.type === 'pie') {\n      this.innerRadius = 0;\n      this.anglePad = 0;\n    }\n\n    this.pie = d3_pie()\n      .padAngle(this.anglePad)\n      .value((d: any) => d.value)\n      .sort(null);\n\n    this.arc = d3_arc()\n      .padRadius(this.outerRadius)\n      .innerRadius(this.innerRadius);\n\n    this.chart = d3_select(this._element.nativeElement).attr('aria-hidden', 'true');\n\n    this.svg = this.chart\n      .append('svg')\n      .attr('width', this.width)\n      .attr('height', this.height)\n      .attr('class', 'img-fluid')\n      .attr('preserveAspectRatio', 'xMinYMin meet')\n      .attr(\n        'viewBox',\n        `-${this.width / 2 + this.margin.left} -${this.height / 2 + this.margin.top} ${this.width +\n          this.margin.left +\n          this.margin.right} ${this.height + this.margin.top + this.margin.bottom}`\n      );\n\n    this.chart.append('ul').attr('class', 'legend legend-right');\n\n    this.tooltip = this.chart\n      .append('div')\n      .style('opacity', 0)\n      .attr('class', 'pbds-tooltip')\n      .attr('aria-hidden', 'true');\n\n    this.updateChart();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.data && !changes.data.firstChange) {\n      this.updateChart(false);\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.tooltip) this.tooltip.remove();\n  }\n\n  updateChart = (firstRun = true) => {\n    // slices\n    this.svg\n      .selectAll('path')\n      .data(this.pie(this.data))\n      .join(\n        enter => {\n          const path = enter.append('path');\n\n          path\n            .each((d: any) => (d.outerRadius = this.outerRadius))\n            .attr('fill', (d: any) => this.colorRange(d.data.label))\n            .attr('class', 'slice')\n            .each((d, i, nodes) => {\n              this.currentData.splice(i, 1, d);\n            });\n\n          if (this.type === 'pie') {\n            path\n              .style('stroke', '#fff')\n              .style('stroke-width', 2)\n              .style('stroke-alignment', 'inner');\n          }\n\n          path.call(path =>\n            path\n              .transition()\n              .duration((d, i, n) => (firstRun ? 0 : 500))\n              .attrTween('d', this.arcEnterTween)\n          );\n\n          return path;\n        },\n        update => {\n          this.tooltipHide();\n\n          update\n            .each((d: any) => (d.outerRadius = this.outerRadius))\n            .call(update =>\n              update\n                .transition()\n                .duration(500)\n                .attrTween('d', this.arcTween)\n            );\n          return update;\n        },\n        exit => exit.remove()\n      )\n      .on('mouseover', (data, index, nodes) => {\n        this.pathMouseOver(d3_event, data, index, nodes);\n        // this.tooltipShow(this.chart.node(), data);\n      })\n      .on('mousemove', (data, index, nodes) => {\n        this.tooltipShow(this.chart.node(), data);\n        this.tooltipMove(this.chart.node());\n      })\n      .on('mouseout', (data, index, nodes) => {\n        this.pathMouseOut(data, index, nodes);\n        this.tooltipHide();\n      })\n      .on('click', (data, index, nodes) => {\n        this.pathClick(d3_event, data, index, nodes);\n      });\n\n    // legend\n    this.chart\n      .select('.legend')\n      .selectAll('.legend-item')\n      .data(this.data)\n      .join(\n        enter => {\n          const li = enter.append('li').attr('class', 'legend-item');\n\n          li.append('span')\n            .attr('class', 'legend-key')\n            .style('background-color', (d: any) => this.colorRange(d.label));\n\n          const description = li.append('span').attr('class', 'legend-description');\n\n          description\n            .append('span')\n            .attr('class', 'legend-label')\n            .html((d: any) => {\n              switch (this.legendLabelFormatType) {\n                case 'time':\n                  const parsedTime = d3_isoParse(d.label);\n                  return this.legendLabelFormat(parsedTime);\n\n                default:\n                  return d.label;\n              }\n            });\n\n          description\n            .append('span')\n            .attr('class', 'legend-value')\n            .html((d: any) => this.legendValueFormat(d.value));\n\n          return li;\n        },\n        update => {\n          update.selectAll('.legend-key').style('background-color', (d: any) => this.colorRange(d.label));\n\n          update.select('.legend-label').html((d: any) => {\n            switch (this.legendLabelFormatType) {\n              case 'time':\n                const parsedTime = d3_isoParse(d.label);\n                return this.legendLabelFormat(parsedTime);\n\n              default:\n                return d.label;\n            }\n          });\n\n          update.select('.legend-value').html((d: any) => this.legendValueFormat(d.value));\n\n          return update;\n        },\n        exit => exit.remove()\n      )\n\n      .on('mouseover focus', (data, index, nodes) => {\n        this.legendMouseOverFocus(data, index, nodes);\n        this.pathMouseOver(d3_event, data, index, nodes);\n      })\n      .on('mouseout blur', (data, index, nodes) => {\n        this.legendMouseOutBlur(data, index, nodes);\n        this.pathMouseOut(data, index, nodes);\n      })\n      .on('click', (data, index, nodes) => {\n        this.clicked.emit({ event: d3_event, data: data });\n      });\n  };\n\n  private arcEnterTween = (data, index, nodes) => {\n    const i = d3_interpolate(data.startAngle, data.endAngle);\n    return t => {\n      data.endAngle = i(t);\n      return this.arc(data);\n    };\n  };\n\n  private arcTween = (data, index, nodes) => {\n    // console.log('ARGS: ', data, index, nodes);\n    const i = d3_interpolate(this.currentData[index], data);\n\n    this.currentData[index] = i(1);\n    return t => this.arc(i(t));\n  };\n\n  private arcExitTween = (data, index, nodes) => {\n    const end = Object.assign({}, this.currentData[index], { startAngle: this.currentData[index].endAngle });\n    const i = d3_interpolate(data, end);\n\n    return t => {\n      return this.arc(i(t));\n    };\n  };\n\n  private arcMouseOverTween = (data, index, nodes) => {\n    const i = d3_interpolate(data.outerRadius, this.outerRadius + this.arcZoom);\n\n    return t => {\n      data.outerRadius = i(t);\n      return this.arc(data);\n    };\n  };\n\n  private arcMouseOutTween = (data, index, nodes) => {\n    const i = d3_interpolate(data.outerRadius, this.outerRadius);\n    return t => {\n      data.outerRadius = i(t);\n      return this.arc(data);\n    };\n  };\n\n  private legendMouseOverFocus = (data, index, nodes) => {\n    this.chart\n      .selectAll('.legend-item')\n      .filter((d, i) => i !== index)\n      .classed('inactive', true);\n  };\n\n  private legendMouseOutBlur = (data, index, nodes) => {\n    this.chart.selectAll('.legend-item').classed('inactive', false);\n  };\n\n  private pathMouseOver = (event, data, index, nodes) => {\n    const slices = this.chart.selectAll('.slice');\n    const slice = slices.filter((d, i) => i === index);\n\n    this.chart\n      .selectAll('.legend-item')\n      .filter((d, i) => i !== index)\n      .classed('inactive', true);\n\n    slices.filter((d, i) => i !== index).classed('inactive', true);\n\n    slice\n      .transition()\n      .duration(300)\n      .delay(0)\n      .attrTween('d', this.arcMouseOverTween);\n\n    this.hovered.emit({\n      event: event,\n      data: data.data ? data.data : data // legend hover data is different than slice hover data\n    });\n  };\n\n  private pathMouseOut = (data, index, value) => {\n    const slices = this.chart.selectAll('.slice');\n    const slice = slices.filter((d, i) => i === index);\n\n    this.chart\n      .selectAll('.legend-item')\n      .filter((d, i) => i !== index)\n      .classed('inactive', false);\n\n    slices.classed('inactive', false);\n\n    slice\n      .transition()\n      .duration(300)\n      .delay(0)\n      .attrTween('d', this.arcMouseOutTween);\n  };\n\n  private pathClick = (event, data, index, nodes) => {\n    this.clicked.emit({\n      event: event,\n      data: data.data\n    });\n  };\n\n  private tooltipShow = (node, data) => {\n    this.tooltipSetPosition(node);\n\n    const percentage = (data.endAngle - data.startAngle) / (2 * Math.PI);\n    let label;\n\n    switch (this.tooltipLabelFormatType) {\n      case 'time':\n        const parsedTime = d3_isoParse(data.data.label);\n        label = this.tooltipLabelFormat(parsedTime);\n        break;\n\n      default:\n        label = data.data.label;\n    }\n\n    this.tooltip.html(\n      `\n        <div class=\"tooltip-label\">${label}</div>\n        <div class=\"tooltip-value\">${this.tooltipValueFormat(percentage)}</div>\n      `\n    );\n\n    this.tooltip.style('opacity', 1);\n  };\n\n  private tooltipMove = node => {\n    this.tooltipSetPosition(node);\n  };\n\n  private tooltipHide = () => {\n    this.tooltip.style('opacity', 0);\n  };\n\n  private tooltipSetPosition = node => {\n    const coordinates = d3_mouse(node);\n\n    this.tooltip.style('left', `${coordinates[0] + 16}px`);\n    this.tooltip.style('top', `${coordinates[1] + 16}px`);\n  };\n}\n","import {\n  Component,\n  OnInit,\n  OnChanges,\n  Input,\n  Output,\n  EventEmitter,\n  ElementRef,\n  HostBinding,\n  OnDestroy,\n  SimpleChanges,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\nimport { ViewportScroller, Location } from '@angular/common';\n\nimport { select as d3_select, event as d3_event } from 'd3-selection';\nimport { scaleOrdinal as d3_scaleOrdinal, scaleLinear as d3_scaleLinear, scaleBand as d3_scaleBand } from 'd3-scale';\nimport { min as d3_min, max as d3_max } from 'd3-array';\nimport { axisBottom as d3_axisBottom, axisLeft as d3_axisLeft } from 'd3-axis';\nimport { isoParse as d3_isoParse } from 'd3-time-format';\n\nimport { PbdsDatavizService } from './dataviz.service';\nimport { PbdsDatavizBar } from './dataviz.interfaces';\n\n@Component({\n  selector: 'pbds-dataviz-bar',\n  template: ``,\n  styles: [],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class PbdsDatavizBarComponent implements OnInit, OnDestroy, OnChanges {\n  @HostBinding('class.pbds-chart')\n  chartClass = true;\n\n  @HostBinding('class.pbds-chart-bar')\n  barClass = true;\n\n  @Input()\n  data: PbdsDatavizBar[];\n\n  @Input()\n  width = 306;\n\n  @Input()\n  height = 400;\n\n  @Input()\n  type: 'low' | 'medium' | 'high' | 'debug' = 'medium'; // debug to show all chart options\n\n  @Input()\n  singleSeries = false;\n\n  @Input()\n  xAxisFormatType: 'number' | 'time' = null;\n\n  @Input()\n  xAxisFormatString = '';\n\n  @Input()\n  xAxisTitle: string | null = null;\n\n  @Input()\n  yAxisFormatType: 'number' | 'time' = null;\n\n  @Input()\n  yAxisFormatString = '';\n\n  @Input()\n  yAxisTicks = 5;\n\n  @Input()\n  yAxisMinBuffer = 0.01;\n\n  @Input()\n  yAxisMaxBuffer = 0.01;\n\n  @Input()\n  hideLegend = false;\n\n  @Input()\n  legendWidth = 105 + 28; // hardcoded legend width + left margin, do not document until feedback\n\n  @Input()\n  legendPosition: 'right' | 'bottom' = 'right';\n\n  @Input()\n  legendLabelFormatType: 'number' | 'time' = null;\n\n  @Input()\n  legendLabelFormatString = '';\n\n  @Input()\n  tooltipLabelFormatType: 'number' | 'time' = null;\n\n  @Input()\n  tooltipLabelFormatString = '';\n\n  @Input()\n  tooltipValueFormatType: 'number' | 'time' = null;\n\n  @Input()\n  tooltipValueFormatString = '';\n\n  @Input()\n  marginTop = 10; // hardcoded on purpose, do not document until feedback\n\n  @Input()\n  marginRight = 0; // hardcoded on purpose, do not document until feedback\n\n  @Input()\n  marginBottom = 30; // hardcoded on purpose, do not document until feedback\n\n  @Input()\n  marginLeft = 55; // hardcoded on purpose, do not document until feedback\n\n  @Input()\n  threshold = null;\n\n  @Input()\n  thresholdLabel = 'Threshold';\n\n  @Input()\n  average = null;\n\n  @Input()\n  averageLabel = 'Average';\n\n  @Input()\n  theme;\n\n  @Output()\n  hovered: EventEmitter<object> = new EventEmitter<object>();\n\n  @Output()\n  clicked: EventEmitter<object> = new EventEmitter<object>();\n\n  private chart;\n  private svg;\n  private margin;\n  private colorRange;\n  private hideGrayBars: boolean;\n  private yThreshold;\n  private yAverage;\n  private xAxisScale;\n  private xAxisCall;\n  private xAxis;\n  private xAxisFormat;\n  private xAxisTitleMargin: number;\n  private yAxisScale;\n  private yAxisCall;\n  private yAxis;\n  private yAxisFormat;\n  private xGrid;\n  private xGridCall;\n  private yGrid;\n  private yGridCall;\n  private xAxisTickSize: number;\n  private xAxisTickSizeOuter: number;\n  private yAxisTickSize: number;\n  private yAxisTickSizeOuter: number;\n  private hideXAxis: boolean;\n  private hideYAxis: boolean;\n  private hideXAxisDomain: boolean;\n  private hideYAxisDomain: boolean;\n  private hideXAxisZero: boolean;\n  private hideYAxisZero: boolean;\n  private hideXGrid: boolean;\n  private hideYGrid: boolean;\n  private hideXAxisTicks: boolean;\n  private hideYAxisTicks: boolean;\n  private legendLabelFormat;\n  private tooltip;\n  private hideTooltip: boolean;\n  private hideTooltipLabel: boolean;\n  private tooltipValueFormat;\n  private tooltipLabelFormat;\n\n  constructor(\n    private _dataviz: PbdsDatavizService,\n    private _element: ElementRef,\n    private _scroll: ViewportScroller,\n    private _location: Location\n  ) {}\n\n  ngOnInit() {\n    this.margin = {\n      top: +this.marginTop,\n      right: +this.marginRight,\n      bottom: +this.marginBottom,\n      left: +this.marginLeft\n    };\n\n    // create formatters\n    this.xAxisFormat = this._dataviz.d3Format(this.xAxisFormatType, this.xAxisFormatString);\n    this.yAxisFormat = this._dataviz.d3Format(this.yAxisFormatType, this.yAxisFormatString);\n    this.legendLabelFormat = this._dataviz.d3Format(this.legendLabelFormatType, this.legendLabelFormatString);\n    this.tooltipLabelFormat = this._dataviz.d3Format(this.tooltipLabelFormatType, this.tooltipLabelFormatString);\n    this.tooltipValueFormat = this._dataviz.d3Format(this.tooltipValueFormatType, this.tooltipValueFormatString);\n\n    // defaults for all chart types\n    this.hideGrayBars = false;\n    this.hideXAxis = false;\n    this.hideYAxis = false;\n    this.hideXAxisZero = false;\n    this.hideYAxisZero = false;\n    this.hideXGrid = false;\n    this.hideYGrid = false;\n    this.hideXAxisDomain = false;\n    this.hideYAxisDomain = false;\n    this.hideTooltip = false;\n    this.hideXAxisTicks = false;\n    this.hideYAxisTicks = false;\n    this.xAxisTickSize = 8;\n    this.xAxisTickSizeOuter = 0;\n    this.xAxisTitleMargin = this.xAxisTitle ? 20 : 0;\n    this.yAxisTickSize = 8;\n    this.yAxisTickSizeOuter = 0;\n    this.hideTooltipLabel = false;\n\n    if (this.type !== 'debug') {\n      // set type defaults\n      switch (this.type) {\n        case 'low':\n          this.hideGrayBars = true;\n          this.hideXAxis = !this.hideLegend;\n          this.hideXAxisTicks = true;\n          this.hideXGrid = true;\n          this.hideYAxisDomain = false;\n          this.hideYAxisTicks = true;\n          this.legendPosition = 'bottom';\n          this.hideTooltipLabel = true;\n          break;\n\n        case 'medium':\n          this.hideXAxisDomain = true;\n          this.hideXAxis = !this.hideLegend;\n          this.hideXGrid = true;\n          this.hideXAxisTicks = true;\n          this.hideYAxisDomain = true;\n          this.hideYAxisTicks = true;\n          this.hideYGrid = true;\n          this.hideTooltipLabel = true;\n          break;\n\n        case 'high':\n          this.hideXAxis = true;\n          this.hideXAxisDomain = true;\n          this.hideXGrid = true;\n          this.hideYAxisDomain = true;\n          this.hideYAxisTicks = true;\n          this.hideYGrid = true;\n          this.hideLegend = true;\n          this.hideTooltipLabel = false;\n          break;\n      }\n\n      // single series overrides\n      if (this.singleSeries) {\n        this.hideLegend = true;\n        this.hideXAxis = true;\n        this.hideXGrid = true;\n        this.hideTooltipLabel = false;\n      }\n    }\n\n    // adjust margin if xAxis hidden\n    if (this.hideXAxis) this.margin.bottom = 10; // need small margin for yAxis with 0 tick label\n\n    if (!this.hideLegend && this.legendPosition === 'right') {\n      this.width = +this.width - +this.legendWidth;\n    }\n\n    // create the chart\n    this.chart = d3_select(this._element.nativeElement).attr('aria-hidden', 'true');\n\n    // create chart svg\n    this.svg = this.chart\n      .append('svg')\n      .attr('width', +this.width)\n      .attr('height', +this.height + this.margin.top + this.margin.bottom + this.xAxisTitleMargin)\n      .attr('class', 'img-fluid')\n      .attr('preserveAspectRatio', 'xMinYMin meet')\n      .attr(\n        'viewBox',\n        `-${this.margin.left} -${this.margin.top} ${+this.width} ${+this.height +\n          this.margin.top +\n          this.margin.bottom +\n          this.xAxisTitleMargin}`\n      );\n\n    // build color ranges\n    this.colorRange = d3_scaleOrdinal().range(\n      this._dataviz.createGradientDefs(this.svg, this.singleSeries, this.theme)\n    );\n\n    // X AXIS\n    this.xAxisScale = d3_scaleBand()\n      .domain(this.data.map(d => d.label))\n      .rangeRound([0, this.width - this.margin.left])\n      .align(0);\n\n    // add padding to the scale for gray bars\n    !this.hideGrayBars\n      ? this.xAxisScale.paddingInner(0.1).paddingOuter(0)\n      : this.xAxisScale.paddingInner(0).paddingOuter(0);\n\n    this.xAxisCall = d3_axisBottom(this.xAxisScale)\n      .tickSize(this.xAxisTickSize)\n      .tickSizeOuter(this.xAxisTickSizeOuter)\n      .tickFormat(this.xAxisFormatter);\n\n    this.xAxis = this.svg\n      .append('g')\n      .attr('class', 'axis axis-x')\n      .attr('transform', `translate(0, ${this.height})`)\n      .classed('axis-hidden', this.hideXAxis)\n      .classed('axis-zero-hidden', this.hideXAxisZero)\n      .classed('axis-domain-hidden', this.hideXAxisDomain)\n      .classed('axis-ticks-hidden', this.hideXAxisTicks)\n      .call(this.xAxisCall);\n\n    // X GRIDLINES\n    if (!this.hideXGrid) {\n      this.xGridCall = d3_axisBottom(this.xAxisScale).tickSize(-this.height);\n\n      this.xGrid = this.svg\n        .append('g')\n        .attr('class', 'grid grid-x')\n        .classed('grid-zero-hidden', this.hideXAxisZero)\n        .attr('transform', `translate(0, ${this.height})`)\n        .call(this.xGridCall);\n    }\n\n    // X AXIS TITLE\n    if (this.xAxisTitle) {\n      this.svg\n        .append('text')\n        .attr('class', 'axis-title')\n        .attr('text-anchor', 'center')\n        .attr('x', this.width / 2 - this.margin.left)\n        .attr('y', this.height + this.margin.top + (this.hideXAxis ? 15 : 0))\n        .text(this.xAxisTitle);\n    }\n\n    // Y AXIS\n    this.yAxisScale = d3_scaleLinear()\n      .domain([\n        d3_min(this.data, d => d.value - d.value * +this.yAxisMinBuffer),\n        d3_max(this.data, d => d.value + d.value * +this.yAxisMaxBuffer)\n      ])\n      .nice()\n      .rangeRound([this.height, 0]);\n\n    this.yAxisCall = d3_axisLeft(this.yAxisScale)\n      .ticks(this.yAxisTicks)\n      .tickSize(this.yAxisTickSize)\n      .tickSizeOuter(this.yAxisTickSizeOuter)\n      .tickFormat(this.yAxisFormatter);\n\n    this.yAxis = this.svg\n      .append('g')\n      .attr('class', 'axis axis-y')\n      .classed('axis-hidden', this.hideYAxis)\n      .classed('axis-zero-hidden', this.hideYAxisZero)\n      .classed('axis-domain-hidden', this.hideYAxisDomain)\n      .classed('axis-ticks-hidden', this.hideYAxisTicks)\n      .call(this.yAxisCall);\n\n    // Y GRIDLINES\n    if (!this.hideYGrid) {\n      this.yGridCall = d3_axisLeft(this.yAxisScale)\n        .ticks(this.yAxisTicks)\n        .tickSize(-this.width + this.margin.left + this.margin.right);\n\n      this.yGrid = this.svg\n        .append('g')\n        .attr('class', 'grid grid-y')\n        .classed('grid-zero-hidden', this.hideYAxisZero)\n        .attr('transform', `translate(0, 0)`)\n        .call(this.yGridCall);\n    }\n\n    // Y THRESHOLD\n    if (this.threshold) {\n      this.yThreshold = this.svg\n        .append('line')\n        .attr('class', 'threshold')\n        .attr('x2', +this.width - this.margin.right - this.margin.left)\n        .attr('transform', `translate(0,  ${this.yAxisScale(+this.threshold)})`);\n    }\n\n    // Y AVERAGE\n    if (this.average) {\n      this.yAverage = this.svg\n        .append('line')\n        .attr('class', 'average')\n        .attr('x2', +this.width - this.margin.right - this.margin.left)\n        .attr('transform', `translate(0,  ${this.yAxisScale(+this.average)})`);\n    }\n\n    // TOOLTIP\n    if (!this.hideTooltip) {\n      this.tooltip = d3_select('body')\n        .append('div')\n        .attr('class', 'pbds-tooltip south')\n        .style('opacity', 0)\n        .attr('aria-hidden', 'true'); // hide tooltip for accessibility\n    }\n\n    // add legend classes\n    if (!this.hideLegend) {\n      this.chart.classed('pbds-chart-legend-bottom', this.legendPosition === 'bottom' ? true : false);\n      this.chart.append('ul').attr('class', `legend legend-${this.legendPosition}`);\n    }\n\n    // add average to legend\n    if (this.average && !this.hideLegend) {\n      this.chart\n        .select('.legend')\n        .append('li')\n        .attr('class', 'legend-static legend-average')\n        .html(() => {\n          return `\n          <span class=\"legend-key\"></span>\n          <span class=\"legend-label\">${this.averageLabel}</span>\n        `;\n        });\n    }\n\n    // add threshold to legend\n    if (this.threshold && !this.hideLegend) {\n      this.chart\n        .select('.legend')\n        .append('li')\n        .attr('class', 'legend-static legend-threshold')\n        .html(() => {\n          return `\n          <span class=\"legend-key\"></span>\n          <span class=\"legend-label\">${this.thresholdLabel}</span>\n        `;\n        });\n    }\n\n    this.updateChart();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.data && !changes.data.firstChange) {\n      this.updateChart();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.tooltip) this.tooltip.remove();\n  }\n\n  updateChart = () => {\n    // update the xScale\n    this.xAxisScale.domain(this.data.map(d => d.label));\n\n    // update the yScale\n    this.yAxisScale\n      .domain([\n        d3_min(this.data, d => d.value - d.value * +this.yAxisMinBuffer),\n        d3_max(this.data, d => d.value + d.value * +this.yAxisMaxBuffer)\n      ])\n      .rangeRound([this.height, 0])\n      .nice();\n\n    this.xAxis\n      .transition()\n      .duration(1000)\n      .call(this.xAxisCall);\n\n    this.yAxis\n      .transition()\n      .duration(1000)\n      .call(this.yAxisCall);\n\n    // update the grids\n    if (!this.hideXGrid) {\n      this.xGrid\n        .transition()\n        .duration(1000)\n        .call(this.xGridCall);\n    }\n\n    if (!this.hideYGrid) {\n      this.yGrid\n        .transition()\n        .duration(1000)\n        .call(this.yGridCall);\n    }\n\n    if (!this.hideGrayBars) {\n      // gray bars\n      this.svg\n        .selectAll('.gray-bar')\n        .data(this.data)\n        .join(\n          enter =>\n            enter\n              .append('rect')\n              .attr('class', 'gray-bar')\n              .attr('height', 0)\n              .attr('x', d => this.xAxisScale(d.label))\n              .attr('width', this.xAxisScale.bandwidth())\n              .call(enter =>\n                enter\n                  .transition()\n                  .duration(500)\n                  .attr('height', this.height)\n              ),\n          update =>\n            update\n              .transition()\n              .duration(1000)\n              .attr('x', d => this.xAxisScale(d.label))\n              .attr('width', this.xAxisScale.bandwidth()),\n          exit =>\n            exit\n              .transition()\n              .attr('pointer-events', 'none')\n              .remove()\n        );\n\n      // color bars\n      this.svg\n        .selectAll('.bar')\n        .data(this.data)\n        .join(\n          enter =>\n            enter\n              .append('rect')\n              .attr('class', 'bar')\n              .attr('fill', d => `url(${this._location.path()}#gradient-${this.colorRange(d.label).substr(1)})`) // removes hash to prevent safari bug;\n              .attr('x', d => this.xAxisScale(d.label) + this.xAxisScale.bandwidth() / 4)\n              .attr('width', this.xAxisScale.bandwidth() / 2)\n              .attr('y', this.height)\n              .attr('height', 0)\n              .attr('pointer-events', 'none')\n              .call(enter =>\n                enter\n                  .transition()\n                  .duration(1000)\n                  .attr('y', d => this.yAxisScale(d.value))\n                  .attr('height', d => this.height - this.yAxisScale(d.value))\n                  .attr('data-color', d => this.colorRange(d.label))\n                  .transition()\n                  .attr('pointer-events', 'auto')\n              ),\n          update =>\n            update\n              .attr('pointer-events', 'none')\n              .transition()\n              .duration(1000)\n              .attr('x', d => this.xAxisScale(d.label) + this.xAxisScale.bandwidth() / 4)\n              .attr('width', this.xAxisScale.bandwidth() / 2)\n              .attr('height', d => this.height - this.yAxisScale(d.value))\n              .attr('y', d => this.yAxisScale(d.value))\n              .transition()\n              .attr('pointer-events', 'auto'),\n          exit =>\n            exit\n              .transition()\n              .attr('pointer-events', 'none')\n              .remove()\n        )\n        .on('mouseover', (data, index, nodes) => this.barMouseOver(d3_event, data, index, nodes))\n        .on('mouseout', (data, index, nodes) => this.barMouseOut())\n        .on('click', (data, index, nodes) => this.barMouseClick(d3_event, data, index, nodes));\n    } else {\n      // color bars\n      this.svg\n        .selectAll('.bar')\n        .data(this.data)\n        .join(\n          enter =>\n            enter\n              .append('rect')\n              .attr('class', 'bar')\n              .attr('fill', d => `url(${this._location.path()}#gradient-${this.colorRange(d.label).substr(1)})`)\n              .attr('x', d => this.xAxisScale(d.label) + this.xAxisScale.bandwidth() / 5.5)\n              .attr('width', this.xAxisScale.bandwidth() / 1.5)\n              .attr('y', this.height)\n              .attr('height', 0)\n              .attr('pointer-events', 'none')\n              .call(enter =>\n                enter\n                  .transition()\n                  .duration(1000)\n                  .attr('y', d => this.yAxisScale(d.value))\n                  .attr('height', d => this.height - this.yAxisScale(d.value))\n                  .attr('data-color', d => this.colorRange(d.label))\n                  .transition()\n                  .attr('pointer-events', 'auto')\n              ),\n          update =>\n            update\n              .attr('pointer-events', 'none')\n              .transition()\n              .duration(1000)\n              .attr('x', d => this.xAxisScale(d.label) + this.xAxisScale.bandwidth() / 5.5)\n              .attr('width', this.xAxisScale.bandwidth() / 1.5)\n              .attr('height', d => this.height - this.yAxisScale(d.value))\n              .attr('y', d => this.yAxisScale(d.value))\n              .transition()\n              .attr('pointer-events', 'auto'),\n          exit =>\n            exit\n              .transition()\n              .attr('pointer-events', 'none')\n              .remove()\n        )\n        .on('mouseover', (data, index, nodes) => this.barMouseOver(d3_event, data, index, nodes))\n        .on('mouseout', (data, index, nodes) => this.barMouseOut())\n        .on('click', (data, index, nodes) => this.barMouseClick(d3_event, data, index, nodes));\n    }\n\n    if (!this.hideLegend) {\n      this.chart\n        .select('.legend')\n        .selectAll('.legend-item')\n        .data(this.data)\n        .join(\n          enter => {\n            const li = enter.insert('li', 'li.legend-static').attr('class', 'legend-item');\n\n            li.append('span')\n              .attr('class', 'legend-key')\n              .style('background-color', d => this.colorRange(d.label));\n\n            li.append('span')\n              .attr('class', 'legend-label')\n              .html(d => {\n                switch (this.legendLabelFormatType) {\n                  case 'number':\n                    return this.legendLabelFormat(d.label);\n\n                  case 'time':\n                    const parsedTime = d3_isoParse(d.label);\n                    return this.legendLabelFormat(parsedTime);\n\n                  default:\n                    return d.label;\n                }\n              });\n\n            return li;\n          },\n          update =>\n            update.select('.legend-label').html(d => {\n              switch (this.legendLabelFormatType) {\n                case 'number':\n                  return this.legendLabelFormat(d.label);\n\n                case 'time':\n                  const parsedTime = d3_isoParse(d.label);\n                  return this.legendLabelFormat(parsedTime);\n\n                default:\n                  return d.label;\n              }\n            }),\n          exit => exit.remove()\n        )\n        .on('mouseover', (data, index, nodes) => this.legendMouseOver(d3_event, data, index, nodes))\n        .on('mouseout', () => this.legendMouseOut())\n        .on('click', (data, index, nodes) => this.legendMouseClick(d3_event, data, index, nodes));\n    }\n\n    if (this.threshold) {\n      this.yThreshold\n        .raise()\n        .transition()\n        .duration(1000)\n        .attr('transform', `translate(0,  ${this.yAxisScale(+this.threshold)})`);\n    }\n\n    if (this.average) {\n      this.yAverage\n        .raise()\n        .transition()\n        .duration(1000)\n        .attr('transform', `translate(0,  ${this.yAxisScale(+this.average)})`);\n    }\n  };\n\n  barMouseOver = (event, data, index, nodes) => {\n    this.chart\n      .selectAll('.bar')\n      .filter((d, i) => i !== index)\n      .classed('inactive', true);\n\n    const bar = this.chart.selectAll('.bar').filter((d, i) => i === index);\n\n    const barColor = bar.attr('data-color');\n\n    bar.style('fill', barColor);\n\n    this.chart\n      .selectAll('.legend-item')\n      .filter((d, i) => i !== index)\n      .classed('inactive', true);\n\n    this.tooltipShow(data, nodes.filter((d, i) => i === index)[0]);\n\n    this.hovered.emit({ event, data });\n  };\n\n  barMouseOut = () => {\n    this.chart\n      .selectAll('.bar')\n      .classed('inactive', false)\n      .style('fill', null);\n\n    this.chart.selectAll('.legend-item').classed('inactive', false);\n\n    this.tooltipHide();\n  };\n\n  barMouseClick = (event, data, index, nodes) => {\n    this.clicked.emit({ event, data });\n  };\n\n  legendMouseOver = (event, data, index, nodes) => {\n    this.chart\n      .selectAll('.legend-item')\n      .filter((d, i) => i !== index)\n      .classed('inactive', true);\n\n    this.chart\n      .selectAll('.bar')\n      .filter((d, i) => i !== index)\n      .classed('inactive', true);\n\n    const bar = this.chart.selectAll('.bar').filter((d, i) => i === index);\n\n    const barColor = bar.attr('data-color');\n\n    bar.style('fill', barColor);\n\n    this.tooltipShow(\n      data,\n      this.chart\n        .selectAll('.bar')\n        .filter((d, i) => i === index)\n        .node()\n    );\n\n    this.hovered.emit({ event, data });\n  };\n\n  legendMouseOut = () => {\n    this.chart.selectAll('.legend-item').classed('inactive', false);\n\n    this.chart\n      .selectAll('.bar')\n      .classed('inactive', false)\n      .style('fill', null);\n\n    this.tooltipHide();\n  };\n\n  legendMouseClick = (event, data, index, nodes) => {\n    this.clicked.emit({ event, data });\n  };\n\n  private tooltipShow = (data, node) => {\n    const dimensions = node.getBoundingClientRect();\n    const scroll = this._scroll.getScrollPosition();\n    let label;\n\n    switch (this.tooltipLabelFormatType) {\n      case 'number':\n        label = this.tooltipLabelFormat(data.label);\n        break;\n\n      case 'time':\n        const parsedTime = d3_isoParse(data.label);\n        label = this.tooltipLabelFormat(parsedTime);\n        break;\n\n      default:\n        label = data.label;\n    }\n    const value =\n      this.tooltipValueFormat === null\n        ? `<div class=\"tooltip-value\">${data.value}</div>`\n        : `<div class=\"tooltip-value\">${this.tooltipValueFormat(data.value)}</div>`;\n\n    this.tooltip.html(\n      `\n        ${this.hideTooltipLabel ? '' : `${label}`}\n        ${value}\n      `\n    );\n\n    const tooltipOffsetWidth = +this.tooltip.node().offsetWidth / 2;\n    const tooltipOffsetHeight = +this.tooltip.node().offsetHeight + 8;\n\n    this.tooltip.style('top', `${+scroll[1] + +dimensions.top - tooltipOffsetHeight}px`); //\n    this.tooltip.style('left', `${+scroll[0] + +dimensions.left - tooltipOffsetWidth + +dimensions.width / 2}px`);\n    this.tooltip.style('opacity', 1);\n  };\n\n  private tooltipHide = () => {\n    this.tooltip.style('opacity', 0);\n  };\n\n  private xAxisFormatter = item => {\n    switch (this.xAxisFormatType) {\n      case 'number':\n        return this.xAxisFormat(item);\n\n      case 'time':\n        const parseDate = d3_isoParse(item);\n        return this.xAxisFormat(parseDate);\n\n      default:\n        return item;\n    }\n  };\n\n  private yAxisFormatter = item => {\n    switch (this.yAxisFormatType) {\n      case 'number':\n        return this.yAxisFormat(item);\n\n      case 'time':\n        const parseDate = d3_isoParse(item);\n        return this.yAxisFormat(parseDate);\n\n      default:\n        return item;\n    }\n  };\n}\n","import {\n  Component,\n  OnInit,\n  OnChanges,\n  Input,\n  Output,\n  EventEmitter,\n  ElementRef,\n  HostBinding,\n  OnDestroy,\n  SimpleChanges,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\nimport { ViewportScroller, Location } from '@angular/common';\n\nimport { select as d3_select, event as d3_event, mouse as d3_mouse } from 'd3-selection';\nimport { line as d3_line, area as d3_area, curveCatmullRom as d3_curveCatmullRom } from 'd3-shape';\nimport { scaleOrdinal as d3_scaleOrdinal, scaleLinear as d3_scaleLinear, scaleTime as d3_scaleTime } from 'd3-scale';\nimport { min as d3_min, max as d3_max, extent as d3_extent, bisectLeft as d3_bisectLeft } from 'd3-array';\nimport { axisBottom as d3_axisBottom, axisLeft as d3_axisLeft } from 'd3-axis';\nimport { format as d3_format } from 'd3-format';\nimport { isoParse as d3_isoParse, isoFormat as d3_isoFormat, timeFormat as d3_timeFormat } from 'd3-time-format';\nimport { easeQuadInOut as d3_easeQuadInOut } from 'd3-ease';\n\nimport { PbdsDatavizService } from './dataviz.service';\nimport { PbdsDatavizLine } from './dataviz.interfaces';\n\n// assign an ID for each component instance\nlet nextId = 0;\n\n@Component({\n  selector: 'pbds-dataviz-line',\n  template: ``,\n  styles: [],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class PbdsDatavizLineComponent implements OnInit, OnDestroy, OnChanges {\n  @HostBinding('class.pbds-chart')\n  chartClass = true;\n\n  @HostBinding('class.pbds-chart-line')\n  lineClass = true;\n\n  @Input()\n  data: PbdsDatavizLine;\n\n  @Input()\n  width = 306;\n\n  @Input()\n  height = 400;\n\n  @Input()\n  type: 'medium' | 'high' | 'debug' = 'medium'; // debug to show all chart options\n\n  @Input()\n  area = false;\n\n  @Input()\n  xAxisFormatString = '';\n\n  @Input()\n  xAxisTicks = 6;\n\n  @Input()\n  yAxisFormatString = '';\n\n  @Input()\n  yAxisTicks = 5;\n\n  @Input()\n  yAxisMinBuffer = 0.01;\n\n  @Input()\n  yAxisMaxBuffer = 0.01;\n\n  @Input()\n  hideXGrid = true;\n\n  @Input()\n  hideYGrid = true;\n\n  @Input()\n  hideLegend = false;\n\n  @Input()\n  legendWidth = 105 + 28; // hardcoded legend width + left margin, do not document until feedback\n\n  @Input()\n  legendPosition: 'right' | 'bottom' = 'right';\n\n  @Input()\n  legendLabelFormatType: 'number' | 'time' = null;\n\n  @Input()\n  legendLabelFormatString = '';\n\n  @Input()\n  tooltipHeadingFormatString = '';\n\n  @Input()\n  tooltipLabelFormatType: 'number' | 'time' = null;\n\n  @Input()\n  tooltipLabelFormatString = '';\n\n  @Input()\n  tooltipValueFormatType: 'number' | 'time' = null;\n\n  @Input()\n  tooltipValueFormatString = '';\n\n  @Input()\n  marginTop = 10; // hardcoded on purpose, do not document until feedback\n\n  @Input()\n  marginRight = 20; // hardcoded on purpose, do not document until feedback\n\n  @Input()\n  marginBottom = 30; // hardcoded on purpose, do not document until feedback\n\n  @Input()\n  marginLeft = 55; // hardcoded on purpose, do not document until feedback\n\n  @Input()\n  theme;\n\n  @Output()\n  hovered: EventEmitter<object> = new EventEmitter<object>();\n\n  @Output()\n  clicked: EventEmitter<object> = new EventEmitter<object>();\n\n  @Output()\n  tooltipHovered: EventEmitter<object> = new EventEmitter<object>();\n\n  @Output()\n  tooltipClicked: EventEmitter<object> = new EventEmitter<object>();\n\n  private chart;\n  private svg;\n  private mouserect;\n  private tooltipLine;\n  private margin;\n  private clipPathId;\n  private d3line;\n  private d3area;\n  private lineWidth;\n  private lineCurved;\n  private linePoints;\n  private colorRange;\n  private xAxisScale;\n  private xAxisCall;\n  private xAxis;\n  private xAxisFormat;\n  private yAxisScale;\n  private yAxisCall;\n  private yAxis;\n  private yAxisFormat;\n  private xGrid;\n  private xGridCall;\n  private yGrid;\n  private yGridCall;\n  private xAxisTickSize: number;\n  private xAxisTickSizeOuter: number;\n  private yAxisTickSize: number;\n  private yAxisTickSizeOuter: number;\n  private hideXAxis: boolean;\n  private hideYAxis: boolean;\n  private hideXAxisDomain: boolean;\n  private hideYAxisDomain: boolean;\n  private hideXAxisZero: boolean;\n  private hideYAxisZero: boolean;\n  private hideXAxisTicks: boolean;\n  private hideYAxisTicks: boolean;\n  private legendLabelFormat;\n  private tooltip;\n  private hideTooltip: boolean;\n  private tooltipHeadingFormat;\n  private tooltipValueFormat;\n  private tooltipLabelFormat;\n  private mousedata;\n\n  constructor(\n    private _dataviz: PbdsDatavizService,\n    private _element: ElementRef,\n    private _scroll: ViewportScroller,\n    private _location: Location\n  ) {}\n\n  ngOnInit() {\n    this.margin = {\n      top: +this.marginTop,\n      right: +this.marginRight,\n      bottom: +this.marginBottom,\n      left: +this.marginLeft\n    };\n\n    this.clipPathId = nextId;\n\n    // create formatters\n    this.xAxisFormat = d3_timeFormat(this.xAxisFormatString);\n    this.yAxisFormat = d3_format(this.yAxisFormatString);\n    this.legendLabelFormat = this._dataviz.d3Format(this.legendLabelFormatType, this.legendLabelFormatString);\n    this.tooltipHeadingFormat = d3_timeFormat(this.tooltipHeadingFormatString);\n    this.tooltipLabelFormat = this._dataviz.d3Format(this.tooltipLabelFormatType, this.tooltipLabelFormatString);\n    this.tooltipValueFormat = this._dataviz.d3Format(this.tooltipValueFormatType, this.tooltipValueFormatString);\n\n    // defaults for all chart types\n    this.lineWidth = 3;\n    this.lineCurved = true;\n    this.linePoints = true;\n    this.hideXAxis = false;\n    this.hideYAxis = false;\n    this.hideXAxisZero = false;\n    this.hideYAxisZero = false;\n    this.hideXAxisDomain = false;\n    this.hideYAxisDomain = false;\n    this.hideTooltip = false;\n    this.hideXAxisTicks = false;\n    this.hideYAxisTicks = false;\n    this.xAxisTickSize = 8;\n    this.xAxisTickSizeOuter = 0;\n    this.yAxisTickSize = 8;\n    this.yAxisTickSizeOuter = 0;\n\n    if (this.type !== 'debug') {\n      // set type defaults\n      switch (this.type) {\n        case 'medium':\n          this.hideXAxisTicks = true;\n          this.hideYAxisTicks = true;\n          break;\n\n        case 'high':\n          this.lineWidth = 2;\n          this.lineCurved = false;\n          this.linePoints = false;\n          this.hideXAxisTicks = true;\n          this.hideYAxisTicks = true;\n          this.hideXGrid = false;\n          this.hideYGrid = false;\n          break;\n      }\n    }\n\n    // adjust margin if xAxis hidden\n    if (this.hideXAxis) this.margin.bottom = 10; // need small margin for yAxis with 0 tick label\n\n    if (!this.hideLegend && this.legendPosition === 'right') {\n      this.width = +this.width - +this.legendWidth;\n    }\n\n    // define line\n    this.d3line = d3_line()\n      .x((d: any, i) => this.xAxisScale(d3_isoParse(this.data.dates[i])))\n      .y((d: any) => this.yAxisScale(d));\n\n    // define line curve\n    if (this.lineCurved) {\n      this.d3line.curve(d3_curveCatmullRom.alpha(0.5));\n    }\n\n    // define area\n    if (this.area) {\n      this.d3area = d3_area()\n        .x((d: any, i) => this.xAxisScale(d3_isoParse(this.data.dates[i])))\n        .y0(this.height)\n        .y1((d: any, i) => this.yAxisScale(d));\n\n      if (this.lineCurved) {\n        this.d3area.curve(d3_curveCatmullRom.alpha(0.5));\n      }\n    }\n\n    // create the chart\n    this.chart = d3_select(this._element.nativeElement).attr('aria-hidden', 'true');\n\n    // create chart svg\n    this.svg = this.chart\n      .append('svg')\n      .attr('width', +this.width + this.margin.right)\n      .attr('height', +this.height + this.margin.top + this.margin.bottom)\n      .attr('class', 'img-fluid')\n      .attr('preserveAspectRatio', 'xMinYMin meet')\n      .attr(\n        'viewBox',\n        `-${this.margin.left} -${this.margin.top} ${+this.width + this.margin.right} ${+this.height +\n          this.margin.top +\n          this.margin.bottom}`\n      );\n\n    // add rectangle to capture mouse\n    this.mouserect = this.svg\n      .append('rect')\n      .attr('width', this.width - this.margin.left - this.margin.right)\n      .attr('height', this.height)\n      .attr('class', 'mouserect')\n      .on('mousemove', (data, index, nodes) => this.mouserectMouseMove(d3_event, index, nodes))\n      .on('mouseout', (data, index, nodes) => this.mouserectMouseOut(d3_event, index, nodes))\n      .on('click', (data, index, nodes) => this.mouserectMouseClick());\n\n    this.tooltipLine = this.svg\n      .append('line')\n      .attr('y1', 0)\n      .attr('y2', this.height)\n      .attr('class', 'tooltip-line');\n\n    // define color range\n    this.colorRange = d3_scaleOrdinal().range(this._dataviz.getColors(false, this.theme));\n\n    // add glow def\n    this._dataviz.createGlowFilter(this.svg);\n\n    // X AXIS\n    this.xAxisScale = d3_scaleTime()\n      .domain(\n        d3_extent(this.data.dates, (d: any, i) => {\n          return d3_isoParse(d);\n        })\n      )\n      .range([0, this.width - this.margin.left - this.margin.right]);\n\n    this.xAxisCall = d3_axisBottom(this.xAxisScale)\n      .ticks(+this.xAxisTicks)\n      .tickSize(this.xAxisTickSize)\n      .tickSizeOuter(this.xAxisTickSizeOuter)\n      .tickFormat(this.xAxisFormatter);\n\n    this.xAxis = this.svg\n      .append('g')\n      .attr('class', 'axis axis-x')\n      .attr('transform', `translate(0, ${this.height})`) //${-this.margin.right / 2}\n      .classed('axis-hidden', this.hideXAxis)\n      .classed('axis-zero-hidden', this.hideXAxisZero)\n      .classed('axis-domain-hidden', this.hideXAxisDomain)\n      .classed('axis-ticks-hidden', this.hideXAxisTicks)\n      .call(this.xAxisCall);\n\n    // X GRIDLINES\n    if (!this.hideXGrid) {\n      this.xGridCall = d3_axisBottom(this.xAxisScale).tickSize(-this.height);\n\n      this.xGrid = this.svg\n        .append('g')\n        .attr('class', 'grid grid-x')\n        .classed('grid-zero-hidden', this.hideXAxisZero)\n        .attr('transform', `translate(0, ${this.height})`) //${-this.margin.right / 2}\n        .call(this.xGridCall);\n    }\n\n    // Y AXIS\n    this.yAxisScale = d3_scaleLinear()\n      .domain([\n        d3_min(this.data.series, (d: any, i) => {\n          const minVal = +d3_min(d.values);\n          return minVal - minVal * +this.yAxisMinBuffer;\n        }),\n        d3_max(this.data.series, (d: any, i) => {\n          const maxVal = +d3_max(d.values);\n          return maxVal + maxVal * this.yAxisMaxBuffer;\n        })\n      ])\n      .nice()\n      .range([this.height, 0]);\n\n    this.yAxisCall = d3_axisLeft(this.yAxisScale)\n      .ticks(this.yAxisTicks)\n      .tickSize(this.yAxisTickSize)\n      .tickSizeOuter(this.yAxisTickSizeOuter)\n      .tickFormat(this.yAxisFormatter);\n\n    this.yAxis = this.svg\n      .append('g')\n      .attr('class', 'axis axis-y')\n      .classed('axis-hidden', this.hideYAxis)\n      .classed('axis-zero-hidden', this.hideYAxisZero)\n      .classed('axis-domain-hidden', this.hideYAxisDomain)\n      .classed('axis-ticks-hidden', this.hideYAxisTicks)\n      .call(this.yAxisCall);\n\n    // Y GRIDLINES\n    if (!this.hideYGrid) {\n      this.yGridCall = d3_axisLeft(this.yAxisScale)\n        .ticks(this.yAxisTicks)\n        .tickSize(-this.width + this.margin.left + this.margin.right);\n\n      this.yGrid = this.svg\n        .append('g')\n        .attr('class', 'grid grid-y')\n        .classed('grid-zero-hidden', this.hideYAxisZero)\n        .attr('transform', `translate(0, 0)`)\n        .call(this.yGridCall);\n    }\n\n    // TOOLTIP\n    if (!this.hideTooltip) {\n      this.tooltip = d3_select('body')\n        .append('div')\n        .attr('class', 'pbds-tooltip west')\n        .style('opacity', 0)\n        .attr('aria-hidden', 'true'); // hide tooltip for accessibility\n\n      // tooltip header\n      this.tooltip.append('div').attr('class', 'tooltip-header');\n\n      // tooltip table\n      const tooltipTable = this.tooltip.append('table').attr('class', 'tooltip-table text-left w-100');\n\n      const tooltipTableTbody = tooltipTable.append('tbody');\n\n      tooltipTableTbody\n        .selectAll('tr')\n        .data(this.data)\n        .join(enter => enter.append('tr'));\n    }\n\n    // add legend classes\n    if (!this.hideLegend) {\n      this.chart.classed('pbds-chart-legend-bottom', this.legendPosition === 'bottom' ? true : false);\n      this.chart.append('ul').attr('class', `legend legend-${this.legendPosition}`);\n    }\n\n    // add clip path for line animation\n    this.svg\n      .append('clipPath')\n      .attr('id', `clip-path-${this.clipPathId}`)\n      .append('rect')\n      .attr('width', +this.width - +this.margin.left - +this.margin.right)\n      .attr('height', +this.height);\n\n    // add clip path for points animation\n    this.svg\n      .append('clipPath')\n      .attr('id', `clip-path-points-${this.clipPathId}`)\n      .append('rect')\n      .attr('width', +this.width + +this.margin.left - +this.margin.right)\n      .attr('height', +this.height)\n      .attr('transform', `translate(-${this.margin.left}, 0)`);\n\n    this.updateChart();\n\n    nextId++;\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.data && !changes.data.firstChange) {\n      this.updateChart();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.tooltip) this.tooltip.remove();\n  }\n\n  updateChart = () => {\n    this.mouserect.data(this.data);\n\n    // update the xScale\n    this.xAxisScale.domain(\n      d3_extent(this.data.dates, (d: any, i) => {\n        return d3_isoParse(d);\n      })\n    );\n\n    // update the yScale\n    this.yAxisScale\n      .domain([\n        d3_min(this.data.series, (d: any, i) => {\n          const minVal = +d3_min(d.values);\n          return minVal - minVal * +this.yAxisMinBuffer;\n        }),\n        d3_max(this.data.series, (d: any, i) => {\n          const maxVal = +d3_max(d.values);\n          return maxVal + maxVal * this.yAxisMaxBuffer;\n        })\n      ])\n      .nice();\n\n    this.xAxis\n      .transition()\n      .duration(1000)\n      .call(this.xAxisCall);\n\n    this.yAxis\n      .transition()\n      .duration(1000)\n      .call(this.yAxisCall);\n\n    // update the grids\n    if (!this.hideXGrid) {\n      this.xGrid\n        .transition()\n        .duration(1000)\n        .call(this.xGridCall);\n    }\n\n    if (!this.hideYGrid) {\n      this.yGrid\n        .transition()\n        .duration(1000)\n        .call(this.yGridCall);\n    }\n\n    // lines\n    this.svg\n      .selectAll('path.line')\n      .attr('filter', () => (this.type !== 'high' ? `url(${this._location.path()}#glow)` : null))\n      .data(this.data.series)\n      .join(\n        enter => {\n          enter\n            .append('path')\n            .attr('clip-path', `url(${this._location.path()}#clip-path-${this.clipPathId})`)\n            .attr('class', 'line')\n            .style('stroke', d => this.colorRange(d.label))\n            .style('stroke-width', this.lineWidth)\n            .attr('d', data => {\n              const array = new Array(data.values.length).fill(0);\n              return this.d3line(array);\n            })\n            .call(enter =>\n              enter\n                .transition()\n                .duration(1000)\n                .ease(d3_easeQuadInOut)\n                .attr('d', data => this.d3line(data.values))\n            );\n        },\n        update =>\n          update.call(update =>\n            update\n              .transition()\n              .duration(1000)\n              .ease(d3_easeQuadInOut)\n              .attr('d', d => this.d3line(d.values))\n          ),\n        exit => exit.remove()\n      );\n\n    // area\n    if (this.area) {\n      this.svg\n        .selectAll('path.area')\n        .data(this.data.series)\n        .join(\n          enter =>\n            enter\n              .append('path')\n              .attr('clip-path', `url(${this._location.path()}#clip-path-${this.clipPathId})`)\n              .attr('class', 'area')\n              .attr('d', data => {\n                const array = new Array(data.values.length).fill(0);\n                return this.d3area(array);\n              })\n              .style('color', d => this.colorRange(d.label))\n              .call(enter =>\n                enter\n                  .transition()\n                  .duration(1000)\n                  .ease(d3_easeQuadInOut)\n                  .attr('d', data => this.d3area(data.values))\n              ),\n          update =>\n            update.call(update => {\n              return update\n                .transition()\n                .duration(1000)\n                .ease(d3_easeQuadInOut)\n                .attr('d', d => this.d3area(d.values));\n            }),\n          exit => exit.remove()\n        );\n    }\n\n    // circles\n    if (this.linePoints) {\n      // add points\n      this.svg\n        .selectAll('g.points')\n        .data(this.data.series)\n        .join(\n          enter =>\n            enter\n              .append('g')\n              .attr('class', 'points')\n              .attr('clip-path', `url(${this._location.path()}#clip-path-points-${this.clipPathId})`)\n              .style('color', (d, i) => this.colorRange(d.label))\n\n              .selectAll('circle')\n              .data(d => d.values)\n              .join(\n                enter =>\n                  enter\n                    .append('circle')\n                    .attr('cx', (d, i) => this.xAxisScale(d3_isoParse(this.data.dates[i])))\n                    .attr('cy', d => this.yAxisScale(0))\n                    .attr('r', this.lineWidth * 2)\n                    .style('stroke-width', this.lineWidth)\n                    .call(enter =>\n                      enter\n                        .transition()\n                        .duration(1000)\n                        .ease(d3_easeQuadInOut)\n                        .attr('cy', d => this.yAxisScale(d))\n                    ),\n                () => {},\n                exit => exit.remove()\n              ),\n          update =>\n            update\n              .selectAll('circle')\n              .data(d => d.values)\n              .join(\n                enter =>\n                  enter\n                    .append('circle')\n                    .attr('cx', (d, i) => this.xAxisScale(d3_isoParse(this.data.dates[i])))\n                    .attr('cy', d => this.yAxisScale(d))\n                    .attr('r', this.lineWidth * 2)\n                    .style('stroke-width', this.lineWidth),\n                update =>\n                  update.call(update =>\n                    update\n                      .transition()\n                      .duration(1000)\n                      .ease(d3_easeQuadInOut)\n                      .attr('cx', (d, i) => this.xAxisScale(d3_isoParse(this.data.dates[i])))\n                      .attr('cy', d => this.yAxisScale(d))\n                  ),\n                exit => exit.remove()\n              ),\n          exit => exit.remove()\n        );\n    }\n\n    if (!this.hideLegend) {\n      this.chart\n        .select('.legend')\n        .selectAll('.legend-item')\n        .data(this.data.series)\n        .join(\n          enter => {\n            const li = enter.append('li').attr('class', 'legend-item');\n\n            li.append('span')\n              .attr('class', 'legend-key')\n              .style('background-color', d => this.colorRange(d.label));\n\n            li.append('span')\n              .attr('class', 'legend-label')\n              .html(d => {\n                switch (this.legendLabelFormatType) {\n                  case 'number':\n                    return this.legendLabelFormat(d.label);\n\n                  case 'time':\n                    const parsedTime = d3_isoParse(d.label);\n                    return this.legendLabelFormat(parsedTime);\n\n                  default:\n                    return d.label;\n                }\n              });\n\n            return li;\n          },\n          update => {\n            update.select('.legend-label').html(d => {\n              switch (this.legendLabelFormatType) {\n                case 'number':\n                  return this.legendLabelFormat(d.label);\n\n                case 'time':\n                  const parsedTime = d3_isoParse(d.label);\n                  return this.legendLabelFormat(parsedTime);\n\n                default:\n                  return d.label;\n              }\n            });\n\n            return update;\n          },\n          exit => exit.remove()\n        )\n        .on('mouseover', (data, index, nodes) => this.legendMouseOver(d3_event, data, index, nodes))\n        .on('mouseout', () => this.legendMouseOut())\n        .on('click', (data, index, nodes) => this.legendMouseClick(d3_event, data, index, nodes));\n    }\n\n    if (!this.hideTooltip) {\n      this.tooltip\n        .select('.tooltip-table')\n        .selectAll('tr')\n        .data(this.data.series)\n        .join(\n          enter => {\n            const tooltipItem = enter.append('tr').attr('class', 'tooltip-item');\n\n            tooltipItem\n              .append('td')\n              .style('color', d => this.colorRange(d.label))\n              .append('span')\n              .attr('class', 'pbds-tooltip-key');\n\n            tooltipItem\n              .append('td')\n              .attr('class', 'tooltip-label pr-2 text-nowrap')\n              .html(d => {\n                return this.tooltipLabelFormatType ? this.tooltipLabelFormat(d.label) : d.label;\n              });\n\n            tooltipItem\n              .append('td')\n              .attr('class', 'tooltip-value text-right text-nowrap')\n              .html(d => '');\n\n            return tooltipItem;\n          },\n          () => {},\n          exit => exit.remove()\n        );\n    }\n\n    this.svg.selectAll('.points').raise();\n    this.mouserect.raise();\n  };\n\n  legendMouseOver = (event, data, index, nodes) => {\n    this.chart\n      .selectAll('.legend-item')\n      .filter((d, i) => i !== index)\n      .classed('inactive', true);\n\n    this.svg\n      .selectAll('.line')\n      .filter((d, i) => i !== index)\n      .classed('inactive', true);\n\n    this.svg\n      .selectAll('.line')\n      .filter((d, i) => i === index)\n      .classed('active', true);\n\n    if (this.area) {\n      this.svg\n        .selectAll('.area')\n        .filter((d, i) => i !== index)\n        .classed('inactive', true);\n    }\n\n    if (this.linePoints) {\n      this.svg\n        .selectAll('.points')\n        .filter((d, i) => i !== index)\n        .selectAll('circle')\n        .classed('inactive', true);\n    }\n\n    this.hovered.emit({ event, data });\n  };\n\n  legendMouseOut = () => {\n    this.chart.selectAll('.legend-item').classed('inactive', false);\n\n    this.chart\n      .selectAll('.line')\n      .classed('inactive', false)\n      .classed('active', false);\n\n    if (this.linePoints) {\n      this.svg\n        .selectAll('circle')\n        .classed('active', false)\n        .classed('inactive', false);\n    }\n\n    if (this.area) {\n      this.svg.selectAll('.area').classed('inactive', false);\n    }\n  };\n\n  legendMouseClick = (event, data, index, nodes) => {\n    this.clicked.emit({ event, data });\n  };\n\n  mouserectMouseMove = (event, index, nodes) => {\n    const mouseXDate = this.xAxisScale.invert(d3_mouse(nodes[0])[0]); // return date at mouse x position\n    const leftIndex = d3_bisectLeft(this.data.dates, d3_isoFormat(mouseXDate)); // index of left closest date\n\n    // prevent error for 0 index\n    if (leftIndex === 0) return false;\n\n    const dateLower = new Date(this.data.dates[leftIndex - 1]);\n    const dateUpper = new Date(this.data.dates[leftIndex]);\n    const closestDate = +mouseXDate - +dateLower > +dateUpper - mouseXDate ? dateUpper : dateLower; // date mouse is closest to\n    const closestIndex = this.data.dates.indexOf(d3_isoFormat(closestDate)); // which index the mouse is closest to\n    // console.log(+mouseXDate, leftIndex, +dateLower, +dateUpper, +closestDate, closestIndex);\n\n    const circles = this.svg.selectAll('.line-group').selectAll('circle');\n    circles.filter((d, i) => i === closestIndex).classed('active', true);\n    circles.filter((d, i) => i !== closestIndex).classed('active', false);\n\n    this.tooltipLine\n      .attr('x1', this.xAxisScale(closestDate))\n      .attr('x2', this.xAxisScale(closestDate))\n      .classed('active', true);\n\n    // console.log(this.tooltipLine.node().getBoundingClientRect(), this._scroll.getScrollPosition());\n    this.tooltipShow(this.tooltipLine.node(), closestIndex);\n\n    this.mousedata = {\n      date: closestDate,\n      series: this.data.series.map(d => {\n        return {\n          label: d.label,\n          value: d.values[closestIndex]\n        };\n      })\n    };\n\n    this.tooltipHovered.emit({ event, data: this.mousedata });\n  };\n\n  mouserectMouseOut = (event, index, nodes) => {\n    this.svg.selectAll('circle').classed('active', false);\n    this.tooltipLine.classed('active', false);\n    this.tooltipHide();\n  };\n\n  mouserectMouseClick = () => {\n    this.tooltipClicked.emit({ event, data: this.mousedata });\n  };\n\n  private tooltipShow = (node, closestIndex) => {\n    const scroll = this._scroll.getScrollPosition();\n    const mouserectDimensions = node.getBoundingClientRect();\n    const tooltipOffsetHeight = +this.tooltip.node().offsetHeight;\n    const tooltipDimensions = this.tooltip.node().getBoundingClientRect();\n    const dimensionCalculated = mouserectDimensions.left + tooltipDimensions.width + 8;\n    const clientWidth = document.body.clientWidth - 10;\n    let position;\n\n    // console.log(scroll, mouserectDimensions, tooltipOffsetHeight, tooltipDimensions, dimensionCalculated, clientWidth);\n\n    this.tooltip.select('.tooltip-header').html(d => {\n      const parsedTime = d3_isoParse(this.data.dates[closestIndex]);\n      return this.tooltipHeadingFormat(parsedTime);\n    });\n\n    this.tooltip.selectAll('.tooltip-value').html((d, i) => {\n      return this.tooltipValueFormatType\n        ? this.tooltipValueFormat(this.data.series[i].values[closestIndex])\n        : this.data.series[i].values[closestIndex];\n    });\n\n    // flip the tooltip positions if near the right edge of the screen\n    if (dimensionCalculated > clientWidth) {\n      this.tooltip.classed('east', true);\n      this.tooltip.classed('west', false);\n      position = `${mouserectDimensions.left - tooltipDimensions.width - 8}px`;\n    } else if (dimensionCalculated < clientWidth) {\n      this.tooltip.classed('east', false);\n      this.tooltip.classed('west', true);\n      position = `${mouserectDimensions.left + 8}px`;\n    }\n\n    // console.log('POSITION: ', position, mouserectDimensions);\n\n    // set the tooltip styles\n    this.tooltip.style(\n      'top',\n      `${mouserectDimensions.top + mouserectDimensions.height / 2 - tooltipOffsetHeight / 2 + scroll[1]}px`\n    );\n    this.tooltip.style('left', position);\n    this.tooltip.style('opacity', 1);\n  };\n\n  private tooltipHide = () => {\n    this.tooltip.style('opacity', 0);\n  };\n\n  private xAxisFormatter = item => {\n    const parseDate = d3_isoParse(item);\n    return this.xAxisFormat(parseDate);\n  };\n\n  private yAxisFormatter = item => {\n    return this.yAxisFormat(item);\n  };\n}\n","import { Component, OnInit, Input, ElementRef, HostBinding, OnChanges, SimpleChanges } from '@angular/core';\n\nimport { select as d3_select } from 'd3-selection';\nimport { interpolate as d3_interpolate } from 'd3-interpolate';\nimport { arc as d3_arc } from 'd3-shape';\nimport { format as d3_format } from 'd3-format';\n\nimport { PbdsDatavizService } from './dataviz.service';\nimport { PbdsDatavizGauge } from './dataviz.interfaces';\n\n@Component({\n  selector: 'pbds-dataviz-gauge',\n  template: `\n    <div\n      *ngIf=\"!hideLabel\"\n      class=\"gauge-details\"\n      [ngClass]=\"{ halfmoon: type === 'halfmoon', 'gauge-details-small': type === 'halfmoon' }\"\n      [ngStyle]=\"{ 'max-width.px': width - 3 * gaugeWidth }\"\n    >\n      <div class=\"gauge-number\">{{ label }}</div>\n      <div *ngIf=\"description\" class=\"gauge-description text-center\">{{ description }}</div>\n    </div>\n  `,\n  styles: []\n})\nexport class PbdsDatavizGaugeComponent implements OnInit, OnChanges {\n  @HostBinding('class.pbds-chart')\n  chartClass = true;\n\n  @HostBinding('class.pbds-chart-gauge')\n  gaugeClass = true;\n\n  @Input()\n  data: PbdsDatavizGauge;\n\n  @Input()\n  width = 300;\n\n  @Input()\n  type: 'halfmoon' | 'horseshoe' | 'circle' = 'halfmoon';\n\n  @Input()\n  color = '#E23DA8';\n\n  @Input()\n  hideLabel = false;\n\n  @Input()\n  labelFormatString = '';\n\n  @Input()\n  description;\n\n  @Input()\n  gaugeWidth = 20;\n\n  private chart;\n  private svg;\n  private gauge;\n  private labelTween;\n  public label;\n  private startAngle;\n  private endAngle;\n  private radius;\n  private arc;\n  private labelFormat;\n  private oldValue;\n  private height;\n  private rounded;\n\n  constructor(private _dataviz: PbdsDatavizService, private _element: ElementRef) {}\n\n  ngOnInit() {\n    this.height = this.width;\n    this.radius = Math.max(this.width, this.height) / 2;\n    this.labelFormat = d3_format(this.labelFormatString);\n    this.label = this.labelFormat(this.data.value);\n\n    switch (this.type) {\n      case 'halfmoon':\n        this.startAngle = -90;\n        this.endAngle = 90;\n        this.rounded = true;\n        break;\n\n      case 'horseshoe':\n        this.startAngle = -140;\n        this.endAngle = 140;\n        this.rounded = true;\n        break;\n\n      case 'circle':\n        this.startAngle = 0;\n        this.endAngle = 360;\n        this.rounded = false;\n        break;\n    }\n\n    this.arc = d3_arc().cornerRadius(this.rounded ? this.gaugeWidth : 0);\n\n    this.chart = d3_select(this._element.nativeElement).attr('aria-hidden', 'true');\n\n    this.svg = this.chart\n      .append('svg')\n      .attr('width', this.width)\n      .attr('height', this.height)\n      .attr('class', 'img-fluid')\n      .attr('preserveAspectRatio', 'xMinYMin meet')\n      .attr('viewBox', `-${this.width / 2} -${this.height / 2} ${this.width} ${this.height}`);\n\n    this.drawChart();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.data && !changes.data.firstChange) {\n      this.oldValue = changes.data.previousValue.value;\n      this.updateChart();\n    }\n  }\n\n  degreesToRadians = degree => {\n    return (degree * Math.PI) / 180;\n  };\n\n  calculateMinMax = () => {\n    const percentage = this.data.minvalue / (this.data.maxvalue - this.data.minvalue);\n\n    return percentage * (this.data.value - this.data.minvalue) + (this.data.value - this.data.minvalue);\n  };\n\n  calculateCurve = data => {\n    const start = this.degreesToRadians(this.startAngle);\n    const end = start + (data * (this.degreesToRadians(this.endAngle) - start)) / this.data.maxvalue;\n\n    return [\n      {\n        startAngle: start,\n        endAngle: end\n      }\n    ];\n  };\n\n  drawChart = () => {\n    this.gauge = this.svg.append('g').attr('class', 'gauge-group');\n\n    // background arc\n    this.gauge\n      .append('path')\n      .data(this.calculateCurve(this.data.maxvalue))\n      .attr('class', 'gauge-background')\n      .attr('d', d => {\n        return this.arc({\n          innerRadius: this.radius - this.gaugeWidth,\n          outerRadius: this.radius,\n          startAngle: d.startAngle,\n          endAngle: d.endAngle\n        });\n      });\n\n    // value arc\n    this.gauge\n      .append('path')\n      .data(this.calculateCurve(this.calculateMinMax()))\n      .attr('class', 'gauge-value')\n      .attr('fill', this.color)\n      .attr('d', d => {\n        return this.arc({\n          innerRadius: this.radius - this.gaugeWidth,\n          outerRadius: this.radius,\n          startAngle: d.startAngle,\n          endAngle: d.endAngle\n        });\n      });\n\n    switch (this.type) {\n      case 'horseshoe':\n        this.svg.attr('height', 230).attr('viewBox', `-${this.width / 2} -${this.height / 2} ${this.height} 230`);\n        break;\n      case 'halfmoon':\n        this.svg.attr('height', this.width / 2);\n        this.svg.attr('viewBox', `-${this.width / 2} -${this.width / 2} ${this.width} ${this.width / 2}`);\n        break;\n    }\n  };\n\n  updateChart = () => {\n    const group = this.svg.select('.gauge-group');\n\n    group\n      .select('.gauge-value')\n      .transition()\n      .duration(750)\n      .call(this.arcTween, this.calculateMinMax());\n\n    this.labelTween = this.chart.select('.gauge-number');\n\n    this.labelTween\n      .transition()\n      .duration(750)\n      .call(this.textTween, this.data.value);\n  };\n\n  arcTween = (transition, value) => {\n    const newAngle = this.calculateCurve(value);\n\n    transition.attrTween('d', d => {\n      const interpolate = d3_interpolate(d.endAngle, newAngle[0].endAngle);\n\n      return t => {\n        d.endAngle = interpolate(t);\n\n        return this.arc({\n          innerRadius: this.radius - this.gaugeWidth,\n          outerRadius: this.radius,\n          startAngle: d.startAngle,\n          endAngle: d.endAngle\n        });\n      };\n    });\n  };\n\n  textTween = (transition, value) => {\n    value = d3_format('.4f')(value);\n    value = value.replace(/,/g, '.');\n\n    transition.tween('text', () => {\n      const interpolate = d3_interpolate(d3_format('.4f')(+this.oldValue), value);\n\n      return t => {\n        this.labelTween.text(d => {\n          const updatedNumber = this.labelFormat(interpolate(t));\n          this.label = updatedNumber;\n          return updatedNumber;\n        });\n      };\n    });\n  };\n}\n","import {\n  Component,\n  OnInit,\n  Input,\n  ElementRef,\n  HostBinding,\n  ChangeDetectionStrategy,\n  OnChanges,\n  SimpleChanges\n} from '@angular/core';\n\nimport { select as d3_select } from 'd3-selection';\nimport { line as d3_line, area as d3_area } from 'd3-shape';\nimport { scaleLinear as d3_scaleLinear } from 'd3-scale';\nimport { min as d3_min, max as d3_max } from 'd3-array';\n\nimport { PbdsDatavizSparkline } from './dataviz.interfaces';\n\n@Component({\n  selector: 'pbds-dataviz-sparkline',\n  template: ``,\n  styles: [],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class PbdsDatavizSparklineComponent implements OnInit, OnChanges {\n  @HostBinding('class.pbds-chart')\n  chartClass = true;\n\n  @HostBinding('class.pbds-chart-sparkline')\n  sparklineClass = true;\n\n  @Input()\n  data: PbdsDatavizSparkline;\n\n  @Input()\n  width = 160;\n\n  @Input()\n  height = 40;\n\n  @Input()\n  type: 'line' | 'line-high' | 'area' | 'area-high' | 'bar' = 'line';\n\n  @Input()\n  color = '#E23DA8';\n\n  @Input()\n  colorNegative: string | null = null; // undocumented, may add if needed\n\n  @Input()\n  strokeWidth = 2; // undocumented, width is automatically set by the type\n\n  @Input()\n  yAxisMinBuffer = 0;\n\n  @Input()\n  yAxisMaxBuffer = 0;\n\n  private chart;\n  private svg;\n  private margin;\n\n  constructor(private _element: ElementRef) {}\n\n  ngOnInit() {\n    this.margin = { top: 1, right: 0, bottom: 1, left: 0 };\n\n    if (this.type === 'bar') {\n      this.margin = { top: 0, right: 0, bottom: 0, left: 0 };\n    }\n\n    if (this.type === 'line-high' || this.type === 'area-high') {\n      this.strokeWidth = 1;\n    }\n\n    if (this.colorNegative === null) {\n      this.colorNegative = this.color;\n    }\n\n    this.chart = d3_select(this._element.nativeElement).attr('aria-hidden', 'true');\n\n    this.svg = this.chart\n      .append('svg')\n      .attr('width', this.width)\n      .attr('height', this.height)\n      .attr('class', 'img-fluid')\n      .attr('preserveAspectRatio', 'xMinYMin meet')\n      .attr('viewBox', `-${this.margin.left} -${this.margin.top} ${this.width} ${this.height}`);\n\n    if (this.type === 'line' || this.type === 'line-high' || this.type === 'area' || this.type === 'area-high') {\n      this.svg\n        .append('path')\n        .attr('class', 'sparkline')\n        .attr('fill', 'none')\n        .attr('stroke-width', this.strokeWidth)\n        .attr('stroke', this.color);\n    }\n\n    if (this.type === 'area' || this.type === 'area-high') {\n      this.svg\n        .append('path')\n        .attr('class', 'sparkarea')\n        .attr('fill', this.color)\n        .attr('fill-opacity', 0.3);\n    }\n\n    this.updateChart();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.data && !changes.data.firstChange) {\n      this.updateChart();\n    }\n  }\n\n  updateChart() {\n    const data: any = this.data;\n\n    const x = d3_scaleLinear()\n      .domain([0, this.data.length])\n      .range([0, this.width - this.margin.left - this.margin.right]);\n\n    const y = d3_scaleLinear()\n      .domain([+d3_min(this.data) - this.yAxisMinBuffer, +d3_max(this.data) + this.yAxisMaxBuffer])\n      .range([this.height - this.margin.top - this.margin.bottom, 0]);\n\n    const line = d3_line()\n      .x((d, i) => x(i))\n      .y((d: any) => y(d));\n\n    const area = d3_area()\n      .x((d, i) => x(i))\n      .y0(this.height)\n      .y1((d: any) => y(d));\n\n    if (this.type === 'line' || this.type === 'line-high' || this.type === 'area' || this.type === 'area-high') {\n      this.svg\n        .selectAll('.sparkline')\n        .transition()\n        .duration(1000)\n        .attr('d', () => line(data));\n    }\n\n    if (this.type === 'area' || this.type === 'area-high') {\n      this.svg\n        .selectAll('.sparkarea')\n        .transition()\n        .duration(1000)\n        .attr('d', () => area(data));\n    }\n\n    if (this.type === 'bar') {\n      const barWidth = (this.width - this.data.length) / this.data.length;\n\n      // handles negative values, see example https://www.essycode.com/posts/create-sparkline-charts-d3/\n      this.svg\n        .selectAll('.sparkbar')\n        .data(this.data)\n        .join(\n          enter =>\n            enter\n              .append('rect')\n              .attr('class', 'sparkbar')\n              .attr('x', (d, i) => x(i))\n              .attr('y', this.height)\n              .attr('width', barWidth)\n              .attr('fill', d => (d > 0 ? this.color : this.colorNegative)) // still uses undocumented negative color values\n              .attr('height', 0)\n              .call(enter => {\n                enter\n                  .transition()\n                  .duration(1000)\n                  .attr('y', d => (d > 0 ? y(d) : y(0)))\n                  .attr('height', d => Math.abs(y(d) - y(0)));\n\n                return enter;\n              }),\n          update =>\n            update\n              .transition()\n              .duration(1000)\n              .attr('x', (d, i) => x(i))\n              .attr('y', d => (d > 0 ? y(d) : y(0)))\n              .attr('width', barWidth)\n              .attr('height', d => Math.abs(y(d) - y(0)))\n              .attr('fill', d => (d > 0 ? this.color : this.colorNegative)),\n          exit => exit.remove()\n        );\n    }\n  }\n}\n","import {\n  Component,\n  OnInit,\n  OnChanges,\n  Input,\n  Output,\n  EventEmitter,\n  ElementRef,\n  HostBinding,\n  OnDestroy,\n  SimpleChanges,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\nimport { ViewportScroller } from '@angular/common';\n\nimport { select as d3_select, event as d3_event } from 'd3-selection';\nimport { scaleOrdinal as d3_scaleOrdinal, scaleLinear as d3_scaleLinear, scaleBand as d3_scaleBand } from 'd3-scale';\nimport { max as d3_max } from 'd3-array';\nimport { axisBottom as d3_axisBottom, axisLeft as d3_axisLeft } from 'd3-axis';\nimport { isoParse as d3_isoParse } from 'd3-time-format';\nimport { stack as d3_stack, stackOrderNone as d3_stackOrderNone } from 'd3-shape';\n\nimport { PbdsDatavizService } from './dataviz.service';\nimport { PbdsDatavizBarStacked } from './dataviz.interfaces';\n\n@Component({\n  selector: 'pbds-dataviz-bar-stacked',\n  template: ``,\n  styles: [],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class PbdsDatavizBarStackedComponent implements OnInit, OnDestroy, OnChanges {\n  @HostBinding('class.pbds-chart')\n  chartClass = true;\n\n  @HostBinding('class.pbds-chart-stacked-bar')\n  stackedBarClass = true;\n\n  @Input()\n  data: Array<PbdsDatavizBarStacked>;\n\n  @Input()\n  width = 306;\n\n  @Input()\n  height = 400;\n\n  @Input()\n  type: 'low' | 'medium' | 'high' | 'debug' = 'medium'; // debug to show all chart options\n\n  @Input()\n  marginTop = 10; // hardcoded on purpose, do not document until feedback\n\n  @Input()\n  marginRight = 0; // hardcoded on purpose, do not document until feedback\n\n  @Input()\n  marginBottom = 30; // hardcoded on purpose, do not document until feedback\n\n  @Input()\n  marginLeft = 55; // hardcoded on purpose, do not document until feedback\n\n  @Input()\n  hideXAxis = false;\n\n  @Input()\n  xAxisFormatType: 'number' | 'time' = null;\n\n  @Input()\n  xAxisFormatString = '';\n\n  @Input()\n  yAxisFormatType: 'number' | 'time' = null;\n\n  @Input()\n  yAxisFormatString = '';\n\n  @Input()\n  yAxisTicks = 5;\n\n  @Input()\n  yAxisMaxBuffer = 0.01;\n\n  @Input()\n  hideLegend = false;\n\n  @Input()\n  legendWidth = 105 + 28; // hardcoded legend width + left margin, do not document until feedback\n\n  @Input()\n  legendPosition: 'right' | 'bottom' = 'right';\n\n  @Input()\n  legendLabelFormatType: 'number' | 'time' = null;\n\n  @Input()\n  legendLabelFormatString = '';\n\n  @Input()\n  tooltipHeadingFormatType: 'time' = null;\n\n  @Input()\n  tooltipHeadingFormatString = '';\n\n  @Input()\n  tooltipHeadingValueFormatType: 'number' = null;\n\n  @Input()\n  tooltipHeadingValueFormatString = '';\n\n  @Input()\n  tooltipLabelFormatType: 'time' = null;\n\n  @Input()\n  tooltipLabelFormatString = '';\n\n  @Input()\n  tooltipValueFormatType: 'number' = null;\n\n  @Input()\n  tooltipValueFormatString = '';\n\n  @Input()\n  theme;\n\n  @Output()\n  hovered: EventEmitter<object> = new EventEmitter<object>();\n\n  @Output()\n  clicked: EventEmitter<object> = new EventEmitter<object>();\n\n  private dataStack;\n  private dataKeys;\n  private chart;\n  private svg;\n  private grayBars;\n  private mouseBars;\n  private bars;\n  private margin;\n  private colorRange;\n  private hideGrayBars: boolean;\n  private xAxisScale;\n  private xAxisCall;\n  private xAxis;\n  private xAxisFormat;\n  private xAxisTickSize: number;\n  private xAxisTickSizeOuter: number;\n  private hideXAxisDomain: boolean;\n  private hideXAxisZero: boolean;\n  private hideXAxisTicks: boolean;\n  private hideXGrid: boolean;\n  private hideYGrid: boolean;\n  private yAxisMax;\n  private yAxisScale;\n  private yAxisCall;\n  private yAxis;\n  private yAxisFormat;\n  private yAxisTickSize: number;\n  private yAxisTickSizeOuter: number;\n  private xGrid;\n  private xGridCall;\n  private yGrid;\n  private yGridCall;\n  private hideYAxis: boolean;\n  private hideYAxisZero: boolean;\n  private hideYAxisDomain: boolean;\n  private hideYAxisTicks: boolean;\n  private legendLabelFormat;\n  private tooltip;\n  private hideTooltip: boolean;\n  private tooltipHeadingFormat;\n  private tooltipHeadingValueFormat;\n  private tooltipValueFormat;\n  private tooltipLabelFormat;\n\n  constructor(private _dataviz: PbdsDatavizService, private _element: ElementRef, private _scroll: ViewportScroller) {}\n\n  ngOnInit() {\n    // extract keys for stack data\n    this.dataKeys = Object.keys(this.data[0]).filter(item => item !== 'key');\n\n    // create the D3 stack data\n    this.dataStack = d3_stack()\n      .keys(this.dataKeys)\n      .order(d3_stackOrderNone)(this.data);\n\n    //////////////////////////////////////////\n\n    this.margin = {\n      top: +this.marginTop,\n      right: +this.marginRight,\n      bottom: +this.marginBottom,\n      left: +this.marginLeft\n    };\n\n    // create formatters\n    this.xAxisFormat = this._dataviz.d3Format(this.xAxisFormatType, this.xAxisFormatString);\n    this.yAxisFormat = this._dataviz.d3Format(this.yAxisFormatType, this.yAxisFormatString);\n    this.legendLabelFormat = this._dataviz.d3Format(this.legendLabelFormatType, this.legendLabelFormatString);\n    this.tooltipHeadingFormat = this._dataviz.d3Format(this.tooltipHeadingFormatType, this.tooltipHeadingFormatString);\n    this.tooltipHeadingValueFormat = this._dataviz.d3Format(\n      this.tooltipHeadingValueFormatType,\n      this.tooltipHeadingValueFormatString\n    );\n    this.tooltipLabelFormat = this._dataviz.d3Format(this.tooltipLabelFormatType, this.tooltipLabelFormatString);\n    this.tooltipValueFormat = this._dataviz.d3Format(this.tooltipValueFormatType, this.tooltipValueFormatString);\n\n    // defaults for all chart types\n    this.hideGrayBars = false;\n    this.hideYAxis = false;\n    this.hideXAxisZero = false;\n    this.hideYAxisZero = false;\n    this.hideXGrid = false;\n    this.hideYGrid = false;\n    this.hideXAxisDomain = false;\n    this.hideYAxisDomain = false;\n    this.hideTooltip = false;\n    this.hideXAxisTicks = false;\n    this.hideYAxisTicks = false;\n    this.xAxisTickSize = 8;\n    this.xAxisTickSizeOuter = 0;\n    this.yAxisTickSize = 8;\n    this.yAxisTickSizeOuter = 0;\n    // this.hideTooltipLabel = false;\n\n    if (this.type !== 'debug') {\n      // set type defaults\n      switch (this.type) {\n        case 'low':\n          this.hideGrayBars = true;\n          this.hideXAxisTicks = true;\n          this.hideXGrid = true;\n          this.hideYAxisDomain = false;\n          this.hideYAxisTicks = true;\n          this.legendPosition = 'bottom';\n          break;\n\n        case 'medium':\n          this.hideXAxisDomain = true;\n          this.hideXGrid = true;\n          this.hideXAxisTicks = true;\n          this.hideYAxisDomain = true;\n          this.hideYAxisTicks = true;\n          this.hideYGrid = true;\n          break;\n\n        case 'high':\n          this.hideXAxis = true;\n          this.hideXAxisTicks = true;\n          this.hideXAxisDomain = true;\n          this.hideXGrid = true;\n          this.hideYAxisDomain = true;\n          this.hideYAxisTicks = true;\n          this.hideYGrid = true;\n          this.hideLegend = false;\n          this.legendPosition = 'bottom';\n          break;\n      }\n    }\n\n    // adjust margin if xAxis hidden\n    if (this.hideXAxis) this.margin.bottom = 10; // need small margin for yAxis with 0 tick label\n\n    if (!this.hideLegend && this.legendPosition === 'right') {\n      this.width = +this.width - +this.legendWidth;\n    }\n\n    // create the chart\n    this.chart = d3_select(this._element.nativeElement).attr('aria-hidden', 'true');\n\n    // create chart svg\n    this.svg = this.chart\n      .append('svg')\n      .attr('width', +this.width)\n      .attr('height', +this.height + this.margin.top + this.margin.bottom)\n      .attr('class', 'img-fluid')\n      .attr('preserveAspectRatio', 'xMinYMin meet')\n      .attr(\n        'viewBox',\n        `-${this.margin.left} -${this.margin.top} ${+this.width} ${+this.height + this.margin.top + this.margin.bottom}`\n      );\n\n    this.grayBars = this.svg.append('g').attr('class', 'gray-bars');\n    this.mouseBars = this.svg.append('g').attr('class', 'mouseover-bars');\n    this.bars = this.svg.append('g').attr('class', 'bars');\n\n    // build color ranges\n    this.colorRange = d3_scaleOrdinal().range(this._dataviz.getColors(false, this.theme));\n\n    // X AXIS\n    this.xAxisScale = d3_scaleBand()\n      .domain(this.data.map(d => d.key))\n      .rangeRound([0, this.width - this.margin.left])\n      .align(0);\n\n    // add padding to the scale for gray bars\n    !this.hideGrayBars\n      ? this.xAxisScale.paddingInner(0.1).paddingOuter(0)\n      : this.xAxisScale.paddingInner(0).paddingOuter(0);\n\n    this.xAxisCall = d3_axisBottom(this.xAxisScale)\n      .tickSize(this.xAxisTickSize)\n      .tickSizeOuter(this.xAxisTickSizeOuter)\n      .tickFormat(this.xAxisFormatter);\n\n    this.xAxis = this.svg\n      .append('g')\n      .attr('class', 'axis axis-x')\n      .attr('transform', `translate(0, ${this.height})`)\n      .classed('axis-hidden', this.hideXAxis)\n      .classed('axis-zero-hidden', this.hideXAxisZero)\n      .classed('axis-domain-hidden', this.hideXAxisDomain)\n      .classed('axis-ticks-hidden', this.hideXAxisTicks)\n      .call(this.xAxisCall);\n\n    // X GRIDLINES\n    if (!this.hideXGrid) {\n      this.xGridCall = d3_axisBottom(this.xAxisScale).tickSize(-this.height);\n\n      this.xGrid = this.svg\n        .append('g')\n        .attr('class', 'grid grid-x')\n        .classed('grid-zero-hidden', this.hideXAxisZero)\n        .attr('transform', `translate(0, ${this.height})`)\n        .call(this.xGridCall);\n    }\n\n    // KEEP: use this block to debug yAxisMax\n    // console.log(\n    //   d3_max(this.dataStack, (data: any) => {\n    //     // console.log(data);\n\n    //     return d3_max(data, (d: any) => {\n    //       // console.log('D: ', d);\n    //       return d[1];\n    //     });\n    //   })\n    // );\n\n    // Y AXIS\n    this.yAxisMax = d3_max(this.dataStack, (data: any) => {\n      return d3_max(data, (d: any) => {\n        return d[1];\n      });\n    });\n\n    this.yAxisMax = this.yAxisMax + this.yAxisMax * this.yAxisMaxBuffer;\n\n    this.yAxisScale = d3_scaleLinear()\n      .domain([0, this.yAxisMax])\n      .nice()\n      .rangeRound([this.height, 0]);\n\n    this.yAxisCall = d3_axisLeft(this.yAxisScale)\n      .ticks(this.yAxisTicks)\n      .tickSize(this.yAxisTickSize)\n      .tickSizeOuter(this.yAxisTickSizeOuter)\n      .tickFormat(this.yAxisFormatter);\n\n    this.yAxis = this.svg\n      .append('g')\n      .attr('class', 'axis axis-y')\n      .classed('axis-hidden', this.hideYAxis)\n      .classed('axis-zero-hidden', this.hideYAxisZero)\n      .classed('axis-domain-hidden', this.hideYAxisDomain)\n      .classed('axis-ticks-hidden', this.hideYAxisTicks)\n      .call(this.yAxisCall);\n\n    // Y GRIDLINES\n    if (!this.hideYGrid) {\n      this.yGridCall = d3_axisLeft(this.yAxisScale)\n        .ticks(this.yAxisTicks)\n        .tickSize(-this.width + this.margin.left + this.margin.right);\n\n      this.yGrid = this.svg\n        .append('g')\n        .attr('class', 'grid grid-y')\n        .classed('grid-zero-hidden', this.hideYAxisZero)\n        .attr('transform', `translate(0, 0)`)\n        .call(this.yGridCall);\n    }\n\n    // TOOLTIP\n    if (!this.hideTooltip) {\n      this.tooltip = d3_select('body')\n        .append('div')\n        .attr('class', 'pbds-tooltip west')\n        .style('opacity', 0)\n        .attr('aria-hidden', 'true'); // hide tooltip for accessibility\n\n      // tooltip header\n      this.tooltip.append('div').attr('class', 'tooltip-header');\n      this.tooltip.append('div').attr('class', 'tooltip-header-value');\n\n      // tooltip table\n      this.tooltip\n        .append('table')\n        .attr('class', 'tooltip-table text-left w-100')\n        .append('tbody');\n    }\n\n    // add legend classes\n    if (!this.hideLegend) {\n      this.chart.classed('pbds-chart-legend-bottom', this.legendPosition === 'bottom' ? true : false);\n      this.chart.append('ul').attr('class', `legend legend-${this.legendPosition}`);\n    }\n\n    this.updateChart();\n  }\n\n  ngOnDestroy() {\n    if (this.tooltip) this.tooltip.remove();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.data && !changes.data.firstChange) {\n      this.updateChart(false);\n    }\n  }\n\n  updateChart = (firstRun = true) => {\n    this.dataKeys = Object.keys(this.data[0]).filter(item => item !== 'key');\n\n    // create the D3 stack data\n    this.dataStack = d3_stack()\n      .keys(this.dataKeys)\n      .order(d3_stackOrderNone)(this.data);\n\n    // update the xScale\n    this.xAxisScale.domain(this.data.map(d => d.key));\n\n    // update the yScale\n    this.yAxisMax = d3_max(this.dataStack, (data: any) => {\n      return d3_max(data, (d: any) => {\n        return d[1];\n      });\n    });\n\n    this.yAxisMax = this.yAxisMax + this.yAxisMax * this.yAxisMaxBuffer;\n\n    this.yAxisScale\n      .domain([0, this.yAxisMax])\n      .rangeRound([this.height, 0])\n      .nice();\n\n    this.xAxis\n      .transition()\n      .duration(0) // 1000\n      .call(this.xAxisCall);\n\n    this.yAxis\n      .transition()\n      .duration(0) // 1000\n      .call(this.yAxisCall);\n\n    // update the grids\n    if (!this.hideXGrid) {\n      this.xGrid\n        .transition()\n        .duration(0) // 1000\n        .call(this.xGridCall);\n    }\n\n    if (!this.hideYGrid) {\n      this.yGrid\n        .transition()\n        .duration(0) // 1000\n        .call(this.yGridCall);\n    }\n\n    // add gray bars\n    if (!this.hideGrayBars) {\n      this.grayBars\n        .selectAll('.gray-bar')\n        .data(this.data)\n        .join(\n          enter =>\n            enter\n              .append('rect')\n              .attr('class', 'gray-bar')\n              .attr('x', d => this.xAxisScale(d.key))\n              .attr('width', this.xAxisScale.bandwidth())\n              .attr('height', this.height),\n          update =>\n            update\n              .transition()\n              .duration((d, i, n) => (firstRun ? 0 : 1000))\n              .attr('x', d => this.xAxisScale(d.key))\n              .attr('width', this.xAxisScale.bandwidth())\n              .attr('height', this.height),\n          exit => exit.remove()\n        );\n    }\n\n    // add colored bars\n    const barGroups = this.bars\n      .selectAll('.bar-group')\n      .data(this.dataStack)\n      .join(\n        enter =>\n          enter\n            .append('g')\n            .attr('class', 'bar-group')\n            .attr('fill', d => this.colorRange(d.index)),\n        update => update.attr('fill', d => this.colorRange(d.index)),\n        exit => exit.remove()\n      );\n\n    barGroups\n      .selectAll('.bar')\n      .data(d => d)\n      .join(\n        enter =>\n          enter\n            .append('rect')\n            .attr('class', 'bar')\n            .classed('bar-divided', this.type !== 'high')\n            .classed('bar-divided-low', this.type === 'low')\n            .attr('x', (d, i) => {\n              let x;\n\n              if (this.type === 'medium') {\n                x = this.xAxisScale(d.data.key) + (this.xAxisScale.bandwidth() / 8) * 3;\n              } else {\n                x = this.xAxisScale(d.data.key) + (this.xAxisScale.bandwidth() / 4) * 1;\n              }\n\n              return x;\n            })\n            .attr('y', d => this.yAxisScale(d[0]))\n            .attr('width', d => {\n              let width;\n\n              if (this.type === 'medium') {\n                width = this.xAxisScale.bandwidth() / 4;\n              } else {\n                width = this.xAxisScale.bandwidth() / 2;\n              }\n\n              return width;\n            })\n            .attr('height', 0)\n            .call(enter => {\n              enter\n                .transition()\n                .duration((d, i, n) => (firstRun ? 0 : 500))\n                .delay((d, i, n) => (firstRun ? 0 : 750))\n                .attr('y', d => this.yAxisScale(d[1]))\n                .attr('height', d => {\n                  return this.yAxisScale(d[0]) - this.yAxisScale(d[1]);\n                });\n\n              return enter;\n            }),\n        update =>\n          update.call(update => {\n            // let width;\n\n            // if (this.type === 'medium') {\n            //   width = this.xAxisScale.bandwidth() / 4;\n            // } else {\n            //   width = this.xAxisScale.bandwidth() / 2;\n            // }\n\n            update\n              .transition()\n              .duration(1000)\n              .attr('width', this.xAxisScale.bandwidth() / 4)\n              .attr('x', (d, i) => this.xAxisScale(d.data.key) + (this.xAxisScale.bandwidth() / 8) * 3)\n              .attr('y', d => this.yAxisScale(d[1]))\n              .attr('height', d => this.yAxisScale(d[0]) - this.yAxisScale(d[1]));\n\n            return update;\n          }),\n\n        exit => exit.remove()\n      );\n\n    // mouseover bars\n    this.mouseBars\n      .selectAll('.mouseover-bar')\n      .data(this.data)\n      .join(\n        enter =>\n          enter\n            .append('rect')\n            .attr('class', 'mouseover-bar')\n            .style('opacity', 0)\n            .attr('x', d => this.xAxisScale(d.key))\n            .attr('width', this.xAxisScale.bandwidth())\n            .attr('height', this.height),\n        update =>\n          update\n            .attr('pointer-events', 'none')\n            .attr('x', d => this.xAxisScale(d.key))\n            .attr('width', this.xAxisScale.bandwidth())\n            .attr('height', this.height)\n            .transition()\n            .attr('pointer-events', 'auto'),\n        exit =>\n          exit\n            .transition()\n            .attr('pointer-events', 'none')\n            .remove()\n      )\n      .on('mouseover', (data, index, nodes) => this.barMouseOver(d3_event, data, index, nodes))\n      .on('mouseout', (data, index, nodes) => this.barMouseOut())\n      .on('click', (data, index, nodes) => this.barMouseClick(d3_event, data, index, nodes));\n\n    this.bars.raise();\n    this.xAxis.raise();\n    this.mouseBars.raise();\n\n    if (!this.hideLegend) {\n      this.chart\n        .select('.legend')\n        .selectAll('.legend-item')\n        .data(this.dataStack)\n        .join(\n          enter => {\n            const li = enter.append('li').attr('class', 'legend-item');\n\n            li.append('span')\n              .attr('class', 'legend-key')\n              .style('background-color', d => this.colorRange(d.index));\n\n            li.append('span')\n              .attr('class', 'legend-label')\n              .html(d => {\n                switch (this.legendLabelFormatType) {\n                  case 'number':\n                    return this.legendLabelFormat(d.key);\n\n                  case 'time':\n                    const parsedTime = d3_isoParse(d.key);\n                    return this.legendLabelFormat(parsedTime);\n\n                  default:\n                    return d.key;\n                }\n              });\n\n            return li;\n          },\n          update => {\n            update.select('.legend-label').html(d => {\n              switch (this.legendLabelFormatType) {\n                case 'number':\n                  return this.legendLabelFormat(d.key);\n\n                case 'time':\n                  const parsedTime = d3_isoParse(d.key);\n                  return this.legendLabelFormat(parsedTime);\n\n                default:\n                  return d.key;\n              }\n            });\n\n            return update;\n          },\n          exit => exit.remove()\n        )\n        .on('mouseover', (data, index, nodes) => this.legendMouseOver(d3_event, data, index, nodes))\n        .on('mouseout', () => this.legendMouseOut())\n        .on('click', (data, index, nodes) => this.legendMouseClick(d3_event, data, index, nodes));\n    }\n  };\n\n  barMouseOver = (event, data, index, nodes) => {\n    this.chart\n      .selectAll('.bar-group')\n      .selectAll('.bar')\n      .filter((d, i) => i !== index)\n      .classed('inactive', true);\n\n    this.tooltipShow(data, index, nodes[index]);\n\n    this.hovered.emit({ event, data });\n  };\n\n  barMouseOut = () => {\n    this.chart.selectAll('.bar').classed('inactive', false);\n\n    this.tooltipHide();\n  };\n\n  barMouseClick = (event, data, index, nodes) => {\n    this.clicked.emit({ event, data });\n  };\n\n  legendMouseOver = (event, data, index, nodes) => {\n    this.chart\n      .selectAll('.legend-item')\n      .filter((d, i) => i !== index)\n      .classed('inactive', true);\n\n    this.chart\n      .selectAll('.bar-group')\n      .filter((d, i) => i !== index)\n      .classed('inactive', true);\n\n    this.hovered.emit({ event, data });\n  };\n\n  legendMouseOut = () => {\n    this.chart.selectAll('.legend-item').classed('inactive', false);\n\n    this.chart.selectAll('.bar-group').classed('inactive', false);\n\n    this.tooltipHide();\n  };\n\n  legendMouseClick = (event, data, index, nodes) => {\n    this.clicked.emit({ event, data });\n  };\n\n  private xAxisFormatter = item => {\n    switch (this.xAxisFormatType) {\n      case 'number':\n        return this.xAxisFormat(item);\n\n      case 'time':\n        const parseDate = d3_isoParse(item);\n        return this.xAxisFormat(parseDate);\n\n      default:\n        return item;\n    }\n  };\n\n  private tooltipShow = (data, index, node) => {\n    // console.log('TOOLTIP: ', data, index, node);\n\n    const scroll = this._scroll.getScrollPosition();\n    const mouserectDimensions = node.getBoundingClientRect();\n    const clientWidth = document.body.clientWidth - 10;\n    let dimensionCalculated;\n    let tooltipDimensions;\n    let tooltipOffsetHeight;\n    let yPosition;\n    let xPosition;\n\n    // console.log(scroll, mouserectDimensions, tooltipOffsetHeight, tooltipDimensions, dimensionCalculated, clientWidth);\n\n    this.tooltip.select('.tooltip-header').html(d => {\n      switch (this.tooltipHeadingFormatType) {\n        case 'time':\n          const parseDate = d3_isoParse(data.key);\n          return this.tooltipHeadingFormat(parseDate);\n\n        default:\n          return data.key;\n      }\n    });\n\n    this.tooltip.select('.tooltip-header-value').html(d => {\n      let total = 0;\n\n      Object.keys(data).map(e => {\n        if (e !== 'key') {\n          total = total + data[e];\n        }\n      });\n\n      return this.tooltipHeadingValueFormat(total);\n    });\n\n    this.tooltip\n      .select('.tooltip-table')\n      .select('tbody')\n      .html(d => {\n        let html = ``;\n        let label;\n        let value;\n\n        Object.keys(data).map((key, index) => {\n          switch (this.tooltipLabelFormatType) {\n            case 'time':\n              const parseDate = d3_isoParse(key);\n              label = this.tooltipHeadingFormat(parseDate);\n              break;\n\n            default:\n              label = key;\n          }\n\n          switch (this.tooltipValueFormatType) {\n            case 'number':\n              value = this.tooltipValueFormat(data[key]);\n              break;\n\n            default:\n              value = data[key];\n          }\n\n          if (key !== 'key') {\n            html += `\n              <tr class='tooltip-item'>\n                <td style=\"color: ${this.colorRange(index - 1)}\">\n                  <span class=\"pbds-tooltip-key\"></span>\n                </td>\n                <td class=\"tooltip-label pr-2 text-nowrap\">${label}</td>\n                <td class=\"tooltip-value text-right text-nowrap\">${value}</td>\n              </tr>\n            `;\n          }\n        });\n\n        return html;\n      });\n\n    tooltipDimensions = this.tooltip.node().getBoundingClientRect();\n    dimensionCalculated = mouserectDimensions.left + mouserectDimensions.width + tooltipDimensions.width + 8;\n    tooltipOffsetHeight = +this.tooltip.node().offsetHeight;\n\n    // flip the tooltip positions if near the right edge of the screen\n    if (dimensionCalculated > clientWidth) {\n      this.tooltip.classed('east', true);\n      this.tooltip.classed('west', false);\n\n      if (this.type === 'medium') {\n        xPosition = `${mouserectDimensions.left + (mouserectDimensions.width / 8) * 3 - tooltipDimensions.width - 8}px`;\n      } else {\n        xPosition = `${mouserectDimensions.left + (mouserectDimensions.width / 4) * 1 - tooltipDimensions.width - 8}px`;\n      }\n    } else if (dimensionCalculated < clientWidth) {\n      this.tooltip.classed('east', false);\n      this.tooltip.classed('west', true);\n\n      if (this.type === 'medium') {\n        xPosition = `${mouserectDimensions.left + (mouserectDimensions.width / 8) * 5 + 8}px`;\n      } else {\n        xPosition = `${mouserectDimensions.left + (mouserectDimensions.width / 4) * 3 + 8}px`;\n      }\n    }\n\n    yPosition = this.svg\n      .selectAll('.bar-group')\n      .filter(':last-child')\n      .selectAll('.bar')\n      .filter((d, i) => i === index)\n      .node()\n      .getBoundingClientRect();\n\n    // set the tooltip styles\n    this.tooltip.style('top', `${yPosition.top - tooltipOffsetHeight / 2 + scroll[1]}px`);\n    this.tooltip.style('left', xPosition);\n    this.tooltip.style('opacity', 1);\n  };\n\n  private tooltipHide = () => {\n    this.tooltip.style('opacity', 0);\n  };\n\n  private yAxisFormatter = item => {\n    switch (this.yAxisFormatType) {\n      case 'number':\n        return this.yAxisFormat(item);\n\n      case 'time':\n        const parseDate = d3_isoParse(item);\n        return this.yAxisFormat(parseDate);\n\n      default:\n        return item;\n    }\n  };\n}\n","import { Component, Input, HostBinding } from '@angular/core';\n\n@Component({\n  selector: 'pbds-dataviz-metric-indicator',\n  template: `\n    <span>{{ value }}</span>\n  `,\n  styles: []\n})\nexport class PbdsDatavizMetricIndicatorComponent {\n  @Input()\n  value = 0;\n\n  @Input()\n  class = '';\n\n  @Input()\n  indicator: 'flat' | 'increase' | 'decrease' = 'flat';\n\n  @Input()\n  inverse = false;\n\n  @HostBinding('class')\n  get hostClasses() {\n    return ['metric-block-indicator', this.indicator, this.inverse ? 'inverse' : '', this.class].join(' ');\n  }\n}\n","import { Component, OnInit, Input, HostBinding, ElementRef, ContentChild } from '@angular/core';\n\nimport { PbdsDatavizMetricIndicatorComponent } from './dataviz-metric-indicator.component';\n\n@Component({\n  selector: 'pbds-dataviz-metric-block',\n  template: `\n    <div class=\"metric-block-inner\">\n      <div *ngIf=\"heading\" class=\"metric-block-heading\">\n        {{ heading }}\n        <i\n          *ngIf=\"infoMessage\"\n          class=\"pbi-icon-mini pbi-info-circle-open ml-1 align-middle\"\n          ngbTooltip=\"{{ infoMessage }}\"\n          container=\"body\"\n        ></i>\n      </div>\n      <div class=\"metric-block-data-block\">\n        <div class=\"metric-block-contents\">\n          <div class=\"metric-block-value\" [ngClass]=\"{ 'mr-0': hideValueMargin }\">\n            {{ value\n            }}<span [ngClass]=\"{ 'metric-block-unit': isUnit, 'metric-block-percentage': isPercentUnit }\">{{\n              unit\n            }}</span>\n          </div>\n\n          <div>\n            <ng-content select=\"pbds-dataviz-metric-indicator\"></ng-content>\n          </div>\n          <div *ngIf=\"description\" class=\"metric-block-description\">{{ description }}</div>\n        </div>\n        <ng-content select=\"pbds-dataviz-sparkline\"></ng-content>\n      </div>\n    </div>\n  `,\n  styles: []\n})\nexport class PbdsDatavizMetricBlockComponent implements OnInit {\n  @Input()\n  class = '';\n\n  @Input()\n  heading: string = null;\n\n  @Input()\n  value = 0;\n\n  @Input()\n  unit: string = null;\n\n  @Input()\n  description: string = null;\n\n  @Input()\n  centered = false;\n\n  @Input()\n  centeredText = false;\n\n  @Input()\n  vertical = false;\n\n  @Input()\n  infoMessage: string | null = null;\n\n  hideValueMargin = false;\n  isPercentUnit = false;\n  isUnit = false;\n\n  @HostBinding('class')\n  get hostClasses() {\n    return [\n      'metric-block',\n      this.centered ? 'metric-block-centered' : '',\n      this.centeredText ? 'metric-block-centered-text' : '',\n      this.vertical ? 'metric-block-vertical' : '',\n      this.class\n    ].join(' ');\n  }\n\n  @ContentChild(PbdsDatavizMetricIndicatorComponent, { static: true }) indicatorRef: ElementRef;\n\n  ngOnInit() {\n    if (!this.indicatorRef) {\n      this.hideValueMargin = true;\n    }\n\n    if (this.unit !== '%' && this.unit !== null) {\n      this.isUnit = true;\n    } else if (this.unit === '%') {\n      this.isPercentUnit = true;\n    }\n  }\n}\n","import {\n  Component,\n  OnInit,\n  OnChanges,\n  Input,\n  Output,\n  EventEmitter,\n  ElementRef,\n  HostBinding,\n  OnDestroy,\n  SimpleChanges,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\nimport { ViewportScroller } from '@angular/common';\n\nimport { select as d3_select, event as d3_event } from 'd3-selection';\nimport { scaleLinear as d3_scaleLinear } from 'd3-scale';\nimport { min as d3_min, max as d3_max } from 'd3-array';\nimport {\n  geoPath as d3_geoPath,\n  geoAlbers as d3_geoAlbers,\n  geoAlbersUsa as d3_geoAlbersUsa,\n  geoMercator as d3_geoMercator\n} from 'd3-geo';\n\nimport * as topojson from 'topojson-client';\n\nimport { PbdsDatavizService } from './dataviz.service';\nimport { PbdsDatavizMapData } from './dataviz.interfaces';\n\n@Component({\n  selector: 'pbds-dataviz-bubble-map',\n  template: ``,\n  styles: [],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DatavizBubbleMapComponent implements OnInit, OnChanges, OnDestroy {\n  @HostBinding('class.pbds-chart')\n  chartClass = true;\n\n  @HostBinding('class.pbds-chart-bubble-map')\n  bubbleMapClass = true;\n\n  @Input()\n  data: Array<PbdsDatavizMapData>;\n\n  @Input()\n  topojson;\n\n  @Input()\n  feature = '';\n\n  @Input()\n  projectionType;\n\n  @Input()\n  scale = null;\n\n  @Input()\n  center = null;\n\n  @Input()\n  width = 306;\n\n  @Input()\n  height = 400;\n\n  @Input()\n  type: 'medium' | 'high' | 'debug' = 'medium'; // debug to show all chart options\n\n  @Input()\n  dot = false;\n\n  @Input()\n  marginTop = 0;\n\n  @Input()\n  marginRight = 0;\n\n  @Input()\n  marginBottom = 0;\n\n  @Input()\n  marginLeft = 0;\n\n  @Input()\n  color = '#ef8200';\n\n  @Input()\n  textColor = '#fff';\n\n  @Input()\n  textSizeRange = [14, 24];\n\n  @Input()\n  dotSize = 4;\n\n  @Input()\n  bubbleSizeRange = [500, 2000];\n\n  @Input()\n  bubbleLabelFormatType: 'number' = null;\n\n  @Input()\n  bubbleLabelFormatString = '';\n\n  @Input()\n  hideTooltip = false;\n\n  @Input()\n  hideTooltipValue = false;\n\n  @Input()\n  tooltipValueFormatType: 'number' = null;\n\n  @Input()\n  tooltipValueFormatString = '';\n\n  @Output()\n  hovered: EventEmitter<object> = new EventEmitter<object>();\n\n  @Output()\n  clicked: EventEmitter<object> = new EventEmitter<object>();\n\n  private projection;\n  private geoPath;\n  private topojsonFeature;\n  private chart;\n  private svg;\n  private margin;\n  private bubbleContainer;\n  private bubbleRadius;\n  private fontRange;\n  private bubbleLabelFormat;\n  private tooltip;\n  private tooltipValueFormat;\n\n  constructor(private _element: ElementRef, private _scroll: ViewportScroller, private _dataviz: PbdsDatavizService) {}\n\n  ngOnInit() {\n    this.margin = {\n      top: +this.marginTop,\n      right: +this.marginRight,\n      bottom: +this.marginBottom,\n      left: +this.marginLeft\n    };\n\n    if (this.type !== 'debug') {\n      // set type defaults\n      switch (this.type) {\n        case 'medium':\n          break;\n\n        case 'high':\n          break;\n      }\n    }\n\n    switch (this.projectionType) {\n      case 'geoAlbers':\n        this.projection = d3_geoAlbers();\n        break;\n\n      case 'geoAlbersUsa':\n        this.projection = d3_geoAlbersUsa();\n        break;\n\n      case 'geoMercator':\n        this.projection = d3_geoMercator();\n        break;\n\n      default:\n        break;\n    }\n\n    // dreate formatters\n    this.bubbleLabelFormat = this._dataviz.d3Format(this.bubbleLabelFormatType, this.bubbleLabelFormatString);\n    this.tooltipValueFormat = this._dataviz.d3Format(this.tooltipValueFormatType, this.tooltipValueFormatString);\n\n    // console.log('TOPOJSON: ', this.topojson);\n\n    this.topojsonFeature = topojson.feature(this.topojson, this.topojson.objects[this.feature]);\n    this.projection.fitSize([+this.width, +this.height], this.topojsonFeature);\n\n    // console.log('TOPOJSON FEATURE: ', this.topojsonFeature);\n    // console.log('MESH: ', topojson.mesh(this.topojson, this.topojson.objects[this.feature], (a, b) => a !== b));\n    // console.log('DATA: ', this.data);\n\n    if (this.scale) {\n      this.projection.scale(+this.scale);\n    }\n\n    if (this.center) {\n      this.projection.center(this.center);\n    }\n\n    this.geoPath = d3_geoPath().projection(this.projection);\n\n    // bubble radius range\n    if (this.data && !this.dot) {\n      this.bubbleRadius = d3_scaleLinear()\n        .range(this.bubbleSizeRange)\n        .domain([d3_min(this.data, (d: any) => +d.value), d3_max(this.data, (d: any) => +d.value)]);\n\n      // font range\n      this.fontRange = d3_scaleLinear()\n        .range(this.textSizeRange)\n        .domain([d3_min(this.data, (d: any) => +d.value), d3_max(this.data, (d: any) => +d.value)]);\n    }\n\n    // TOOLTIP\n    if (!this.hideTooltip) {\n      this.tooltip = d3_select('body')\n        .append('div')\n        .attr('class', 'pbds-tooltip south')\n        .style('opacity', 0)\n        .attr('aria-hidden', 'true'); // hide tooltip for accessibility\n\n      // tooltip header\n      this.tooltip.append('div').attr('class', 'tooltip-header');\n      if (!this.hideTooltipValue) this.tooltip.append('div').attr('class', 'tooltip-value');\n    }\n\n    // create the chart\n    this.chart = d3_select(this._element.nativeElement).attr('aria-hidden', 'true');\n\n    // create chart svg\n    this.svg = this.chart\n      .append('svg')\n      .attr('width', +this.width + this.margin.left + this.margin.right)\n      .attr('height', +this.height + this.margin.top + this.margin.bottom)\n      .attr('class', 'img-fluid')\n      .attr('preserveAspectRatio', 'xMinYMin meet')\n      .attr(\n        'viewBox',\n        `-${this.margin.left} -${this.margin.top} ${+this.width + this.margin.left + this.margin.right} ${\n          +this.height + this.margin.top + this.margin.bottom\n        }`\n      )\n      .append('g')\n      .attr('class', 'container');\n\n    // map\n    this.svg\n      .append('g')\n      .attr('class', 'map')\n      .selectAll('path')\n      .data(this.topojsonFeature.features)\n      .join((enter) => enter.append('path').attr('class', 'feature').attr('d', this.geoPath));\n\n    // borders\n    this.svg\n      .append('path')\n      .attr('class', 'mesh')\n      .datum(topojson.mesh(this.topojson, this.topojson.objects[this.feature], (a, b) => a !== b))\n      .attr('d', this.geoPath);\n\n    this.bubbleContainer = this.svg.append('g').attr('class', 'dots').style('color', this.color);\n\n    this.updateChart();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.data && !changes.data.firstChange) {\n      this.updateChart();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.tooltip) this.tooltip.remove();\n  }\n\n  updateChart = () => {\n    // bubbles\n\n    this.bubbleContainer\n      .selectAll('circle')\n      .data(this.data)\n      .join(\n        (enter) =>\n          enter\n            .append('circle')\n            .attr('class', 'dot-circle')\n            .classed('solid', this.dot)\n            .attr('cx', (d) => this.projection([d.longitude, d.latitude])[0])\n            .attr('cy', (d) => this.projection([d.longitude, d.latitude])[1])\n            .attr('r', (d) => (!this.dot ? Math.sqrt(this.bubbleRadius(d.value)) : `${this.dotSize}px`)),\n        (update) =>\n          update\n            .transition()\n            .duration(1000)\n            .attr('cx', (d) => this.projection([d.longitude, d.latitude])[0])\n            .attr('cy', (d) => this.projection([d.longitude, d.latitude])[1])\n            .attr('r', (d) => (!this.dot ? Math.sqrt(this.bubbleRadius(d.value)) : `${this.dotSize}px`))\n            .transition()\n            .attr('pointer-events', 'auto'),\n        (exit) => exit.transition().attr('pointer-events', 'none').remove()\n      );\n\n    if (!this.hideTooltip) {\n      this.bubbleContainer\n        .selectAll('circle')\n        .on('mouseover', (data, index, nodes) => this.bubbleMouseOver(d3_event, data, index, nodes))\n        .on('mouseout', (data, index, nodes) => this.bubbleMouseOut(d3_event, data, index, nodes))\n        .on('click', (data, index, nodes) => this.bubbleMouseClick(d3_event, data, index, nodes));\n\n      // bubble text\n      if (this.type !== 'high' && !this.dot) {\n        this.bubbleContainer\n          .selectAll('text')\n          .data(this.data)\n          .join(\n            (enter) =>\n              enter\n                .append('text')\n                .text((d) => (this.bubbleLabelFormat ? this.bubbleLabelFormat(d.value) : d.value))\n                .attr('class', 'dot-text')\n                .style('fill', this.textColor)\n                .style('font-size', (d) => `${Math.round(this.fontRange(d.value))}px`)\n                .attr('x', (d) => this.projection([d.longitude, d.latitude])[0])\n                .attr('y', (d) => this.projection([d.longitude, d.latitude])[1])\n                .attr('dy', '.4em'),\n            (update) =>\n              update\n                .attr('pointer-events', 'none')\n                .transition()\n                .duration(1000)\n                .text((d) => (this.bubbleLabelFormat ? this.bubbleLabelFormat(d.value) : d.value))\n                .style('font-size', (d) => `${Math.round(this.fontRange(d.value))}px`)\n                .attr('x', (d) => this.projection([d.longitude, d.latitude])[0])\n                .attr('y', (d) => this.projection([d.longitude, d.latitude])[1])\n                .attr('dy', '.4em')\n                .transition()\n                .attr('pointer-events', 'auto'),\n            (exit) => exit.transition().attr('pointer-events', 'none').remove()\n          );\n      }\n    }\n  };\n\n  bubbleMouseOver = (event, data, index, nodes) => {\n    this.chart\n      .selectAll('.dot-circle')\n      .filter((d, i) => i !== index)\n      .classed('inactive', true);\n\n    this.chart\n      .selectAll('.dot-circle')\n      .filter((d, i) => i === index)\n      .classed('active', true);\n\n    this.tooltipShow(data, nodes[index]);\n\n    this.hovered.emit({ event, data });\n  };\n\n  bubbleMouseOut = (event, data, index, nodes) => {\n    this.chart.selectAll('.dot-circle').classed('active', false).classed('inactive', false);\n\n    this.tooltipHide();\n  };\n\n  bubbleMouseClick = (event, data, index, nodes) => {\n    this.clicked.emit({ event, data });\n  };\n\n  private tooltipShow = (data, node) => {\n    const dimensions = node.getBoundingClientRect();\n    const scroll = this._scroll.getScrollPosition();\n\n    this.tooltip.select('.tooltip-header').html((d) => `${data.label}`);\n\n    if (!this.hideTooltipValue) {\n      this.tooltip\n        .select('.tooltip-value')\n        .html((d) => (this.tooltipValueFormat ? `${this.tooltipValueFormat(data.value)}` : `${data.value}`));\n    }\n\n    const tooltipOffsetWidth = +this.tooltip.node().offsetWidth / 2;\n    const tooltipOffsetHeight = +this.tooltip.node().offsetHeight + 8;\n\n    this.tooltip.style('top', `${+scroll[1] + +dimensions.top - tooltipOffsetHeight}px`); //\n    this.tooltip.style('left', `${+scroll[0] + +dimensions.left - tooltipOffsetWidth + +dimensions.width / 2}px`);\n    this.tooltip.style('opacity', 1);\n  };\n\n  private tooltipHide = () => {\n    this.tooltip.style('opacity', 0);\n  };\n}\n","import {\n  Component,\n  OnInit,\n  OnChanges,\n  OnDestroy,\n  HostBinding,\n  Input,\n  Output,\n  ElementRef,\n  SimpleChanges,\n  EventEmitter,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\nimport { ViewportScroller } from '@angular/common';\n\nimport { PbdsDatavizHeatmap } from './dataviz.interfaces';\nimport { PbdsDatavizService } from './dataviz.service';\n\nimport { select as d3_select, event as d3_event } from 'd3-selection';\nimport {\n  scaleThreshold as d3_scaleThreshold,\n  scaleQuantile as d3_scaleQuantile,\n  scaleQuantize as d3_scaleQuantize,\n  scaleBand as d3_scaleBand\n} from 'd3-scale';\nimport { min as d3_min, max as d3_max } from 'd3-array';\nimport { axisBottom as d3_axisBottom, axisLeft as d3_axisLeft } from 'd3-axis';\nimport { isoParse as d3_isoParse } from 'd3-time-format';\n\n@Component({\n  selector: 'pbds-dataviz-heatmap',\n  template: ``,\n  styles: [],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class PbdsDatavizHeatmapComponent implements OnInit, OnChanges, OnDestroy {\n  @HostBinding('class.pbds-chart')\n  chartClass = true;\n\n  @HostBinding('class.pbds-chart-heatmap')\n  heatmapClass = true;\n\n  @Input()\n  data: Array<PbdsDatavizHeatmap>;\n\n  @Input()\n  width = 306;\n\n  @Input()\n  height = 400;\n\n  @Input()\n  marginTop = 0; // hardcoded on purpose, do not document until feedback\n\n  @Input()\n  marginRight = 0; // hardcoded on purpose, do not document until feedback\n\n  @Input()\n  marginBottom = 30; // hardcoded on purpose, do not document until feedback\n\n  @Input()\n  marginLeft = 55;\n\n  @Input()\n  scale: 'threshold' | 'quantile' | 'quantize' = 'quantile';\n\n  @Input()\n  domain: Array<number>;\n\n  @Input()\n  xAxisFormatType: 'number' | 'time' = null;\n\n  @Input()\n  xAxisFormatString = '';\n\n  @Input()\n  yAxisFormatType: 'number' | 'time' = null;\n\n  @Input()\n  yAxisFormatString = '';\n\n  @Input()\n  hideLegend = false;\n\n  @Input()\n  legendWidth = 105 + 28; // hardcoded legend width + left margin, do not document until feedback\n\n  @Input()\n  legendPosition: 'right' | 'bottom' = 'right';\n\n  @Input()\n  legendLabelFormatType: 'number' = null;\n\n  @Input()\n  legendLabelFormatString = '';\n\n  @Input()\n  tooltipXLabelFormatType: 'number' | 'time' = null;\n\n  @Input()\n  tooltipXLabelFormatString = '';\n\n  @Input()\n  tooltipYLabelFormatType: 'number' | 'time' = null;\n\n  @Input()\n  tooltipYLabelFormatString = '';\n\n  @Input()\n  tooltipValueFormatType: 'number' = null;\n\n  @Input()\n  tooltipValueFormatString = '';\n\n  @Input()\n  theme: 'classic' | 'ocean' | 'sunset' | 'twilight' = 'classic';\n\n  @Output()\n  hovered: EventEmitter<object> = new EventEmitter<object>();\n\n  @Output()\n  clicked: EventEmitter<object> = new EventEmitter<object>();\n\n  private chart;\n  private svg;\n  private margin;\n  private colorRange;\n  private colorDomain;\n  private xAxisScale;\n  private xAxisCall;\n  private xAxis;\n  private xAxisFormat;\n  private xAxisTickSize: number;\n  private xAxisTickSizeOuter: number;\n  private hideXAxisDomain: boolean;\n  private hideXAxisZero: boolean;\n  private hideXAxisTicks: boolean;\n  private hideXAxis: boolean;\n  private yAxis;\n  private yAxisFormat;\n  private yAxisTickSize;\n  private yAxisTickSizeOuter;\n  private yAxisScale;\n  private yAxisCall;\n  private hideYAxis: boolean;\n  private hideYAxisDomain: boolean;\n  private hideYAxisZero: boolean;\n  private hideYAxisTicks: boolean;\n  private legendLabelFormat;\n  private tooltip;\n  private tooltipYLabelFormat;\n  private tooltipXLabelFormat;\n  private hideTooltip;\n  private tooltipValueFormat;\n\n  constructor(private _dataviz: PbdsDatavizService, private _element: ElementRef, private _scroll: ViewportScroller) {}\n\n  ngOnInit() {\n    this.margin = {\n      top: +this.marginTop,\n      right: +this.marginRight,\n      bottom: +this.marginBottom,\n      left: +this.marginLeft\n    };\n\n    // create formatters\n    this.yAxisFormat = this._dataviz.d3Format(this.yAxisFormatType, this.yAxisFormatString);\n    this.xAxisFormat = this._dataviz.d3Format(this.xAxisFormatType, this.xAxisFormatString);\n    this.legendLabelFormat = this._dataviz.d3Format(this.legendLabelFormatType, this.legendLabelFormatString);\n    this.tooltipYLabelFormat = this._dataviz.d3Format(this.tooltipYLabelFormatType, this.tooltipYLabelFormatString);\n    this.tooltipXLabelFormat = this._dataviz.d3Format(this.tooltipXLabelFormatType, this.tooltipXLabelFormatString);\n    this.tooltipValueFormat = this._dataviz.d3Format(this.tooltipValueFormatType, this.tooltipValueFormatString);\n\n    // defaults for all chart types\n    this.hideXAxis = false;\n    this.hideXAxisZero = false;\n    this.hideXAxisDomain = true;\n    this.hideYAxisDomain = true;\n    this.hideTooltip = false;\n    this.hideXAxisTicks = true;\n    this.hideYAxisTicks = true;\n    this.xAxisTickSize = 8;\n    this.xAxisTickSizeOuter = 0;\n    this.yAxisTickSize = 8;\n    this.yAxisTickSizeOuter = 0;\n\n    // create the chart\n    this.chart = d3_select(this._element.nativeElement).attr('aria-hidden', 'true');\n\n    // create chart svg\n    this.svg = this.chart\n      .append('svg')\n      .attr('width', +this.width)\n      .attr('height', +this.height + this.margin.top + this.margin.bottom)\n      .attr('class', 'img-fluid')\n      .attr('preserveAspectRatio', 'xMinYMin meet')\n      .attr(\n        'viewBox',\n        `-${this.margin.left} -${this.margin.top} ${+this.width} ${+this.height + this.margin.top + this.margin.bottom}`\n      );\n\n    // color range\n    const colors = this._dataviz\n      .getColors(true, this.theme)\n      .slice()\n      .reverse();\n\n    const colorDomain: any = [\n      +d3_min(this.data, (d: PbdsDatavizHeatmap) => d.value),\n      +d3_max(this.data, (d: PbdsDatavizHeatmap) => d.value)\n    ];\n    const colorValues = this.data.map(d => d.value);\n\n    switch (this.scale) {\n      case 'threshold':\n        this.colorRange = d3_scaleThreshold()\n          .domain(this.domain)\n          .range(colors);\n\n        this.colorDomain = this.colorRange.domain();\n        break;\n\n      case 'quantile':\n        this.colorRange = d3_scaleQuantile()\n          .domain(colorValues)\n          .range(colors);\n\n        this.colorDomain = this.colorRange.quantiles();\n        break;\n\n      case 'quantize':\n        this.colorRange = d3_scaleQuantize()\n          .domain(colorDomain)\n          .range(colors);\n\n        this.colorDomain = this.colorRange.thresholds();\n        break;\n    }\n\n    // console.log(colors, colorDomain, colorValues, this.scale, this.colorRange, this.colorDomain);\n\n    // define axis labels\n    const xAxisLabels: any = [...new Set(this.data.map(d => d.xLabel))];\n    const yAxisLabels: any = [...new Set(this.data.map(d => d.yLabel))].reverse();\n\n    // X axis\n    this.xAxisScale = d3_scaleBand()\n      .domain(xAxisLabels)\n      .rangeRound([0, this.width - this.margin.left])\n      .paddingInner(0.1);\n\n    this.xAxisCall = d3_axisBottom(this.xAxisScale)\n      .tickSize(this.xAxisTickSize)\n      .tickSizeOuter(this.xAxisTickSizeOuter)\n      .tickFormat(this.xAxisFormatter);\n\n    this.xAxis = this.svg\n      .append('g')\n      .attr('class', 'axis axis-x')\n      .attr('transform', `translate(0, ${this.height})`)\n      .classed('axis-hidden', this.hideXAxis)\n      .classed('axis-zero-hidden', this.hideXAxisZero)\n      .classed('axis-domain-hidden', this.hideXAxisDomain)\n      .classed('axis-ticks-hidden', this.hideXAxisTicks)\n      .call(this.xAxisCall);\n\n    // Y axis\n    this.yAxisScale = d3_scaleBand()\n      .domain(yAxisLabels)\n      .rangeRound([this.height, 0])\n      .paddingInner(0.1);\n\n    this.yAxisCall = d3_axisLeft(this.yAxisScale)\n      .tickSize(this.yAxisTickSize)\n      .tickSizeOuter(this.yAxisTickSizeOuter)\n      .tickFormat(this.yAxisFormatter);\n\n    this.yAxis = this.svg\n      .append('g')\n      .attr('class', 'axis axis-y')\n      .classed('axis-hidden', this.hideYAxis)\n      .classed('axis-zero-hidden', this.hideYAxisZero)\n      .classed('axis-domain-hidden', this.hideYAxisDomain)\n      .classed('axis-ticks-hidden', this.hideYAxisTicks)\n      .call(this.yAxisCall);\n\n    // TOOLTIP\n    if (!this.hideTooltip) {\n      this.tooltip = d3_select('body')\n        .append('div')\n        .attr('class', 'pbds-tooltip south')\n        .style('opacity', 0)\n        .attr('aria-hidden', 'true'); // hide tooltip for accessibility\n    }\n\n    // add legend classes\n    if (!this.hideLegend) {\n      this.chart.classed('pbds-chart-legend-bottom', this.legendPosition === 'bottom' ? true : false);\n      this.chart.append('ul').attr('class', `legend legend-${this.legendPosition}`);\n    }\n\n    this.updateChart();\n  }\n\n  ngOnDestroy() {\n    if (this.tooltip) this.tooltip.remove();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.data && !changes.data.firstChange) {\n      this.updateChart();\n    }\n  }\n\n  updateChart = () => {\n    this.svg\n      .selectAll('rect')\n      .data(this.data)\n      .join(\n        enter =>\n          enter\n            .append('rect')\n            .attr('class', 'block')\n            .classed('empty', d => d.value === undefined || d.value === null)\n            .attr('x', d => this.xAxisScale(d.xLabel))\n            .attr('y', d => this.yAxisScale(d.yLabel))\n            .attr('width', this.xAxisScale.bandwidth())\n            .attr('height', this.yAxisScale.bandwidth())\n            .style('fill', d => this.colorRange(d.value)),\n        update =>\n          update.call(update => {\n            update\n              .classed('empty', d => d.value === undefined || d.value === null)\n              .attr('pointer-events', 'none')\n              .transition()\n              .duration(1000)\n              .attr('x', d => this.xAxisScale(d.xLabel))\n              .attr('y', d => this.yAxisScale(d.yLabel))\n              .attr('width', this.xAxisScale.bandwidth())\n              .attr('height', this.yAxisScale.bandwidth())\n              .style('fill', d => this.colorRange(d.value))\n              .transition()\n              .attr('pointer-events', 'auto');\n\n            return update;\n          }),\n        exit =>\n          exit\n            .transition()\n            .attr('pointer-events', 'none')\n            .remove()\n      )\n      .on('mouseover', (data, index, nodes) => this.blockMouseOver(d3_event, data, index, nodes))\n      .on('mouseout', (data, index, nodes) => this.blockMouseOut())\n      .on('click', (data, index, nodes) => this.blockMouseClick(d3_event, data, index, nodes));\n\n    if (!this.hideLegend) {\n      this.chart\n        .select('.legend')\n        .selectAll('.legend-item')\n        .data(this.colorDomain)\n        .join(\n          enter => {\n            const li = enter.append('li').attr('class', 'legend-item');\n\n            li.append('span')\n              .attr('class', 'legend-key')\n              .style('background-color', d => this.colorRange(d));\n\n            li.append('span')\n              .attr('class', 'legend-label')\n              .html(d => {\n                let label: string = d;\n\n                switch (this.legendLabelFormatType) {\n                  case 'number':\n                    label = this.legendLabelFormat(d);\n                    break;\n                }\n\n                return `&ge; ${label}`;\n              });\n\n            return li;\n          },\n          update =>\n            update.select('.legend-label').html(d => {\n              let label: string = d;\n\n              switch (this.legendLabelFormatType) {\n                case 'number':\n                  label = this.legendLabelFormat(d);\n                  break;\n              }\n\n              return `&ge; ${label}`;\n            }),\n          exit => exit.remove()\n        )\n        .on('mouseover', (data, index, nodes) => this.legendMouseOver(d3_event, data, index, nodes))\n        .on('mouseout', () => this.legendMouseOut())\n        .on('click', (data, index, nodes) => this.legendMouseClick(d3_event, data, index, nodes));\n    }\n  };\n\n  blockMouseOver = (event, data, index, nodes) => {\n    // console.log(data.value, event, data, index, nodes);\n\n    if (data.value !== null) {\n      this.tooltipShow(data, index, nodes[index]);\n    }\n\n    this.hovered.emit({ event, data });\n  };\n\n  blockMouseOut = () => {\n    this.tooltipHide();\n  };\n\n  blockMouseClick = (event, data, index, nodes) => {\n    this.clicked.emit({ event, data });\n  };\n\n  legendMouseOver = (event, data, index, nodes) => {\n    this.chart\n      .selectAll('.legend-item')\n      .filter((d, i) => i !== index)\n      .classed('inactive', true);\n\n    this.chart\n      .selectAll('.block')\n      .filter((d, i) => {\n        if (index + 1 === nodes.length) {\n          return d.value < data;\n        } else {\n          return d.value < data || d.value >= +d3_select(nodes[index + 1]).data()[0];\n        }\n      })\n      .classed('inactive', true);\n\n    this.hovered.emit({ event, data });\n  };\n\n  legendMouseOut = () => {\n    this.chart.selectAll('.legend-item').classed('inactive', false);\n\n    this.chart.selectAll('.block').classed('inactive', false);\n  };\n\n  legendMouseClick = (event, data, index, nodes) => {\n    this.clicked.emit({ event, data });\n  };\n\n  private tooltipShow = (data, index, node) => {\n    // console.log('TOOLTIP: ', data, index, node);\n\n    const dimensions = node.getBoundingClientRect();\n    const scroll = this._scroll.getScrollPosition();\n    let yLabel;\n    let xLabel;\n\n    switch (this.tooltipYLabelFormatType) {\n      case 'number':\n        yLabel = this.tooltipYLabelFormat(data.yLabel);\n        break;\n\n      case 'time':\n        const parsedTime = d3_isoParse(data.yLabel);\n        yLabel = this.tooltipYLabelFormat(parsedTime);\n        break;\n\n      default:\n        yLabel = `${data.yLabel}${this.tooltipYLabelFormatString}`;\n    }\n\n    switch (this.tooltipXLabelFormatType) {\n      case 'number':\n        xLabel = this.tooltipXLabelFormat(data.xLabel);\n        break;\n\n      case 'time':\n        const parsedTime = d3_isoParse(data.xLabel);\n        xLabel = this.tooltipXLabelFormat(parsedTime);\n        break;\n\n      default:\n        xLabel = `${data.xLabel}${this.tooltipXLabelFormatString}`;\n    }\n\n    const value =\n      this.tooltipValueFormat === null\n        ? `<div class=\"tooltip-value\">${data.value}</div>`\n        : `<div class=\"tooltip-value\">${this.tooltipValueFormat(data.value)}</div>`;\n\n    this.tooltip.html(\n      `\n        ${yLabel} : ${xLabel}<br>\n        ${value}\n      `\n    );\n\n    const tooltipOffsetWidth = +this.tooltip.node().offsetWidth / 2;\n    const tooltipOffsetHeight = +this.tooltip.node().offsetHeight + 8;\n\n    this.tooltip.style('top', `${+scroll[1] + +dimensions.top - tooltipOffsetHeight}px`); //\n    this.tooltip.style('left', `${+scroll[0] + +dimensions.left - tooltipOffsetWidth + +dimensions.width / 2}px`);\n    this.tooltip.style('opacity', 1);\n\n    this.tooltip.style('opacity', 1);\n  };\n\n  private tooltipHide = () => {\n    this.tooltip.style('opacity', 0);\n  };\n\n  private xAxisFormatter = item => {\n    switch (this.xAxisFormatType) {\n      case 'number':\n        return this.xAxisFormat(item);\n\n      case 'time':\n        const parseDate = d3_isoParse(item);\n        return this.xAxisFormat(parseDate);\n\n      default:\n        return item;\n    }\n  };\n\n  private yAxisFormatter = item => {\n    switch (this.yAxisFormatType) {\n      case 'number':\n        return this.yAxisFormat(item);\n\n      case 'time':\n        const parseDate = d3_isoParse(item);\n        return this.yAxisFormat(parseDate);\n\n      default:\n        return item;\n    }\n  };\n}\n","import {\n  Component,\n  OnInit,\n  OnChanges,\n  Input,\n  Output,\n  EventEmitter,\n  ElementRef,\n  HostBinding,\n  OnDestroy,\n  SimpleChanges,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\nimport { ViewportScroller } from '@angular/common';\n\nimport { select as d3_select, event as d3_event, mouse as d3_mouse } from 'd3-selection';\nimport {\n  scaleLinear as d3_scaleLinear,\n  scaleThreshold as d3_scaleThreshold,\n  scaleQuantile as d3_scaleQuantile,\n  scaleQuantize as d3_scaleQuantize\n} from 'd3-scale';\nimport { min as d3_min, max as d3_max, range as d3_range } from 'd3-array';\nimport {\n  geoPath as d3_geoPath,\n  geoAlbers as d3_geoAlbers,\n  geoAlbersUsa as d3_geoAlbersUsa,\n  geoMercator as d3_geoMercator\n} from 'd3-geo';\nimport { axisBottom as d3_axisBottom } from 'd3-axis';\n\nimport * as topojson from 'topojson-client';\nimport { PbdsDatavizService } from './dataviz.service';\n\nimport { PbdsDatavizChoroplethMapData } from './dataviz.interfaces';\n\n@Component({\n  selector: 'pbds-dataviz-choropleth-map',\n  template: ``,\n  styles: [],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class PbdsDatavizChoroplethMapComponent implements OnInit, OnDestroy, OnChanges {\n  @HostBinding('class.pbds-chart')\n  chartClass = true;\n\n  @HostBinding('class.pbds-chart-choropleth-map')\n  choroplethMapClass = true;\n\n  @Input()\n  data: Array<PbdsDatavizChoroplethMapData>;\n\n  @Input()\n  topojson;\n\n  @Input()\n  feature = '';\n\n  @Input()\n  projectionType;\n\n  @Input()\n  dataField = 'id';\n\n  @Input()\n  mesh: string | null = null;\n\n  @Input()\n  scale = null;\n\n  @Input()\n  center = null;\n\n  @Input()\n  width = 960;\n\n  @Input()\n  height = 500;\n\n  @Input()\n  marginTop = 0;\n\n  @Input()\n  marginRight = 0;\n\n  @Input()\n  marginBottom = 0;\n\n  @Input()\n  marginLeft = 0;\n\n  @Input()\n  theme: 'classic' | 'ocean' | 'sunset' | 'twilight' = 'classic';\n\n  @Input()\n  colorScale: 'threshold' | 'quantile' | 'quantize' = 'quantile';\n\n  @Input()\n  domain: Array<number>;\n\n  @Input()\n  hideTooltip = false;\n\n  @Input()\n  tooltipValueFormatType: 'number' = null;\n\n  @Input()\n  tooltipValueFormatString = '';\n\n  @Input()\n  hideLegend = false;\n\n  @Input()\n  legendWidth = 260;\n\n  @Input()\n  legendLabel: string | null = null;\n\n  @Input()\n  legendValueFormatType: 'number' = null;\n\n  @Input()\n  legendValueFormatString = '';\n\n  @Input()\n  legendLeft = 20;\n\n  @Input()\n  legendTop = 20;\n\n  @Output()\n  hovered: EventEmitter<object> = new EventEmitter<object>();\n\n  @Output()\n  clicked: EventEmitter<object> = new EventEmitter<object>();\n\n  private projection;\n  private geoPath;\n  private topojsonFeature;\n  private chart;\n  private svg;\n  private margin;\n  private colorRange;\n  private colorDomain;\n  private tooltip;\n  private tooltipValueFormat;\n  private legendValueFormat;\n\n  constructor(private _dataviz: PbdsDatavizService, private _element: ElementRef, private _scroll: ViewportScroller) {}\n\n  ngOnInit() {\n    this.margin = {\n      top: +this.marginTop,\n      right: +this.marginRight,\n      bottom: +this.marginBottom,\n      left: +this.marginLeft\n    };\n\n    // color range\n    const colors = this._dataviz.getColors(true, this.theme).slice().reverse();\n\n    const colorDomain: any = [+d3_min(this.data, (d) => d.value), +d3_max(this.data, (d) => d.value)];\n    const colorValues = this.data.map((d) => d.value);\n\n    switch (this.colorScale) {\n      case 'threshold':\n        this.colorRange = d3_scaleThreshold().domain(this.domain).range(colors);\n\n        this.colorDomain = this.colorRange.domain();\n        break;\n\n      case 'quantile':\n        this.colorRange = d3_scaleQuantile().domain(colorValues).range(colors);\n\n        this.colorDomain = this.colorRange.quantiles();\n        break;\n\n      case 'quantize':\n        this.colorRange = d3_scaleQuantize().domain(colorDomain).range(colors);\n\n        this.colorDomain = this.colorRange.thresholds();\n        break;\n    }\n\n    // create formatters\n    this.tooltipValueFormat = this._dataviz.d3Format(this.tooltipValueFormatType, this.tooltipValueFormatString);\n    this.legendValueFormat = this._dataviz.d3Format(this.legendValueFormatType, this.legendValueFormatString);\n\n    switch (this.projectionType) {\n      case 'geoAlbers':\n        this.projection = d3_geoAlbers();\n        break;\n\n      case 'geoAlbersUsa':\n        this.projection = d3_geoAlbersUsa();\n        break;\n\n      case 'geoMercator':\n        this.projection = d3_geoMercator();\n        break;\n    }\n\n    this.topojsonFeature = topojson.feature(this.topojson, this.topojson.objects[this.feature]);\n    this.projection.fitSize([+this.width, +this.height], this.topojsonFeature);\n\n    if (this.scale) {\n      this.projection.scale(+this.scale);\n    }\n\n    if (this.center) {\n      this.projection.center(this.center);\n    }\n\n    this.geoPath = d3_geoPath().projection(this.projection);\n\n    // console.log('TOPOJSON: ', this.topojson);\n    // console.log('TOPOJSON FEATURE: ', this.topojsonFeature);\n    // console.log('MESH: ', topojson.mesh(this.topojson, this.topojson.objects[this.feature], (a, b) => a !== b));\n    // console.log('DATA: ', this.data);\n\n    // create the chart\n    this.chart = d3_select(this._element.nativeElement).attr('aria-hidden', 'true');\n\n    // TOOLTIP\n    if (!this.hideTooltip) {\n      this.tooltip = d3_select('body')\n        .append('div')\n        .attr('class', 'pbds-tooltip south')\n        .style('opacity', 0)\n        .attr('aria-hidden', 'true'); // hide tooltip for accessibility\n\n      // tooltip header\n      this.tooltip.append('div').attr('class', 'tooltip-header');\n      this.tooltip.append('div').attr('class', 'tooltip-value');\n    }\n\n    // create chart svg\n    this.svg = this.chart\n      .append('svg')\n      .attr('width', +this.width)\n      .attr('height', +this.height + this.margin.top + this.margin.bottom)\n      .attr('class', 'img-fluid')\n      .attr('preserveAspectRatio', 'xMinYMin meet')\n      .attr(\n        'viewBox',\n        `-${this.margin.left} -${this.margin.top} ${+this.width} ${+this.height + this.margin.top + this.margin.bottom}`\n      );\n\n    // map\n    this.svg\n      .append('g')\n      .attr('class', 'map')\n      .selectAll('path')\n      .data(this.topojsonFeature.features)\n      .join((enter) => enter.append('path').attr('class', 'feature').attr('d', this.geoPath));\n\n    // borders\n    this.svg\n      .append('path')\n      .attr('class', 'mesh')\n      .datum(topojson.mesh(this.topojson, this.topojson.objects[this.mesh || this.feature], (a, b) => a !== b))\n      .attr('d', this.geoPath);\n\n    // legend\n    if (!this.hideLegend) {\n      this.svg\n        .append('g')\n        .attr('transform', `translate(${+this.legendLeft}, ${+this.legendTop})`)\n        .call(this.legend);\n    }\n\n    this.updateChart();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.data && !changes.data.firstChange) {\n      this.updateChart();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.tooltip) this.tooltip.remove();\n  }\n\n  updateChart = () => {\n    this.svg\n      .select('.map')\n      .selectAll('path')\n      .style('fill', (d, i) => {\n        const match = this.data.find((obj) => obj[this.dataField] === d[this.dataField]);\n        if (match) {\n          return this.colorRange(match.value);\n        }\n      })\n      .classed('hasData', (d, i) => {\n        return this.data.some((obj) => obj[this.dataField] === d[this.dataField]);\n      });\n\n    if (!this.hideTooltip) {\n      this.svg\n        .select('.map')\n        .selectAll('path')\n        .on('mouseover', (data, index, nodes) =>\n          this.featureMouseOver(\n            d3_event,\n            this.data.find((obj) => obj[this.dataField] === data[this.dataField]),\n            index,\n            nodes\n          )\n        )\n        .on('mouseout', (data, index, nodes) => this.featureMouseOut(d3_event, this.data, index, nodes))\n        .on('mousemove', (data, index, nodes) => this.tooltipMove(this.chart.node()))\n        .on('click', (data, index, nodes) =>\n          this.featureMouseClick(\n            d3_event,\n            this.data.find((obj) => obj[this.dataField] === data[this.dataField]),\n            index,\n            nodes\n          )\n        );\n    }\n  };\n\n  featureMouseOver = (event, data, index, nodes) => {\n    if (data) {\n      this.tooltipShow(data, nodes[index]);\n      this.hovered.emit({ event, data });\n    }\n  };\n\n  featureMouseOut = (event, data, index, nodes) => {\n    this.tooltipHide();\n  };\n\n  featureMouseClick = (event, data, index, nodes) => {\n    if (data) {\n      this.clicked.emit({ event, data });\n    }\n  };\n\n  private tooltipShow = (data, node) => {\n    // console.log('TOOLTIP: ', data, node);\n\n    this.tooltipSetPosition(node);\n\n    if (data.label) {\n      this.tooltip.select('.tooltip-header').html((d) => `${data.label}`);\n    }\n\n    this.tooltip\n      .select('.tooltip-value')\n      .html((d) => (this.tooltipValueFormat ? `${this.tooltipValueFormat(data.value)}` : `${data.value}`));\n\n    this.tooltip.style('opacity', 1);\n  };\n\n  private tooltipHide = () => {\n    this.tooltip.style('opacity', 0);\n  };\n\n  private tooltipMove = (node) => {\n    this.tooltipSetPosition(node);\n  };\n\n  private tooltipSetPosition = (node) => {\n    const mouse = d3_mouse(node);\n    const mouseLeft = +mouse[0];\n    const mouseTop = +mouse[1];\n\n    const geometry = node.getBoundingClientRect();\n    const geometryLeft = +geometry.left;\n    const geometryTop = +geometry.top;\n\n    const scroll = this._scroll.getScrollPosition();\n    // const scrollLeft = +scroll[0];\n    const scrollTop = +scroll[1];\n\n    const tooltipOffsetWidth = +this.tooltip.node().offsetWidth / 2;\n    const tooltipOffsetHeight = +this.tooltip.node().offsetHeight;\n\n    this.tooltip.style('top', `${scrollTop + mouseTop + geometryTop - tooltipOffsetHeight - 14}px`);\n    this.tooltip.style('left', `${mouseLeft + geometryLeft - tooltipOffsetWidth}px`);\n  };\n\n  legend = (g) => {\n    const length = this.colorRange.range().length;\n\n    // console.log(this.colorRange.range().length, this.colorDomain);\n\n    const x = d3_scaleLinear()\n      .domain([1, length - 1])\n      .rangeRound([+this.legendWidth / length, (this.legendWidth * (length - 1)) / length]);\n\n    g.attr('class', 'legend')\n      .selectAll('rect')\n      .data(this.colorRange.range())\n      .join('rect')\n      .attr('height', 8)\n      .attr('x', (d, i) => x(i))\n      .attr('width', (d, i) => x(i + 1) - x(i))\n      .attr('fill', (d) => d);\n\n    if (this.legendLabel) {\n      g.append('text').attr('y', -6).attr('text-anchor', 'start').attr('class', 'legend-label').text(this.legendLabel);\n    }\n\n    g.call(\n      d3_axisBottom(x)\n        .tickSize(13)\n        .tickValues(d3_range(1, length))\n        .tickFormat((i: number) =>\n          this.legendValueFormat ? `${this.legendValueFormat(this.colorDomain[i - 1])}` : `${this.colorDomain[i - 1]}`\n        )\n    )\n      .select('.domain')\n      .remove();\n  };\n}\n","import {\n  Component,\n  OnInit,\n  OnChanges,\n  Input,\n  Output,\n  EventEmitter,\n  ElementRef,\n  HostBinding,\n  OnDestroy,\n  SimpleChanges,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\nimport { ViewportScroller, Location } from '@angular/common';\n\nimport { select as d3_select, event as d3_event } from 'd3-selection';\nimport { scaleOrdinal as d3_scaleOrdinal, scaleBand as d3_scaleBand, scaleLinear as d3_scaleLinear } from 'd3-scale';\nimport { max as d3_max } from 'd3-array';\nimport { axisBottom as d3_axisBottom, axisLeft as d3_axisLeft } from 'd3-axis';\nimport { values as d3_values } from 'd3-collection';\nimport { isoParse as d3_isoParse } from 'd3-time-format';\n\nimport { PbdsDatavizService } from './dataviz.service';\nimport { PbdsDatavizBarGrouped } from './dataviz.interfaces';\n\n@Component({\n  selector: 'pbds-dataviz-bar-grouped',\n  template: ``,\n  styles: [],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class PbdsDatavizBarGroupedComponent implements OnInit, OnDestroy, OnChanges {\n  @HostBinding('class.pbds-chart')\n  chartClass = true;\n\n  @HostBinding('class.pbds-chart-bar-grouped')\n  groupedBarClass = true;\n\n  @Input()\n  data: Array<PbdsDatavizBarGrouped>;\n\n  @Input()\n  width = 306;\n\n  @Input()\n  height = 400;\n\n  @Input()\n  vertical = true;\n\n  @Input()\n  hideXAxis = false;\n\n  @Input()\n  xAxisMaxBuffer = 0.01;\n\n  @Input()\n  xAxisFormatType: 'number' | 'time' = null;\n\n  @Input()\n  xAxisFormatString = '';\n\n  @Input()\n  xAxisTicks = 5;\n\n  @Input()\n  hideYAxis = false;\n\n  @Input()\n  yAxisMaxBuffer = 0.01;\n\n  @Input()\n  yAxisFormatType: 'number' | 'time' = null;\n\n  @Input()\n  yAxisFormatString = '';\n\n  @Input()\n  yAxisTicks = 5;\n\n  @Input()\n  marginTop = 10;\n\n  @Input()\n  marginRight = this.vertical ? 0 : 55;\n\n  @Input()\n  marginBottom = 30;\n\n  @Input()\n  marginLeft = 55;\n\n  @Input()\n  hideLegend = false;\n\n  @Input()\n  legendWidth = 105 + 28; // hardcoded legend width + left margin, do not document until feedback\n\n  @Input()\n  legendPosition: 'right' | 'bottom' = 'right';\n\n  @Input()\n  legendLabelFormatType: 'number' | 'time' = null;\n\n  @Input()\n  legendLabelFormatString = '';\n\n  @Input()\n  hideTooltip = false;\n\n  @Input()\n  tooltipLabelFormatType: 'number' | 'time' = null;\n\n  @Input()\n  tooltipLabelFormatString = '';\n\n  @Input()\n  tooltipValueFormatType: 'number' = null;\n\n  @Input()\n  tooltipValueFormatString = '';\n\n  @Input()\n  showGrid = false;\n\n  @Input()\n  theme: 'classic' | 'sunset' | 'ocean' | 'twilight' = 'classic';\n\n  @Output()\n  hovered: EventEmitter<object> = new EventEmitter<object>();\n\n  @Output()\n  clicked: EventEmitter<object> = new EventEmitter<object>();\n\n  private barScale;\n  private chart;\n  private svg;\n  private margin;\n  private colorRange;\n  private xAxisMax;\n  private xAxisScale;\n  private xAxisCall;\n  private xAxis;\n  private xAxisTickSize: number;\n  private xAxisTickSizeOuter: number;\n  private xAxisFormat;\n  private hideXAxisDomain: boolean;\n  private hideXAxisZero: boolean;\n  private hideXAxisTicks: boolean;\n  private xGrid;\n  private xGridCall;\n  private yAxisMax;\n  private yAxisScale;\n  private yAxisCall;\n  private yAxis;\n  private yAxisFormat;\n  private yAxisTickSize: number;\n  private yAxisTickSizeOuter: number;\n  private hideYAxisZero: boolean;\n  private hideYAxisDomain: boolean;\n  private hideYAxisTicks: boolean;\n  private yGrid;\n  private yGridCall;\n  private legendLabelFormat;\n  private hideGrayBars: boolean;\n  private tooltip;\n  private tooltipValueFormat;\n  private tooltipLabelFormat;\n\n  constructor(\n    private _dataviz: PbdsDatavizService,\n    private _element: ElementRef,\n    private _scroll: ViewportScroller,\n    private _location: Location\n  ) {}\n\n  ngOnInit() {\n    this.margin = {\n      top: +this.marginTop,\n      right: +this.marginRight,\n      bottom: +this.marginBottom,\n      left: +this.marginLeft\n    };\n\n    // create formatters\n    this.xAxisFormat = this._dataviz.d3Format(this.xAxisFormatType, this.xAxisFormatString);\n    this.yAxisFormat = this._dataviz.d3Format(this.yAxisFormatType, this.yAxisFormatString);\n    this.legendLabelFormat = this._dataviz.d3Format(this.legendLabelFormatType, this.legendLabelFormatString);\n    this.tooltipLabelFormat = this._dataviz.d3Format(this.tooltipLabelFormatType, this.tooltipLabelFormatString);\n    this.tooltipValueFormat = this._dataviz.d3Format(this.tooltipValueFormatType, this.tooltipValueFormatString);\n\n    // defaults for all chart types\n    this.hideGrayBars = false;\n    this.hideXAxisZero = false;\n    this.hideXAxisDomain = false;\n    this.hideXAxisTicks = true;\n    this.xAxisTickSize = 8;\n    this.xAxisTickSizeOuter = 0;\n    this.hideYAxisZero = false;\n    this.hideYAxisDomain = false;\n    this.hideYAxisTicks = true;\n    this.yAxisTickSize = 8;\n    this.yAxisTickSizeOuter = 0;\n\n    if (!this.hideLegend && this.legendPosition === 'right') {\n      this.width = +this.width - +this.legendWidth;\n    }\n\n    // create the chart\n    this.chart = d3_select(this._element.nativeElement).attr('aria-hidden', 'true');\n\n    // create chart svg\n    this.svg = this.chart\n      .append('svg')\n      .attr('width', () => {\n        if (this.vertical) {\n          return +this.width;\n        } else {\n          return +this.width + this.margin.left + this.margin.right;\n        }\n      })\n      .attr('height', +this.height + this.margin.top + this.margin.bottom)\n      .attr('class', 'img-fluid')\n      .attr('preserveAspectRatio', 'xMinYMin meet')\n      .attr('viewBox', () => {\n        if (this.vertical) {\n          return `-${this.margin.left} -${this.margin.top} ${+this.width} ${+this.height +\n            this.margin.top +\n            this.margin.bottom}`;\n        } else {\n          return `-${this.margin.left} -${this.margin.top} ${+this.width + this.margin.left + this.margin.right} ${+this\n            .height +\n            this.margin.top +\n            this.margin.bottom}`;\n        }\n      });\n\n    // TOOLTIP\n    if (!this.hideTooltip) {\n      this.tooltip = d3_select('body')\n        .append('div')\n        .attr('class', () => {\n          return this.vertical ? 'pbds-tooltip south' : 'pbds-tooltip west';\n        })\n        .style('opacity', 0)\n        .attr('aria-hidden', 'true'); // hide tooltip for accessibility\n    }\n\n    // add legend classes\n    if (!this.hideLegend) {\n      this.chart.classed('pbds-chart-legend-bottom', this.legendPosition === 'bottom' ? true : false);\n      this.chart.append('ul').attr('class', `legend legend-${this.legendPosition}`);\n    }\n\n    // build color ranges\n    this.colorRange = d3_scaleOrdinal().range(\n      this._dataviz.createGradientDefs(this.svg, false, this.theme, this.vertical)\n    );\n\n    if (this.vertical) {\n      // X AXIS\n      this.xAxisScale = d3_scaleBand()\n        .domain(this.data.map(d => d.key))\n        .rangeRound([0, this.width - this.margin.left])\n        .align(0);\n\n      // add padding to the scale for gray bars\n      !this.hideGrayBars\n        ? this.xAxisScale.paddingInner(0.1).paddingOuter(0)\n        : this.xAxisScale.paddingInner(0).paddingOuter(0);\n\n      this.xAxisCall = d3_axisBottom(this.xAxisScale)\n        .tickSize(this.xAxisTickSize)\n        .tickSizeOuter(this.xAxisTickSizeOuter)\n        .tickFormat(this.xAxisFormatter);\n\n      this.xAxis = this.svg\n        .append('g')\n        .attr('class', 'axis axis-x')\n        .attr('transform', `translate(0, ${this.height})`)\n        .classed('axis-hidden', this.hideXAxis)\n        .classed('axis-zero-hidden', this.hideXAxisZero)\n        .classed('axis-domain-hidden', this.hideXAxisDomain)\n        .classed('axis-ticks-hidden', this.hideXAxisTicks)\n        .call(this.xAxisCall);\n\n      // X GRIDLINES\n      // if (!this.hideXGrid) {\n      //   this.xGridCall = d3_axisBottom(this.xAxisScale).tickSize(-this.height);\n\n      //   this.xGrid = this.svg\n      //     .append('g')\n      //     .attr('class', 'grid grid-x')\n      //     .classed('grid-zero-hidden', this.hideXAxisZero)\n      //     .attr('transform', `translate(0, ${this.height})`)\n      //     .call(this.xGridCall);\n      // }\n\n      // Y AXIS\n      this.yAxisMax = d3_max(this.data, (data: any) => {\n        const clone = { ...data };\n        delete clone.key;\n\n        return d3_max(d3_values(clone));\n      });\n\n      this.yAxisMax = this.yAxisMax + this.yAxisMax * this.yAxisMaxBuffer;\n\n      this.yAxisScale = d3_scaleLinear()\n        .domain([0, this.yAxisMax])\n        .nice()\n        .rangeRound([this.height, 0]);\n\n      this.yAxisCall = d3_axisLeft(this.yAxisScale)\n        .ticks(this.yAxisTicks)\n        .tickSize(this.yAxisTickSize)\n        .tickSizeOuter(this.yAxisTickSizeOuter)\n        .tickFormat(this.yAxisFormatter);\n\n      this.yAxis = this.svg\n        .append('g')\n        .attr('class', 'axis axis-y')\n        .classed('axis-hidden', this.hideYAxis)\n        .classed('axis-zero-hidden', this.hideYAxisZero)\n        .classed('axis-domain-hidden', this.hideYAxisDomain)\n        .classed('axis-ticks-hidden', this.hideYAxisTicks)\n        .call(this.yAxisCall);\n\n      // Y GRIDLINES\n      if (this.showGrid) {\n        this.yGridCall = d3_axisLeft(this.yAxisScale)\n          .ticks(this.yAxisTicks)\n          .tickSize(-this.width + this.margin.left + this.margin.right);\n\n        this.yGrid = this.svg\n          .append('g')\n          .attr('class', 'grid grid-y')\n          .classed('grid-zero-hidden', this.hideYAxisZero)\n          .attr('transform', `translate(0, 0)`)\n          .call(this.yGridCall);\n      }\n\n      // color bar scale\n      this.barScale = d3_scaleBand()\n        .domain(Object.keys(this.data[0]).slice(1))\n        .rangeRound([0, this.xAxisScale.bandwidth()])\n        .paddingInner(0.2)\n        .paddingOuter(0.5);\n\n      this.updateChartVertical();\n    } else {\n      // X AXIS\n      this.xAxisMax = d3_max(this.data, (data: any) => {\n        const clone = { ...data };\n        delete clone.key;\n        return d3_max(d3_values(clone));\n      });\n\n      this.xAxisMax = this.xAxisMax + this.xAxisMax * this.xAxisMaxBuffer;\n\n      this.xAxisScale = d3_scaleLinear()\n        .domain([0, this.xAxisMax])\n        .rangeRound([0, this.width])\n        .nice();\n\n      this.xAxisCall = d3_axisBottom(this.xAxisScale)\n        .ticks(this.xAxisTicks)\n        .tickSize(this.xAxisTickSize)\n        .tickSizeOuter(this.xAxisTickSizeOuter)\n        .tickFormat(this.xAxisFormatter);\n\n      this.xAxis = this.svg\n        .append('g')\n        .attr('class', 'axis axis-x')\n        .attr('transform', `translate(0, ${this.height})`)\n        .classed('axis-hidden', this.hideXAxis)\n        .classed('axis-zero-hidden', this.hideXAxisZero)\n        .classed('axis-domain-hidden', this.hideXAxisDomain)\n        .classed('axis-ticks-hidden', this.hideXAxisTicks)\n        .call(this.xAxisCall);\n\n      // Y AXIS\n      this.yAxisScale = d3_scaleBand()\n        .domain(this.data.map(d => d.key))\n        .rangeRound([0, this.height])\n        .align(1);\n\n      // add padding to the scale for gray bars\n      !this.hideGrayBars\n        ? this.yAxisScale.paddingInner(0.1).paddingOuter(0)\n        : this.yAxisScale.paddingInner(0).paddingOuter(0);\n\n      this.yAxisCall = d3_axisLeft(this.yAxisScale)\n        .tickSize(this.yAxisTickSize)\n        .tickSizeOuter(this.yAxisTickSizeOuter)\n        .tickFormat(this.yAxisFormatter);\n\n      this.yAxis = this.svg\n        .append('g')\n        .attr('class', 'axis axis-y')\n        .classed('axis-hidden', this.hideYAxis)\n        .classed('axis-zero-hidden', this.hideYAxisZero)\n        .classed('axis-domain-hidden', this.hideYAxisDomain)\n        .classed('axis-ticks-hidden', this.hideYAxisTicks)\n        .call(this.yAxisCall);\n\n      // X GRIDLINES\n      if (this.showGrid) {\n        this.xGridCall = d3_axisBottom(this.xAxisScale).tickSize(-this.height);\n        this.xGrid = this.svg\n          .append('g')\n          .attr('class', 'grid grid-x')\n          .classed('grid-zero-hidden', this.hideXAxisZero)\n          .attr('transform', `translate(0, ${this.height})`)\n          .call(this.xGridCall);\n      }\n\n      // Y GRIDLINES\n      // if (!this.hideYGrid) {\n      //   this.yGridCall = d3_axisLeft(this.yAxisScale)\n      //     .ticks(this.yAxisTicks)\n      //     .tickSize(-this.width);\n\n      //   this.yGrid = this.svg\n      //     .append('g')\n      //     .attr('class', 'grid grid-y')\n      //     .classed('grid-zero-hidden', this.hideYAxisZero)\n      //     .attr('transform', `translate(0, 0)`)\n      //     .call(this.yGridCall);\n      // }\n\n      // color bar scale\n      this.barScale = d3_scaleBand()\n        .domain(Object.keys(this.data[0]).slice(1))\n        .rangeRound([this.yAxisScale.bandwidth(), 0])\n        .paddingInner(0.2)\n        .paddingOuter(0.5);\n\n      this.updateChartHorizontal();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.tooltip) this.tooltip.remove();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.data && !changes.data.firstChange) {\n      if (this.vertical) {\n        this.updateChartVertical();\n      } else {\n        this.updateChartHorizontal();\n      }\n    }\n  }\n\n  updateChartVertical() {\n    // update the xScale\n    this.xAxisScale.domain(this.data.map(d => d.key));\n\n    // update the yScale\n    this.yAxisMax = d3_max(this.data, (data: any) => {\n      const clone = { ...data };\n      delete clone.key;\n\n      return d3_max(d3_values(clone));\n    });\n\n    this.yAxisMax = this.yAxisMax + this.yAxisMax * this.yAxisMaxBuffer;\n\n    this.yAxisScale\n      .domain([0, this.yAxisMax])\n      .rangeRound([this.height, 0])\n      .nice();\n\n    this.xAxis\n      .transition()\n      .duration(1000)\n      .call(this.xAxisCall);\n\n    this.yAxis\n      .transition()\n      .duration(1000)\n      .call(this.yAxisCall);\n\n    // update the grids\n    // if (!this.hideXGrid) {\n    //   this.xGrid\n    //     .transition()\n    //     .duration(1000)\n    //     .call(this.xGridCall);\n    // }\n\n    if (this.showGrid) {\n      this.yGrid\n        .transition()\n        .duration(1000)\n        .call(this.yGridCall);\n    }\n\n    // update the color bar scale\n    this.barScale.domain(Object.keys(this.data[0]).slice(1)).rangeRound([0, this.xAxisScale.bandwidth()]);\n\n    this.svg\n      .selectAll('.gray-bar')\n      .data(this.data)\n      .join(\n        enter =>\n          enter\n            .append('rect')\n            .attr('class', 'gray-bar')\n            .attr('x', d => this.xAxisScale(d.key))\n            .attr('y', d => this.yAxisScale(d.value))\n            .attr('width', this.xAxisScale.bandwidth())\n            .attr('height', this.height),\n        update =>\n          update\n            .transition()\n            .duration(1000)\n            .attr('x', d => this.xAxisScale(d.key))\n            .attr('y', d => this.yAxisScale(d.value))\n            .attr('width', this.xAxisScale.bandwidth())\n            .attr('height', this.height)\n      );\n\n    this.svg\n      .selectAll('.bar-group')\n      .data(this.data)\n      .join(\n        enter =>\n          enter\n            .append('g')\n            .attr('class', 'bar-group')\n            .attr('transform', (d, i) => {\n              return `translate(${this.xAxisScale(d.key)}, 0)`;\n            }),\n        update =>\n          update\n            .transition()\n            .duration(1000)\n            .attr('transform', (d, i) => {\n              return `translate(${this.xAxisScale(d.key)}, 0)`;\n            })\n      );\n\n    this.svg\n      .selectAll('.bar-group')\n      .selectAll('.bar')\n      .data((d, i) => {\n        const clone = { ...d };\n        delete clone.key;\n\n        const keys = Object.keys(clone);\n\n        const keyData = keys.map(function(key) {\n          return { label: key, value: d[key], parentIndex: i };\n        });\n\n        return keyData;\n      })\n      .join(\n        enter =>\n          enter\n            .append('rect')\n            .attr('class', 'bar')\n            .attr('fill', d => `url(${this._location.path()}#gradient-${this.colorRange(d.label).substr(1)})`)\n            .attr('data-color', d => this.colorRange(d.label))\n            .attr('data-parent-index', d => d.parentIndex)\n            .attr('x', d => this.barScale(d.label))\n            .attr('width', this.barScale.bandwidth())\n            .attr('y', this.height)\n            .attr('height', 0)\n            .call(enter => {\n              return enter\n                .attr('pointer-events', 'none')\n                .transition()\n                .duration(0) // 500\n                .attr('height', d => this.height - this.yAxisScale(d.value))\n                .attr('y', d => this.yAxisScale(d.value))\n                .transition()\n                .attr('pointer-events', 'auto');\n            }),\n        update =>\n          update\n            .attr('pointer-events', 'none')\n            .transition()\n            .duration(1000)\n            .attr('x', d => this.barScale(d.label))\n            .attr('width', this.barScale.bandwidth())\n            .attr('height', d => this.height - this.yAxisScale(d.value))\n            .attr('y', d => this.yAxisScale(d.value))\n            .transition()\n            .attr('pointer-events', 'auto'),\n        exit =>\n          exit\n            .transition()\n            .duration(0) // 100\n            .attr('pointer-events', 'none')\n            .attr('height', 0)\n            .attr('y', this.height)\n      )\n      .on('mouseover', (data, index, nodes) => this.barMouseOver(d3_event, data, index, nodes))\n      .on('mouseout', (data, index, nodes) => this.barMouseOut())\n      .on('click', (data, index, nodes) => this.barMouseClick(d3_event, data, index, nodes));\n\n    this.updateLegend();\n\n    this.svg.selectAll('.axis').raise();\n  }\n\n  updateChartHorizontal() {\n    // update the xScale\n    this.xAxisMax = d3_max(this.data, (data: any) => {\n      const clone = { ...data };\n      delete clone.key;\n      return d3_max(d3_values(clone));\n    });\n\n    this.xAxisMax = this.xAxisMax + this.xAxisMax * this.xAxisMaxBuffer;\n\n    this.xAxisScale\n      .domain([0, this.xAxisMax])\n      .rangeRound([0, this.width])\n      .nice();\n\n    // update the yScale\n    this.yAxisScale.domain(this.data.map(d => d.key));\n\n    this.xAxis\n      .transition()\n      .duration(1000)\n      .call(this.xAxisCall);\n\n    this.yAxis\n      .transition()\n      .duration(1000)\n      .call(this.yAxisCall);\n\n    // update the grids\n    if (this.showGrid) {\n      this.xGrid\n        .transition()\n        .duration(1000)\n        .call(this.xGridCall);\n    }\n\n    // if (!this.hideYGrid) {\n    //   this.yGrid\n    //     .transition()\n    //     .duration(1000)\n    //     .call(this.yGridCall);\n    // }\n\n    // update the color bar scale\n    this.barScale.domain(Object.keys(this.data[0]).slice(1)).rangeRound([0, this.yAxisScale.bandwidth()]);\n\n    this.svg\n      .selectAll('.gray-bar')\n      .data(this.data)\n      .join(\n        enter =>\n          enter\n            .append('rect')\n            .attr('class', 'gray-bar')\n            .attr('y', d => this.yAxisScale(d.key))\n            .attr('width', this.width)\n            .attr('height', this.yAxisScale.bandwidth()),\n        update =>\n          update\n            .transition()\n            .duration(1000)\n            .attr('y', d => this.yAxisScale(d.key))\n            .attr('width', this.width)\n            .attr('height', this.yAxisScale.bandwidth())\n      );\n\n    this.svg\n      .selectAll('.bar-group')\n      .data(this.data)\n      .join(\n        enter =>\n          enter\n            .append('g')\n            .attr('class', 'bar-group')\n            .attr('transform', (d, i) => {\n              return `translate(0, ${this.yAxisScale(d.key)})`;\n            }),\n        update =>\n          update\n            .transition()\n            .duration(1000)\n            .attr('transform', (d, i) => {\n              return `translate(0, ${this.yAxisScale(d.key)})`;\n            })\n      );\n\n    this.svg\n      .selectAll('.bar-group')\n      .selectAll('.bar')\n      .data((d, i) => {\n        const clone = { ...d };\n        delete clone.key;\n\n        const keys = Object.keys(clone);\n\n        const keyData = keys.map(function(key) {\n          return { label: key, value: d[key], parentIndex: i };\n        });\n\n        return keyData;\n      })\n      .join(\n        enter =>\n          enter\n            .append('rect')\n            .attr('class', 'bar')\n            .attr(\n              'fill',\n              d => `url(${this._location.path()}#gradient-horizontal-${this.colorRange(d.label).substr(1)})`\n            )\n            .attr('data-color', d => this.colorRange(d.label))\n            .attr('data-parent-index', d => d.parentIndex)\n            .attr('x', 0)\n            .attr('width', 0)\n            .attr('y', d => this.barScale(d.label))\n            .attr('height', this.barScale.bandwidth())\n            .call(enter => {\n              return enter\n                .attr('pointer-events', 'none')\n                .transition()\n                .duration(0) // 500\n                .attr('width', d => this.xAxisScale(d.value))\n                .transition()\n                .attr('pointer-events', 'auto');\n            }),\n        update =>\n          update\n            .attr('pointer-events', 'none')\n            .transition()\n            .duration(1000)\n            .attr('width', d => this.xAxisScale(d.value))\n            .attr('height', this.barScale.bandwidth())\n            .attr('y', d => this.barScale(d.label))\n            .transition()\n            .attr('pointer-events', 'auto'),\n        exit =>\n          exit\n            .transition()\n            .duration(0) // 100\n            .attr('pointer-events', 'none')\n            .attr('width', 0)\n      )\n      .on('mouseover', (data, index, nodes) => this.barMouseOver(d3_event, data, index, nodes))\n      .on('mouseout', (data, index, nodes) => this.barMouseOut())\n      .on('click', (data, index, nodes) => this.barMouseClick(d3_event, data, index, nodes));\n\n    this.updateLegend();\n\n    this.svg.selectAll('.axis').raise();\n  }\n\n  updateLegend() {\n    // legend\n    if (!this.hideLegend) {\n      const legendData = { ...this.data[0] };\n      delete legendData.key;\n      const legendKeys = Object.keys(legendData).map(function(key) {\n        return { label: key };\n      });\n\n      this.chart\n        .select('.legend')\n        .selectAll('.legend-item')\n        .data(legendKeys)\n        .join(\n          enter => {\n            const li = enter.append('li').attr('class', 'legend-item');\n\n            li.insert('span')\n              .attr('class', 'legend-key')\n              .style('background-color', d => this.colorRange(d.label));\n\n            li.insert('span', '.legend-item')\n              .attr('class', 'legend-label')\n              .html(d => {\n                switch (this.legendLabelFormatType) {\n                  case 'number':\n                    return this.legendLabelFormat(d.label);\n\n                  case 'time':\n                    const parsedTime = d3_isoParse(d.label);\n                    return this.legendLabelFormat(parsedTime);\n\n                  default:\n                    return d.label;\n                }\n              });\n\n            return li;\n          },\n          update => {\n            update.select('.legend-label').html(d => {\n              switch (this.legendLabelFormatType) {\n                case 'number':\n                  return this.legendLabelFormat(d.label);\n\n                case 'time':\n                  const parsedTime = d3_isoParse(d.label);\n                  return this.legendLabelFormat(parsedTime);\n\n                default:\n                  return d.label;\n              }\n            });\n\n            return update;\n          },\n          exit => exit.remove()\n        )\n        .on('mouseover', (data, index, nodes) => this.legendMouseOver(d3_event, data, index, nodes))\n        .on('mouseout', () => this.legendMouseOut())\n        .on('click', (data, index, nodes) => this.legendMouseClick(d3_event, data, index, nodes));\n    }\n  }\n\n  barMouseOver = (event, data, index, nodes) => {\n    const node = d3_select(nodes[index]);\n\n    this.chart\n      .selectAll('.bar-group')\n      .selectAll('.bar')\n      .classed('inactive', true);\n\n    node.classed('inactive', false).style('fill', node.attr('data-color'));\n\n    this.tooltipShow(data, nodes[index]);\n\n    this.hovered.emit({ event, data });\n  };\n\n  barMouseOut = () => {\n    this.chart\n      .selectAll('.bar')\n      .classed('inactive', false)\n      .style('fill', null);\n\n    this.tooltipHide();\n  };\n\n  barMouseClick = (event, data, index, nodes) => {\n    this.clicked.emit({ event, data });\n  };\n\n  legendMouseOver = (event, data, index, nodes) => {\n    this.chart\n      .selectAll('.legend-item')\n      .filter((d, i) => i !== index)\n      .classed('inactive', true);\n\n    this.chart\n      .selectAll('.bar-group')\n      .selectAll('.bar')\n      .filter((d, i) => i !== index)\n      .classed('inactive', true);\n\n    const bar = this.chart\n      .selectAll('.bar-group')\n      .selectAll('.bar')\n      .filter((d, i) => i === index)\n      .classed('inactive', null);\n\n    const barColor = bar.attr('data-color');\n\n    bar.style('fill', () => barColor);\n\n    this.hovered.emit({ event, data });\n  };\n\n  legendMouseOut = () => {\n    this.chart.selectAll('.legend-item').classed('inactive', false);\n\n    this.chart\n      .selectAll('.bar-group')\n      .selectAll('.bar')\n      .classed('inactive', false)\n      .style('fill', null);\n  };\n\n  legendMouseClick = (event, data, index, nodes) => {\n    this.clicked.emit({ event, data });\n  };\n\n  private tooltipShow = (data, node) => {\n    const dimensions = node.getBoundingClientRect();\n    const scroll = this._scroll.getScrollPosition();\n    let label;\n\n    switch (this.tooltipLabelFormatType) {\n      case 'number':\n        label = this.tooltipLabelFormat(data.label);\n        break;\n\n      case 'time':\n        const parsedTime = d3_isoParse(data.label);\n        label = this.tooltipLabelFormat(parsedTime);\n        break;\n\n      default:\n        label = data.label;\n    }\n\n    const value =\n      this.tooltipValueFormat === null\n        ? `<div class=\"tooltip-value\">${data.value}</div>`\n        : `<div class=\"tooltip-value\">${this.tooltipValueFormat(data.value)}</div>`;\n\n    this.tooltip.html(\n      `\n        ${label}\n        ${value}\n      `\n    );\n\n    const tooltipOffsetWidth = +this.tooltip.node().offsetWidth / 2;\n    const tooltipOffsetHeight = +this.tooltip.node().offsetHeight;\n    const tooltipTipSize = 8;\n\n    if (this.vertical) {\n      this.tooltip.style('top', `${+scroll[1] + +dimensions.top - tooltipOffsetHeight - tooltipTipSize}px`);\n      this.tooltip.style('left', `${+scroll[0] + +dimensions.left - tooltipOffsetWidth + +dimensions.width / 2}px`);\n    } else {\n      this.tooltip.style('top', `${+scroll[1] + +dimensions.top + +dimensions.height / 2 - tooltipOffsetHeight / 2}px`);\n      this.tooltip.style('left', `${+scroll[0] + +dimensions.right + tooltipTipSize}px`);\n    }\n\n    this.tooltip.style('opacity', 1);\n  };\n\n  private tooltipHide = () => {\n    this.tooltip.style('opacity', 0);\n  };\n\n  private xAxisFormatter = item => {\n    switch (this.xAxisFormatType) {\n      case 'number':\n        return this.xAxisFormat(item);\n\n      case 'time':\n        const parseDate = d3_isoParse(item);\n        return this.xAxisFormat(parseDate);\n\n      default:\n        return item;\n    }\n  };\n\n  private yAxisFormatter = item => {\n    switch (this.yAxisFormatType) {\n      case 'number':\n        return this.yAxisFormat(item);\n\n      case 'time':\n        const parseDate = d3_isoParse(item);\n        return this.yAxisFormat(parseDate);\n\n      default:\n        return item;\n    }\n  };\n}\n","import {\n  Component,\n  OnInit,\n  Input,\n  ElementRef,\n  HostBinding,\n  OnChanges,\n  SimpleChanges,\n  Output,\n  EventEmitter,\n  ChangeDetectionStrategy,\n  OnDestroy\n} from '@angular/core';\n\nimport { ViewportScroller, Location } from '@angular/common';\n\nimport { select as d3_select, event as d3_event } from 'd3-selection';\nimport { scaleOrdinal as d3_scaleOrdinal, scaleLinear as d3_scaleLinear } from 'd3-scale';\nimport { sum as d3_sum } from 'd3-array';\nimport { axisBottom as d3_axisBottom } from 'd3-axis';\nimport { format as d3_format } from 'd3-format';\nimport { timeFormat as d3_timeFormat, isoParse as d3_isoParse } from 'd3-time-format';\nimport { easeLinear as d3_easeLinear } from 'd3-ease';\n\nimport { PbdsDatavizService } from './dataviz.service';\nimport { PbdsDatavizBarSingleHorizontal, PbdsDatavizBarSingleHorizontalCompare } from './dataviz.interfaces';\n\n@Component({\n  selector: 'pbds-dataviz-bar-single-horizontal',\n  template: ``,\n  styles: [],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class PbdsDatavizBarSingleHorizontalComponent implements OnInit, OnDestroy, OnChanges {\n  @HostBinding('class.pbds-chart')\n  chartClass = true;\n\n  @HostBinding('class.pbds-chart-bar-single-horizontal')\n  singleStackedBarClass = true;\n\n  @Input()\n  data: Array<PbdsDatavizBarSingleHorizontal | PbdsDatavizBarSingleHorizontalCompare>;\n\n  @Input()\n  width = 300;\n\n  @Input()\n  height = 40;\n\n  @Input()\n  nullValueText = 'No data available';\n\n  @Input()\n  percentage = false;\n\n  @Input()\n  marginTop = 10;\n\n  @Input()\n  marginRight = 20;\n\n  @Input()\n  marginBottom = 35;\n\n  @Input()\n  marginLeft = 15;\n\n  @Input()\n  barMargin = 2;\n\n  @Input()\n  hideXAxis = false;\n\n  @Input()\n  xAxisTicks = 6;\n\n  @Input()\n  xAxisTitle: string | null = null;\n\n  @Input()\n  xAxisFormatType: 'number' = null;\n\n  @Input()\n  xAxisFormatString = '';\n\n  @Input()\n  xAxisTickLabelSuffix = '';\n\n  @Input()\n  hideXGrid = false;\n\n  @Input()\n  hideLegend = false;\n\n  @Input()\n  hideLegendTooltip = true;\n\n  @Input()\n  legendWidth = 105 + 28; // hardcoded legend width + left margin, do not document until feedback\n\n  @Input()\n  legendPosition: 'right' | 'bottom' = 'bottom';\n\n  @Input()\n  legendLabelFormatType: 'number' | 'time' = null;\n\n  @Input()\n  legendLabelFormatString = '';\n\n  @Input()\n  hideTooltip = false;\n\n  @Input()\n  tooltipLabelFormatType: 'number' | 'time' = null;\n\n  @Input()\n  tooltipLabelFormatString = '';\n\n  @Input()\n  tooltipDateFormatString = '%b %e, %Y';\n\n  @Input()\n  tooltipValueFormatType: 'number' = null;\n\n  @Input()\n  tooltipValueFormatString = '';\n\n  @Input()\n  tooltipValueSuffix = '';\n\n  @Input()\n  tooltipPercentFormatString = '.2%';\n\n  @Input()\n  compareChangeFormatString = '.2%';\n\n  @Input()\n  monochrome = false;\n\n  @Input()\n  theme: 'classic' | 'ocean' | 'sunset' | 'twilight';\n\n  @Output()\n  hovered: EventEmitter<object> = new EventEmitter<object>();\n\n  @Output()\n  clicked: EventEmitter<object> = new EventEmitter<object>();\n\n  private isSingleData = false;\n  private isCompare = false;\n  private chart;\n  private svg;\n  private margin;\n  private colorRange;\n  private barPadding = 40;\n  private xAxisCall;\n  private xAxis;\n  private xAxisScale;\n  private xAxisTickSize: number;\n  private xAxisTickSizeOuter: number;\n  private xAxisFormat;\n  private xAxisTitleMargin: number;\n  private hideXAxisDomain: boolean;\n  private hideXAxisZero: boolean;\n  private hideXAxisTicks: boolean;\n  private xGrid;\n  private xGridCall;\n  private legendLabelFormat;\n  private tooltip;\n  private tooltipLabelFormat;\n  private tooltipValueFormat;\n  private tooltipDateFormat;\n  private tooltipPercentFormat;\n  private tooltipCompareChangeFormat;\n\n  constructor(\n    private _dataviz: PbdsDatavizService,\n    private _element: ElementRef,\n    private _scroll: ViewportScroller,\n    private _location: Location\n  ) {}\n\n  ngOnInit() {\n    this.height = +this.height + this.barPadding;\n\n    this.margin = {\n      top: +this.marginTop,\n      right: +this.marginRight,\n      bottom: +this.marginBottom,\n      left: +this.marginLeft\n    };\n\n    this.isSingleData = this.data.length === 1 ? true : false;\n    this.isCompare = Object.keys(this.data[0]).includes('compareValue');\n\n    // create formatters\n    this.xAxisFormat = this._dataviz.d3Format(this.xAxisFormatType, this.xAxisFormatString);\n    this.legendLabelFormat = this._dataviz.d3Format(this.legendLabelFormatType, this.legendLabelFormatString);\n    this.tooltipValueFormat = this._dataviz.d3Format(this.tooltipValueFormatType, this.tooltipValueFormatString);\n    this.tooltipDateFormat = d3_timeFormat(this.tooltipDateFormatString);\n    this.tooltipPercentFormat = d3_format(this.tooltipPercentFormatString);\n    this.tooltipCompareChangeFormat = d3_format(this.compareChangeFormatString);\n\n    // defaults for all chart types\n    this.hideXAxisZero = false;\n    this.hideXAxisDomain = true;\n    this.hideXAxisTicks = true;\n    this.xAxisTickSize = 8;\n    this.xAxisTickSizeOuter = 0;\n    this.xAxisTitleMargin = this.xAxisTitle ? 20 : 0;\n\n    if (!this.hideLegend && this.legendPosition === 'right') {\n      this.width = +this.width - +this.legendWidth;\n    }\n\n    // create the chart\n    this.chart = d3_select(this._element.nativeElement).attr('aria-hidden', 'true');\n\n    // create chart svg\n    this.svg = this.chart\n      .append('svg')\n      .attr('width', () => {\n        return +this.width + this.margin.left + this.margin.right;\n      })\n      .attr('height', +this.height + this.margin.top + this.margin.bottom + this.xAxisTitleMargin)\n      .attr('class', 'img-fluid')\n      .attr('preserveAspectRatio', 'xMinYMin meet')\n      .attr('viewBox', () => {\n        return `-${this.margin.left} -${this.margin.top} ${+this.width + this.margin.left + this.margin.right} ${+this\n          .height +\n          this.margin.top +\n          this.margin.bottom +\n          this.xAxisTitleMargin}`;\n      });\n\n    // TOOLTIP\n    if (!this.hideTooltip) {\n      this.tooltip = d3_select('body')\n        .append('div')\n        .attr('class', 'pbds-tooltip south')\n        .classed('pbds-tooltip-compare', this.isCompare)\n        .style('opacity', 0)\n        .attr('aria-hidden', 'true'); // hide tooltip for accessibility\n    }\n\n    // add legend classes\n    if (!this.hideLegend && this.data.length > 1) {\n      this.chart.classed('pbds-chart-legend-bottom', this.legendPosition === 'bottom' ? true : false);\n      this.chart.append('ul').attr('class', `legend legend-${this.legendPosition}`);\n    }\n\n    // X AXIS\n    this.xAxisScale = d3_scaleLinear()\n      .domain([0, Math.ceil(d3_sum(this.data, (d: any) => d.value))])\n      .range([0, +this.width]);\n\n    this.xAxisCall = d3_axisBottom(this.xAxisScale)\n      // .tickValues([0, d3_sum(this.data, (d: any) => d.value)])\n      .ticks(this.xAxisTicks)\n      .tickSize(this.xAxisTickSize)\n      .tickSizeOuter(this.xAxisTickSizeOuter)\n      .tickFormat(this.xAxisFormatter);\n\n    this.xAxis = this.svg\n      .append('g')\n      .attr('class', 'axis axis-x')\n      .attr('transform', `translate(0, ${this.height})`)\n      .classed('axis-hidden', this.hideXAxis)\n      .classed('axis-zero-hidden', this.hideXAxisZero)\n      .classed('axis-domain-hidden', this.hideXAxisDomain)\n      .classed('axis-ticks-hidden', this.hideXAxisTicks);\n    // .call(this.xAxisCall);\n\n    // X GRIDLINES\n    if (!this.hideXGrid) {\n      this.xGridCall = d3_axisBottom(this.xAxisScale).tickSize(-this.height);\n\n      this.xGrid = this.svg\n        .append('g')\n        .attr('class', 'grid grid-x')\n        .classed('grid-zero-hidden', this.hideXAxisZero)\n        .attr('transform', `translate(0, ${this.height})`)\n        .call(this.xGridCall);\n    }\n\n    if (this.xAxisTitle) {\n      this.svg\n        .append('text')\n        .attr('class', 'axis-title')\n        .attr('text-anchor', 'center')\n        .attr('x', this.width / 2 - this.margin.left)\n        .attr('y', this.height + this.margin.top + (!this.hideXAxis ? 40 : 0))\n        .text(this.xAxisTitle);\n    }\n\n    // build color ranges\n    let colors;\n\n    if (this.isSingleData) {\n      colors = this._dataviz.createGradientDefs(this.svg, this.monochrome, this.theme, false);\n    } else if (this.monochrome) {\n      colors = this._dataviz.getColors(this.monochrome, this.theme).reverse();\n    } else {\n      colors = this._dataviz.getColors(this.monochrome, this.theme);\n    }\n\n    this.colorRange = d3_scaleOrdinal().range(colors);\n\n    this.updateChart();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.data && !changes.data.firstChange) {\n      this.updateChart();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.tooltip) this.tooltip.remove();\n  }\n\n  updateChart() {\n    this.isSingleData = this.data.length === 1 ? true : false;\n    this.isCompare = Object.keys(this.data[0]).includes('compareValue');\n\n    const sumValues = d3_sum(this.data, (d: any) => d.value);\n    const isLastBarZero =\n      this.data[this.data.length - 1].value === 0 || this.data[this.data.length - 1].value === null ? true : false;\n\n    let lastBarZeroCount = 0;\n    const cloneData = [...this.data];\n    let isLast = false;\n\n    cloneData.reverse().forEach((value, index, array) => {\n      if ((value.value === 0 || value.value === null) && !isLast) {\n        lastBarZeroCount++;\n      } else {\n        isLast = true;\n      }\n    });\n\n    if (this.percentage && !this.isSingleData) {\n      this.xAxisScale.domain([0, sumValues]).range([0, +this.width]);\n      this.xAxisCall.tickValues([0, sumValues * 0.25, sumValues * 0.5, sumValues * 0.75, sumValues]);\n      this.xAxis.call(this.xAxisCall);\n\n      this.xGridCall.tickValues([0, sumValues * 0.25, sumValues * 0.5, sumValues * 0.75, sumValues]);\n      this.xGrid.call(this.xGridCall);\n\n      this.svg\n        .select('.axis-x')\n        .selectAll('text')\n        .html((d, i) => {\n          const format = d3_format('.0%');\n          return format(i * 0.25);\n        });\n    } else if (this.percentage && this.isSingleData) {\n      this.xAxisScale.domain([0, 1.0]).range([0, +this.width]);\n      this.xAxisCall.tickValues([0, 0.25, 0.5, 0.75, 1.0]);\n      this.xAxis.call(this.xAxisCall);\n\n      this.xGridCall.tickValues([0, 0.25, 0.5, 0.75, 1.0]);\n      this.xGrid.call(this.xGridCall);\n\n      this.svg\n        .select('.axis-x')\n        .selectAll('text')\n        .html((d, i) => {\n          const format = d3_format('.0%');\n          return format(i * 0.25);\n        });\n    } else {\n      this.xAxisScale.domain([0, Math.ceil(sumValues)]).range([0, +this.width]);\n      this.xGridCall.tickValues(this.xAxisScale.ticks().filter(n => Number.isInteger(n))); // remove decimal grid values\n\n      this.xAxis\n        .transition()\n        .duration(1000)\n        .call(this.xAxisCall);\n\n      // update the grids\n      if (!this.hideXGrid) {\n        this.xGrid\n          .transition()\n          .duration(1000)\n          .call(this.xGridCall);\n      }\n    }\n\n    this.svg\n      .selectAll('.bar')\n      .data(this.data)\n      .join(\n        enter =>\n          enter\n            .append('rect')\n            .attr('class', 'bar')\n            .attr('width', 0)\n            .attr('height', () => {\n              return this.height - this.barPadding;\n            })\n            .attr('fill', d => {\n              if (this.isSingleData) {\n                return `url(${this._location.path()}#gradient-horizontal-${this.colorRange(d.label).substr(1)})`;\n              } else {\n                return this.colorRange(d.label);\n              }\n            })\n            .attr('y', () => {\n              return this.barPadding / 2;\n            })\n            .attr('x', (d, i) => {\n              return this.data.slice(0, i).reduce((acc, item) => {\n                // console.log(acc, item, acc + this.xAxisScale(item.value) + this.barMargin);\n                return +acc + +this.xAxisScale(item.value);\n              }, 1);\n            })\n            .attr('pointer-events', 'none')\n            .call(enter => {\n              return (\n                enter\n                  .transition()\n                  // .duration(0)\n                  .delay((d, i) => i * 250)\n                  .ease(d3_easeLinear)\n                  .attr('width', (d, i) => {\n                    // debugger;\n                    if (i === this.data.length - lastBarZeroCount - 1 && isLastBarZero) {\n                      return this.xAxisScale(d.value);\n                    } else if (i !== this.data.length - 1) {\n                      let width = this.xAxisScale(d.value) - +this.barMargin;\n                      width = Math.sign(width) === -1 ? 0 : width; // handle negative values\n                      return width;\n                    } else {\n                      return this.xAxisScale(d.value);\n                    }\n                  })\n                  .transition()\n                  .attr('pointer-events', 'auto')\n              );\n            }),\n        update =>\n          update\n            .attr('pointer-events', 'none')\n            .transition()\n            .duration(1000)\n            .attr('width', (d, i) => {\n              // debugger;\n              if (d.value === null || d.value === 0) {\n                return this.xAxisScale(0);\n              } else if (i === this.data.length - 1) {\n                return this.xAxisScale(d.value);\n              } else {\n                return this.xAxisScale(d.value) - this.barMargin;\n              }\n            })\n            .attr('x', (d, i) => {\n              return this.data.slice(0, i).reduce((acc, item) => {\n                return acc + +this.xAxisScale(item.value);\n              }, 0);\n            })\n            .transition()\n            .attr('pointer-events', 'auto'),\n        exit =>\n          exit\n            .transition()\n            .attr('pointer-events', 'none')\n            .remove()\n      )\n      .on('mouseover', (data, index, nodes) => this.barMouseOver(d3_event, data, index, nodes))\n      .on('mouseout', (data, index, nodes) => this.barMouseOut())\n      .on('click', (data, index, nodes) => this.barMouseClick(d3_event, data, index, nodes));\n\n    if (!this.hideLegend) {\n      this.chart\n        .select('.legend')\n        .selectAll('.legend-item')\n        .data(this.data)\n        .join(\n          enter => {\n            const li = enter\n              .append('li')\n              .attr('class', 'legend-item')\n              .classed('align-items-start', this.isCompare);\n\n            li.insert('span')\n              .attr('class', 'legend-key')\n              .style('background-color', d => this.colorRange(d.label))\n              .classed('mt-1', this.isCompare);\n\n            li.insert('span')\n              .attr('class', 'legend-description')\n              .classed('d-flex', this.isCompare)\n              .classed('flex-column', this.isCompare);\n\n            li.select('.legend-description')\n              .insert('span')\n              .attr('class', 'legend-label')\n              .html(d => {\n                switch (this.legendLabelFormatType) {\n                  case 'number':\n                    return this.legendLabelFormat(d.label);\n\n                  case 'time':\n                    const parsedTime = d3_isoParse(d.label);\n                    return this.legendLabelFormat(parsedTime);\n\n                  default:\n                    return d.label;\n                }\n              });\n\n            li.select('.legend-description')\n              .insert('div')\n              .attr('class', 'legend-change')\n              .classed('d-none', !this.isCompare);\n\n            li.select('.legend-change').html(d => {\n              return `<div class=\"metric-block-indicator ${d.compareChangeDirection} ${\n                d.compareChangeInverse ? 'inverse' : ''\n              } mt-1\"><span>${this.tooltipCompareChangeFormat(d.compareChangeValue)}</span></div>`;\n            });\n\n            return li;\n          },\n          update => {\n            update.classed('align-items-start', this.isCompare);\n            update.select('.legend-key').classed('mt-1', this.isCompare);\n            update.select('.legend-change').classed('d-none', !this.isCompare);\n\n            if (this.isCompare) {\n              update.select('.legend-change').html(d => {\n                return `<div class=\"metric-block-indicator ${d.compareChangeDirection} ${\n                  d.compareChangeInverse ? 'inverse' : ''\n                } mt-1\"><span>${this.tooltipCompareChangeFormat(d.compareChangeValue)}</span></div>`;\n              });\n            }\n\n            update.select('.legend-label').html(d => {\n              switch (this.legendLabelFormatType) {\n                case 'number':\n                  return this.legendLabelFormat(d.label);\n\n                case 'time':\n                  const parsedTime = d3_isoParse(d.label);\n                  return this.legendLabelFormat(parsedTime);\n\n                default:\n                  return d.label;\n              }\n            });\n\n            return update;\n          },\n          exit => exit.remove()\n        )\n        .on('mouseover', (data, index, nodes) => this.legendMouseOver(d3_event, data, index, nodes))\n        .on('mouseout', () => this.legendMouseOut())\n        .on('click', (data, index, nodes) => this.legendMouseClick(d3_event, data, index, nodes));\n    }\n  }\n\n  barMouseOver = (event, data, index, nodes) => {\n    const node = d3_select(nodes[index]);\n\n    this.chart.selectAll('.bar').classed('inactive', true);\n\n    node.classed('inactive', false);\n\n    this.chart\n      .selectAll('.legend-item')\n      .filter((d, i) => {\n        // debugger;\n        return i !== index;\n      })\n      .classed('inactive', true);\n\n    this.tooltipShow(data, nodes[index]);\n\n    this.hovered.emit({ event, data });\n  };\n\n  barMouseOut = () => {\n    this.chart\n      .selectAll('.bar')\n      .classed('inactive', false)\n      .style('fill', null);\n\n    this.chart.selectAll('.legend-item').classed('inactive', false);\n\n    this.tooltipHide();\n  };\n\n  barMouseClick = (event, data, index, nodes) => {\n    this.clicked.emit({ event, data });\n  };\n\n  private tooltipShow = (data, node) => {\n    const dimensions = node.getBoundingClientRect();\n    const scroll = this._scroll.getScrollPosition();\n\n    const percentage = data.value / d3_sum(this.data, (d: any) => d.value);\n    const comparePercentage = data.compareValue / d3_sum(this.data, (d: any) => d.compareValue);\n\n    let tooltipLabel = ``;\n    let tooltipCompareDaterangeMargin = ``;\n    let tooltipCompareDaterange = ``;\n    let tooltipCompareValue = ``;\n    let tooltipDaterangeMargin = ``;\n    let tooltipDaterange = ``;\n    let tooltipValue = `${this.nullValueText}`;\n    let tooltipIndicator = '';\n\n    // tooltip label\n    if (!this.isSingleData) {\n      this.tooltip.classed('pbds-tooltip-compare', null);\n\n      switch (this.tooltipLabelFormatType) {\n        case 'number':\n          tooltipLabel = this.tooltipLabelFormat(data.label);\n          break;\n\n        case 'time':\n          const parsedTime = d3_isoParse(data.label);\n          tooltipLabel = this.tooltipLabelFormat(parsedTime);\n          break;\n\n        default:\n          tooltipLabel = data.label;\n      }\n    }\n\n    // tooltip compare daterange\n    if (this.isCompare && data.compareStartDate && data.compareEndDate) {\n      this.tooltip.classed('pbds-tooltip-compare', this.isCompare);\n      tooltipCompareDaterangeMargin = `mt-2`;\n\n      tooltipCompareDaterange = `${this.tooltipDateFormat(\n        d3_isoParse(data.compareStartDate)\n      )} - ${this.tooltipDateFormat(d3_isoParse(data.compareEndDate))}`;\n    }\n\n    // tooltip compare value\n    if (this.percentage && this.isCompare && data.compareValue) {\n      tooltipCompareValue =\n        this.tooltipValueFormat === null\n          ? `${this.tooltipPercentFormat(comparePercentage)} (${data.comparveValue}${this.tooltipValueSuffix})`\n          : `${this.tooltipPercentFormat(comparePercentage)} (${this.tooltipValueFormat(data.compareValue)}${\n              this.tooltipValueSuffix\n            })`;\n    } else if (this.isCompare && data.compareValue !== null) {\n      tooltipCompareValue =\n        this.tooltipValueFormat === null\n          ? `${data.compareValue}${this.tooltipValueSuffix} (${this.tooltipPercentFormat(comparePercentage)})`\n          : `${this.tooltipValueFormat(data.compareValue)}${this.tooltipValueSuffix} (${this.tooltipPercentFormat(\n              comparePercentage\n            )})`;\n    } else if (this.isCompare && data.compareValue === null) {\n      tooltipCompareValue = `${this.nullValueText}`;\n    }\n\n    // tooltip daterange\n    if (data.startDate && data.endDate) {\n      tooltipDaterange = `${this.tooltipDateFormat(d3_isoParse(data.startDate))} - ${this.tooltipDateFormat(\n        d3_isoParse(data.endDate)\n      )}`;\n    }\n\n    //tooltip daterange margin\n    if (tooltipLabel !== '') {\n      tooltipDaterangeMargin = `mt-2`;\n    }\n\n    // tooltip value\n    if (this.isSingleData && this.percentage && data.value) {\n      tooltipValue = this.tooltipValueFormat === null ? `${data.value}` : `${this.tooltipValueFormat(data.value)}`;\n    } else if (this.isSingleData && data.value !== null) {\n      tooltipValue =\n        this.tooltipValueFormat === null\n          ? `${data.value}${this.tooltipValueSuffix}`\n          : `${this.tooltipValueFormat(data.value)}${this.tooltipValueSuffix}`;\n    } else if (!this.isSingleData && this.percentage && data.value !== null) {\n      tooltipValue =\n        this.tooltipValueFormat === null\n          ? `${this.tooltipPercentFormat(percentage)} (${data.value}${this.tooltipValueSuffix})`\n          : `${this.tooltipPercentFormat(percentage)} (${this.tooltipValueFormat(data.value)}${\n              this.tooltipValueSuffix\n            })`;\n    } else if (!this.isSingleData && data.value !== null) {\n      tooltipValue =\n        this.tooltipValueFormat === null\n          ? `${data.value}${this.tooltipValueSuffix} (${this.tooltipPercentFormat(percentage)})`\n          : `${this.tooltipValueFormat(data.value)}${this.tooltipValueSuffix} (${this.tooltipPercentFormat(\n              percentage\n            )})`;\n    }\n\n    // tooltip metric indicator\n    if (!this.isSingleData && this.isCompare && data.value !== null && data.compareValue !== null) {\n      tooltipIndicator = `<div class=\"metric-block-indicator ${data.compareChangeDirection} ${\n        data.compareChangeInverse ? 'inverse' : ''\n      } ml-2\"><span>${this.tooltipCompareChangeFormat(data.compareChangeValue)}</span></div>`;\n    }\n\n    this.tooltip.html(() => {\n      return `\n        <div class=\"tooltip-label font-weight-bold\">${tooltipLabel}</div>\n        <div class=\"${tooltipCompareDaterangeMargin}\">${tooltipCompareDaterange}</div>\n        <div class=\"tooltip-value font-weight-bold\">${tooltipCompareValue}</div>\n        <div class=\"${tooltipDaterangeMargin}\">${tooltipDaterange}</div>\n        <div class=\"tooltip-value\"><span class=\"font-weight-bold\">${tooltipValue}</span> <span>${tooltipIndicator}</span></div>\n      `;\n    });\n\n    const tooltipOffsetWidth = +this.tooltip.node().offsetWidth / 2;\n    const tooltipOffsetHeight = +this.tooltip.node().offsetHeight;\n    const tooltipTipSize = 8;\n\n    this.tooltip.style('top', `${+scroll[1] + +dimensions.top - tooltipOffsetHeight - tooltipTipSize}px`);\n\n    if (this.data.length > 1) {\n      this.tooltip.style('left', `${+scroll[0] + +dimensions.left - tooltipOffsetWidth + +dimensions.width / 2}px`);\n    } else {\n      this.tooltip.style('left', `${+scroll[0] - tooltipOffsetWidth + +dimensions.right}px`);\n    }\n\n    this.tooltip.style('opacity', 1);\n  };\n\n  private tooltipHide = () => {\n    this.tooltip.style('opacity', 0);\n  };\n\n  legendMouseOver = (event, data, index, nodes) => {\n    if (!this.hideLegendTooltip) {\n      const barHover = this.svg\n        .selectAll('.bar')\n        .filter((d, i) => i === index)\n        .node();\n\n      this.tooltipShow(data, barHover);\n    }\n\n    this.chart\n      .selectAll('.legend-item')\n      .filter((d, i) => i !== index)\n      .classed('inactive', true);\n\n    this.chart\n      .selectAll('.bar')\n      .filter((d, i) => i !== index)\n      .classed('inactive', true);\n\n    this.chart\n      .selectAll('.bar')\n      .filter((d, i) => i === index)\n      .classed('inactive', null);\n\n    this.hovered.emit({ event, data });\n  };\n\n  legendMouseOut = () => {\n    this.chart.selectAll('.legend-item').classed('inactive', false);\n\n    this.chart\n      .selectAll('.bar')\n      .classed('inactive', false)\n      .style('fill', null);\n\n    // hide tooltip for zero/null values\n    this.tooltipHide();\n  };\n\n  legendMouseClick = (event, data, index, nodes) => {\n    this.clicked.emit({ event, data });\n  };\n\n  private xAxisFormatter = item => {\n    switch (this.xAxisFormatType) {\n      case 'number':\n        return `${this.xAxisFormat(item)}${this.xAxisTickLabelSuffix}`;\n\n      default:\n        return `${item}${this.xAxisTickLabelSuffix}`;\n    }\n  };\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NgbTooltipModule } from '@ng-bootstrap/ng-bootstrap';\n\nimport { PbdsDatavizPieComponent } from './dataviz-pie.component';\nimport { PbdsDatavizBarComponent } from './dataviz-bar.component';\nimport { PbdsDatavizLineComponent } from './dataviz-line.component';\nimport { PbdsDatavizGaugeComponent } from './dataviz-gauge.component';\nimport { PbdsDatavizSparklineComponent } from './dataviz-sparkline.component';\nimport { PbdsDatavizBarStackedComponent } from './dataviz-bar-stacked.component';\nimport { PbdsDatavizMetricBlockComponent } from './dataviz-metric-block.component';\nimport { PbdsDatavizMetricIndicatorComponent } from './dataviz-metric-indicator.component';\nimport { DatavizBubbleMapComponent } from './dataviz-bubble-map.component';\nimport { PbdsDatavizHeatmapComponent } from './dataviz-heatmap.component';\nimport { PbdsDatavizChoroplethMapComponent } from './dataviz-choropleth-map.component';\nimport { PbdsDatavizBarGroupedComponent } from './dataviz-bar-grouped.component';\nimport { PbdsDatavizBarSingleHorizontalComponent } from './dataviz-bar-single-horizontal.component';\n\n@NgModule({\n  declarations: [\n    PbdsDatavizPieComponent,\n    PbdsDatavizBarComponent,\n    PbdsDatavizLineComponent,\n    PbdsDatavizGaugeComponent,\n    PbdsDatavizSparklineComponent,\n    PbdsDatavizBarStackedComponent,\n    PbdsDatavizMetricBlockComponent,\n    DatavizBubbleMapComponent,\n    PbdsDatavizMetricIndicatorComponent,\n    PbdsDatavizHeatmapComponent,\n    PbdsDatavizChoroplethMapComponent,\n    PbdsDatavizBarGroupedComponent,\n    PbdsDatavizBarSingleHorizontalComponent\n  ],\n  imports: [CommonModule, NgbTooltipModule],\n  exports: [\n    PbdsDatavizPieComponent,\n    PbdsDatavizBarComponent,\n    PbdsDatavizLineComponent,\n    PbdsDatavizGaugeComponent,\n    PbdsDatavizSparklineComponent,\n    PbdsDatavizBarStackedComponent,\n    PbdsDatavizMetricBlockComponent,\n    DatavizBubbleMapComponent,\n    PbdsDatavizMetricIndicatorComponent,\n    PbdsDatavizHeatmapComponent,\n    PbdsDatavizChoroplethMapComponent,\n    PbdsDatavizBarGroupedComponent,\n    PbdsDatavizBarSingleHorizontalComponent\n  ]\n})\nexport class PbdsDatavizModule {}\n","// dataviz\nexport * from './dataviz.module';\nexport * from './dataviz.interfaces';\nexport * from './dataviz.service';\nexport * from './dataviz-bar.component';\nexport * from './dataviz-bar-grouped.component';\nexport * from './dataviz-bar-single-horizontal.component';\nexport * from './dataviz-bar-stacked.component';\nexport * from './dataviz-bubble-map.component';\nexport * from './dataviz-choropleth-map.component';\nexport * from './dataviz-gauge.component';\nexport * from './dataviz-heatmap.component';\nexport * from './dataviz-line.component';\nexport * from './dataviz-metric-indicator.component';\nexport * from './dataviz-metric-block.component';\nexport * from './dataviz-pie.component';\nexport * from './dataviz-sparkline.component';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["format","d3_format","d3_timeFormat","d3_event","d3_isoParse","d3_interpolate","d3_mouse","d3_scaleOrdinal","d3_pie","d3_arc","d3_select","d3_min","d3_max","d3_scaleBand","d3_axisBottom","d3_scaleLinear","d3_axisLeft","d3_extent","d3_easeQuadInOut","d3_bisectLeft","d3_isoFormat","d3_line","d3_curveCatmullRom","d3_area","d3_scaleTime","interpolate","line","area","d3_stack","d3_stackOrderNone","d3_geoAlbers","d3_geoAlbersUsa","d3_geoMercator","topojson.feature","d3_geoPath","topojson.mesh","d3_scaleThreshold","d3_scaleQuantile","d3_scaleQuantize","mouse","d3_range","d3_values","d3_sum","d3_easeLinear"],"mappings":";;;;;;;;;;;;;;;;;MAOa,kBAAkB;IAwE7B;QAvEQ,WAAM,GAAG;YACf,OAAO,EAAE;gBACP,IAAI,EAAE;oBACJ,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;iBACV;gBACD,IAAI,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;aACzE;YACD,QAAQ,EAAE;gBACR,IAAI,EAAE;oBACJ,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;iBACV;gBACD,IAAI,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;aACzE;YACD,KAAK,EAAE;gBACL,IAAI,EAAE;oBACJ,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;iBACV;gBACD,IAAI,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;aACzE;YACD,MAAM,EAAE;gBACN,IAAI,EAAE;oBACJ,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;oBACT,SAAS;iBACV;gBACD,IAAI,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;aACzE;SACF,CAAC;QAIF,cAAS,GAAG,CAAC,IAAI,GAAG,KAAK,EAAE,KAAK,GAAG,SAAS;YAC1C,OAAO,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC;SACjE,CAAC;QAEF,uBAAkB,GAAG,CAAC,GAAG,EAAE,IAAI,GAAG,KAAK,EAAE,KAAK,GAAG,SAAS,EAAE,QAAQ,GAAG,IAAI;YACzE,MAAM,MAAM,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC;YAE7E,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACtC,MAAM,KAAK,GAAG,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBAC7E,IAAI,QAAQ,CAAC;gBAEb,IAAI,QAAQ,EAAE;oBACZ,QAAQ,GAAG,GAAG;yBACX,MAAM,CAAC,MAAM,CAAC;yBACd,MAAM,CAAC,gBAAgB,CAAC;yBACxB,IAAI,CAAC,IAAI,EAAE,YAAY,KAAK,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC;yBAChD,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC;yBACf,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC;yBACf,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC;yBACf,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC;yBACf,IAAI,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;oBAE/B,QAAQ;yBACL,MAAM,CAAC,MAAM,CAAC;yBACd,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC;yBACpB,IAAI,CAAC,YAAY,EAAE,KAAK,CAAC;yBACzB,IAAI,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC;oBAE7B,QAAQ;yBACL,MAAM,CAAC,MAAM,CAAC;yBACd,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC;yBACtB,IAAI,CAAC,YAAY,EAAE,KAAK,CAAC;yBACzB,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;iBAC/B;qBAAM;oBACL,QAAQ,GAAG,GAAG;yBACX,MAAM,CAAC,MAAM,CAAC;yBACd,MAAM,CAAC,gBAAgB,CAAC;yBACxB,IAAI,CAAC,IAAI,EAAE,uBAAuB,KAAK,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC;yBAC3D,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC;yBACf,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC;yBACf,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC;yBACf,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC;yBACf,IAAI,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;oBAE/B,QAAQ;yBACL,MAAM,CAAC,MAAM,CAAC;yBACd,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC;yBACpB,IAAI,CAAC,YAAY,EAAE,KAAK,CAAC;yBACzB,IAAI,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC;oBAE7B,QAAQ;yBACL,MAAM,CAAC,MAAM,CAAC;yBACd,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC;yBACtB,IAAI,CAAC,YAAY,EAAE,KAAK,CAAC;yBACzB,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;iBAC/B;aACF;YAED,OAAO,MAAM,CAAC;SACf,CAAC;QAEF,qBAAgB,GAAG,GAAG;;YAEpB,MAAM,IAAI,GAAG,GAAG;iBACb,MAAM,CAAC,MAAM,CAAC;iBACd,MAAM,CAAC,QAAQ,CAAC;iBAChB,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC;iBAClB,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC;iBACrB,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YAE1B,IAAI;iBACD,MAAM,CAAC,gBAAgB,CAAC;iBACxB,IAAI,CAAC,IAAI,EAAE,eAAe,CAAC;iBAC3B,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;;YAG3B,MAAM,SAAS,GAAG;gBAChB;oBACE,EAAE,EAAE,CAAC;oBACL,KAAK,EAAE,GAAG;iBACX;gBACD;oBACE,EAAE,EAAE,CAAC;oBACL,KAAK,EAAE,IAAI;iBACZ;aACF,CAAC;YAEF,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACzC,IAAI;qBACD,MAAM,CAAC,UAAU,CAAC;qBAClB,IAAI,CAAC,QAAQ,EAAE,YAAY,GAAG,CAAC,CAAC;qBAChC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;qBACb,IAAI,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;aAChC;YAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACzC,IAAI;qBACD,MAAM,CAAC,qBAAqB,CAAC;qBAC7B,IAAI,CAAC,QAAQ,EAAE,aAAa,GAAG,CAAC,CAAC;qBACjC,IAAI,CAAC,IAAI,EAAE,YAAY,GAAG,CAAC,CAAC;qBAC5B,MAAM,CAAC,SAAS,CAAC;qBACjB,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC;qBACtB,IAAI,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;aACtC;YAED,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;YAErC,KAAK,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,eAAe,CAAC,CAAC;YAExD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACzC,KAAK,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,aAAa,GAAG,CAAC,CAAC,CAAC;aAC3D;SACF,CAAC;KAlHc;IAoHhB,QAAQ,CAAC,IAAY,EAAE,MAAc;QACnC,IAAIA,QAAM,CAAC;QAEX,QAAQ,IAAI;YACV,KAAK,QAAQ;gBACXA,QAAM,GAAGC,MAAS,CAAC,MAAM,CAAC,CAAC;gBAC3B,MAAM;YACR,KAAK,MAAM;gBACTD,QAAM,GAAGE,UAAa,CAAC,MAAM,CAAC,CAAC;gBAC/B,MAAM;YACR;gBACEF,QAAM,GAAG,IAAI,CAAC;gBACd,MAAM;SACT;QAED,OAAOA,QAAM,CAAC;KACf;;;;YA/MF,UAAU,SAAC;gBACV,UAAU,EAAE,MAAM;aACnB;;;;MCwBY,uBAAuB;IAiElC,YAAoB,QAA4B,EAAU,QAAoB;QAA1D,aAAQ,GAAR,QAAQ,CAAoB;QAAU,aAAQ,GAAR,QAAQ,CAAY;QA/D9E,eAAU,GAAG,IAAI,CAAC;QAGlB,aAAQ,GAAG,IAAI,CAAC;QAMhB,UAAK,GAAG,GAAG,CAAC;QAGZ,SAAI,GAAoB,KAAK,CAAC;QAG9B,eAAU,GAAG,KAAK,CAAC;QAGnB,0BAAqB,GAAW,IAAI,CAAC;QAGrC,4BAAuB,GAAG,EAAE,CAAC;QAG7B,4BAAuB,GAAG,EAAE,CAAC;QAG7B,2BAAsB,GAAW,IAAI,CAAC;QAGtC,6BAAwB,GAAG,EAAE,CAAC;QAG9B,6BAAwB,GAAG,EAAE,CAAC;QAM9B,YAAO,GAAyB,IAAI,YAAY,EAAU,CAAC;QAG3D,YAAO,GAAyB,IAAI,YAAY,EAAU,CAAC;QAEnD,gBAAW,GAAG,EAAE,CAAC;QA2FzB,gBAAW,GAAG,CAAC,QAAQ,GAAG,IAAI;;YAE5B,IAAI,CAAC,GAAG;iBACL,SAAS,CAAC,MAAM,CAAC;iBACjB,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACzB,IAAI,CACH,KAAK;gBACH,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;gBAElC,IAAI;qBACD,IAAI,CAAC,CAAC,CAAM,MAAM,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC;qBACpD,IAAI,CAAC,MAAM,EAAE,CAAC,CAAM,KAAK,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;qBACvD,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC;qBACtB,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK;oBAChB,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;iBAClC,CAAC,CAAC;gBAEL,IAAI,IAAI,CAAC,IAAI,KAAK,KAAK,EAAE;oBACvB,IAAI;yBACD,KAAK,CAAC,QAAQ,EAAE,MAAM,CAAC;yBACvB,KAAK,CAAC,cAAc,EAAE,CAAC,CAAC;yBACxB,KAAK,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAAC;iBACvC;gBAED,IAAI,CAAC,IAAI,CAAC,IAAI,IACZ,IAAI;qBACD,UAAU,EAAE;qBACZ,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,MAAM,QAAQ,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC;qBAC3C,SAAS,CAAC,GAAG,EAAE,IAAI,CAAC,aAAa,CAAC,CACtC,CAAC;gBAEF,OAAO,IAAI,CAAC;aACb,EACD,MAAM;gBACJ,IAAI,CAAC,WAAW,EAAE,CAAC;gBAEnB,MAAM;qBACH,IAAI,CAAC,CAAC,CAAM,MAAM,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC;qBACpD,IAAI,CAAC,MAAM,IACV,MAAM;qBACH,UAAU,EAAE;qBACZ,QAAQ,CAAC,GAAG,CAAC;qBACb,SAAS,CAAC,GAAG,EAAE,IAAI,CAAC,QAAQ,CAAC,CACjC,CAAC;gBACJ,OAAO,MAAM,CAAC;aACf,EACD,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE,CACtB;iBACA,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK;gBAClC,IAAI,CAAC,aAAa,CAACG,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;;aAElD,CAAC;iBACD,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK;gBAClC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,CAAC;gBAC1C,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC;aACrC,CAAC;iBACD,EAAE,CAAC,UAAU,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK;gBACjC,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;gBACtC,IAAI,CAAC,WAAW,EAAE,CAAC;aACpB,CAAC;iBACD,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK;gBAC9B,IAAI,CAAC,SAAS,CAACA,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;aAC9C,CAAC,CAAC;;YAGL,IAAI,CAAC,KAAK;iBACP,MAAM,CAAC,SAAS,CAAC;iBACjB,SAAS,CAAC,cAAc,CAAC;iBACzB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;iBACf,IAAI,CACH,KAAK;gBACH,MAAM,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;gBAE3D,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC;qBACd,IAAI,CAAC,OAAO,EAAE,YAAY,CAAC;qBAC3B,KAAK,CAAC,kBAAkB,EAAE,CAAC,CAAM,KAAK,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBAEnE,MAAM,WAAW,GAAG,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,oBAAoB,CAAC,CAAC;gBAE1E,WAAW;qBACR,MAAM,CAAC,MAAM,CAAC;qBACd,IAAI,CAAC,OAAO,EAAE,cAAc,CAAC;qBAC7B,IAAI,CAAC,CAAC,CAAM;oBACX,QAAQ,IAAI,CAAC,qBAAqB;wBAChC,KAAK,MAAM;4BACT,MAAM,UAAU,GAAGC,QAAW,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;4BACxC,OAAO,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;wBAE5C;4BACE,OAAO,CAAC,CAAC,KAAK,CAAC;qBAClB;iBACF,CAAC,CAAC;gBAEL,WAAW;qBACR,MAAM,CAAC,MAAM,CAAC;qBACd,IAAI,CAAC,OAAO,EAAE,cAAc,CAAC;qBAC7B,IAAI,CAAC,CAAC,CAAM,KAAK,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBAErD,OAAO,EAAE,CAAC;aACX,EACD,MAAM;gBACJ,MAAM,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,kBAAkB,EAAE,CAAC,CAAM,KAAK,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBAEhG,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,CAAC,CAAM;oBACzC,QAAQ,IAAI,CAAC,qBAAqB;wBAChC,KAAK,MAAM;4BACT,MAAM,UAAU,GAAGA,QAAW,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;4BACxC,OAAO,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;wBAE5C;4BACE,OAAO,CAAC,CAAC,KAAK,CAAC;qBAClB;iBACF,CAAC,CAAC;gBAEH,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,CAAC,CAAM,KAAK,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBAEjF,OAAO,MAAM,CAAC;aACf,EACD,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE,CACtB;iBAEA,EAAE,CAAC,iBAAiB,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK;gBACxC,IAAI,CAAC,oBAAoB,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;gBAC9C,IAAI,CAAC,aAAa,CAACD,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;aAClD,CAAC;iBACD,EAAE,CAAC,eAAe,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK;gBACtC,IAAI,CAAC,kBAAkB,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;gBAC5C,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;aACvC,CAAC;iBACD,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK;gBAC9B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAEA,OAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;aACpD,CAAC,CAAC;SACN,CAAC;QAEM,kBAAa,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK;YACzC,MAAM,CAAC,GAAGE,WAAc,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;YACzD,OAAO,CAAC;gBACN,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gBACrB,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;aACvB,CAAC;SACH,CAAC;QAEM,aAAQ,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK;;YAEpC,MAAM,CAAC,GAAGA,WAAc,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,CAAC;YAExD,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/B,OAAO,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAC5B,CAAC;QAEM,iBAAY,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK;YACxC,MAAM,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE,EAAE,UAAU,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC;YACzG,MAAM,CAAC,GAAGA,WAAc,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;YAEpC,OAAO,CAAC;gBACN,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aACvB,CAAC;SACH,CAAC;QAEM,sBAAiB,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK;YAC7C,MAAM,CAAC,GAAGA,WAAc,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;YAE5E,OAAO,CAAC;gBACN,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gBACxB,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;aACvB,CAAC;SACH,CAAC;QAEM,qBAAgB,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK;YAC5C,MAAM,CAAC,GAAGA,WAAc,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;YAC7D,OAAO,CAAC;gBACN,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gBACxB,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;aACvB,CAAC;SACH,CAAC;QAEM,yBAAoB,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK;YAChD,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,cAAc,CAAC;iBACzB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;SAC9B,CAAC;QAEM,uBAAkB,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK;YAC9C,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;SACjE,CAAC;QAEM,kBAAa,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YAChD,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;YAC9C,MAAM,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC,CAAC;YAEnD,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,cAAc,CAAC;iBACzB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7B,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE/D,KAAK;iBACF,UAAU,EAAE;iBACZ,QAAQ,CAAC,GAAG,CAAC;iBACb,KAAK,CAAC,CAAC,CAAC;iBACR,SAAS,CAAC,GAAG,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;YAE1C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;gBAChB,KAAK,EAAE,KAAK;gBACZ,IAAI,EAAE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI;aACnC,CAAC,CAAC;SACJ,CAAC;QAEM,iBAAY,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK;YACxC,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;YAC9C,MAAM,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC,CAAC;YAEnD,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,cAAc,CAAC;iBACzB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YAE9B,MAAM,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YAElC,KAAK;iBACF,UAAU,EAAE;iBACZ,QAAQ,CAAC,GAAG,CAAC;iBACb,KAAK,CAAC,CAAC,CAAC;iBACR,SAAS,CAAC,GAAG,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;SAC1C,CAAC;QAEM,cAAS,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YAC5C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;gBAChB,KAAK,EAAE,KAAK;gBACZ,IAAI,EAAE,IAAI,CAAC,IAAI;aAChB,CAAC,CAAC;SACJ,CAAC;QAEM,gBAAW,GAAG,CAAC,IAAI,EAAE,IAAI;YAC/B,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;YAE9B,MAAM,UAAU,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,KAAK,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;YACrE,IAAI,KAAK,CAAC;YAEV,QAAQ,IAAI,CAAC,sBAAsB;gBACjC,KAAK,MAAM;oBACT,MAAM,UAAU,GAAGD,QAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBAChD,KAAK,GAAG,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,CAAC;oBAC5C,MAAM;gBAER;oBACE,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;aAC3B;YAED,IAAI,CAAC,OAAO,CAAC,IAAI,CACf;qCAC+B,KAAK;qCACL,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC;OACjE,CACF,CAAC;YAEF,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SAClC,CAAC;QAEM,gBAAW,GAAG,IAAI;YACxB,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;SAC/B,CAAC;QAEM,gBAAW,GAAG;YACpB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SAClC,CAAC;QAEM,uBAAkB,GAAG,IAAI;YAC/B,MAAM,WAAW,GAAGE,KAAQ,CAAC,IAAI,CAAC,CAAC;YAEnC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,EAAE,GAAG,WAAW,CAAC,CAAC,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;YACvD,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,WAAW,CAAC,CAAC,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;SACvD,CAAC;KA1VgF;IAElF,QAAQ;QACN,IAAI,CAAC,MAAM,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC;QAC3D,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;QAC/D,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;QAChE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QACnE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,CAAC;QAC3D,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QACzD,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,iBAAiB,GAAGL,QAAS,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;QACjE,IAAI,CAAC,kBAAkB,GAAGA,QAAS,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;;QAGnE,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAC1G,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAsB,EAAE,IAAI,CAAC,wBAAwB,CAAC,CAAC;QAE7G,IAAI,CAAC,UAAU,GAAGM,YAAe,EAAE;aAChC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;aAClB,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;QAEvC,IAAI,IAAI,CAAC,IAAI,KAAK,KAAK,EAAE;YACvB,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;YACrB,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;SACnB;QAED,IAAI,CAAC,GAAG,GAAGC,GAAM,EAAE;aAChB,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC;aACvB,KAAK,CAAC,CAAC,CAAM,KAAK,CAAC,CAAC,KAAK,CAAC;aAC1B,IAAI,CAAC,IAAI,CAAC,CAAC;QAEd,IAAI,CAAC,GAAG,GAAGC,GAAM,EAAE;aAChB,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC;aAC3B,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAEjC,IAAI,CAAC,KAAK,GAAGC,MAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;QAEhF,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK;aAClB,MAAM,CAAC,KAAK,CAAC;aACb,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC;aACzB,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC;aAC3B,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;aAC1B,IAAI,CAAC,qBAAqB,EAAE,eAAe,CAAC;aAC5C,IAAI,CACH,SAAS,EACT,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,MAAM,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,IAAI,CAAC,KAAK;YACvF,IAAI,CAAC,MAAM,CAAC,IAAI;YAChB,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAC5E,CAAC;QAEJ,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,qBAAqB,CAAC,CAAC;QAE7D,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK;aACtB,MAAM,CAAC,KAAK,CAAC;aACb,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC;aACnB,IAAI,CAAC,OAAO,EAAE,cAAc,CAAC;aAC7B,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;QAE/B,IAAI,CAAC,WAAW,EAAE,CAAC;KACpB;IAED,WAAW,CAAC,OAAsB;QAChC,IAAI,OAAO,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE;YAC7C,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;SACzB;KACF;IAED,WAAW;QACT,IAAI,IAAI,CAAC,OAAO;YAAE,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;KACzC;;;YA7IF,SAAS,SAAC;gBACT,QAAQ,EAAE,kBAAkB;gBAC5B,QAAQ,EAAE,EAAE;gBAEZ,eAAe,EAAE,uBAAuB,CAAC,MAAM;aAChD;;;YARQ,kBAAkB;YAjBzB,UAAU;;;yBA2BT,WAAW,SAAC,kBAAkB;uBAG9B,WAAW,SAAC,sBAAsB;mBAGlC,KAAK;oBAGL,KAAK;mBAGL,KAAK;yBAGL,KAAK;oCAGL,KAAK;sCAGL,KAAK;sCAGL,KAAK;qCAGL,KAAK;uCAGL,KAAK;uCAGL,KAAK;oBAGL,KAAK;sBAGL,MAAM;sBAGN,MAAM;;;MC1CI,uBAAuB;IAmJlC,YACU,QAA4B,EAC5B,QAAoB,EACpB,OAAyB,EACzB,SAAmB;QAHnB,aAAQ,GAAR,QAAQ,CAAoB;QAC5B,aAAQ,GAAR,QAAQ,CAAY;QACpB,YAAO,GAAP,OAAO,CAAkB;QACzB,cAAS,GAAT,SAAS,CAAU;QArJ7B,eAAU,GAAG,IAAI,CAAC;QAGlB,aAAQ,GAAG,IAAI,CAAC;QAMhB,UAAK,GAAG,GAAG,CAAC;QAGZ,WAAM,GAAG,GAAG,CAAC;QAGb,SAAI,GAAwC,QAAQ,CAAC;QAGrD,iBAAY,GAAG,KAAK,CAAC;QAGrB,oBAAe,GAAsB,IAAI,CAAC;QAG1C,sBAAiB,GAAG,EAAE,CAAC;QAGvB,eAAU,GAAkB,IAAI,CAAC;QAGjC,oBAAe,GAAsB,IAAI,CAAC;QAG1C,sBAAiB,GAAG,EAAE,CAAC;QAGvB,eAAU,GAAG,CAAC,CAAC;QAGf,mBAAc,GAAG,IAAI,CAAC;QAGtB,mBAAc,GAAG,IAAI,CAAC;QAGtB,eAAU,GAAG,KAAK,CAAC;QAGnB,gBAAW,GAAG,GAAG,GAAG,EAAE,CAAC;QAGvB,mBAAc,GAAuB,OAAO,CAAC;QAG7C,0BAAqB,GAAsB,IAAI,CAAC;QAGhD,4BAAuB,GAAG,EAAE,CAAC;QAG7B,2BAAsB,GAAsB,IAAI,CAAC;QAGjD,6BAAwB,GAAG,EAAE,CAAC;QAG9B,2BAAsB,GAAsB,IAAI,CAAC;QAGjD,6BAAwB,GAAG,EAAE,CAAC;QAG9B,cAAS,GAAG,EAAE,CAAC;QAGf,gBAAW,GAAG,CAAC,CAAC;QAGhB,iBAAY,GAAG,EAAE,CAAC;QAGlB,eAAU,GAAG,EAAE,CAAC;QAGhB,cAAS,GAAG,IAAI,CAAC;QAGjB,mBAAc,GAAG,WAAW,CAAC;QAG7B,YAAO,GAAG,IAAI,CAAC;QAGf,iBAAY,GAAG,SAAS,CAAC;QAMzB,YAAO,GAAyB,IAAI,YAAY,EAAU,CAAC;QAG3D,YAAO,GAAyB,IAAI,YAAY,EAAU,CAAC;QAkU3D,gBAAW,GAAG;;YAEZ,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;;YAGpD,IAAI,CAAC,UAAU;iBACZ,MAAM,CAAC;gBACNC,GAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC;gBAChEC,GAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC;aACjE,CAAC;iBACD,UAAU,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;iBAC5B,IAAI,EAAE,CAAC;YAEV,IAAI,CAAC,KAAK;iBACP,UAAU,EAAE;iBACZ,QAAQ,CAAC,IAAI,CAAC;iBACd,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAExB,IAAI,CAAC,KAAK;iBACP,UAAU,EAAE;iBACZ,QAAQ,CAAC,IAAI,CAAC;iBACd,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;YAGxB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBACnB,IAAI,CAAC,KAAK;qBACP,UAAU,EAAE;qBACZ,QAAQ,CAAC,IAAI,CAAC;qBACd,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aACzB;YAED,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBACnB,IAAI,CAAC,KAAK;qBACP,UAAU,EAAE;qBACZ,QAAQ,CAAC,IAAI,CAAC;qBACd,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aACzB;YAED,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;;gBAEtB,IAAI,CAAC,GAAG;qBACL,SAAS,CAAC,WAAW,CAAC;qBACtB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;qBACf,IAAI,CACH,KAAK,IACH,KAAK;qBACF,MAAM,CAAC,MAAM,CAAC;qBACd,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC;qBACzB,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;qBACjB,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;qBACxC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;qBAC1C,IAAI,CAAC,KAAK,IACT,KAAK;qBACF,UAAU,EAAE;qBACZ,QAAQ,CAAC,GAAG,CAAC;qBACb,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAC/B,EACL,MAAM,IACJ,MAAM;qBACH,UAAU,EAAE;qBACZ,QAAQ,CAAC,IAAI,CAAC;qBACd,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;qBACxC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC,EAC/C,IAAI,IACF,IAAI;qBACD,UAAU,EAAE;qBACZ,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;qBAC9B,MAAM,EAAE,CACd,CAAC;;gBAGJ,IAAI,CAAC,GAAG;qBACL,SAAS,CAAC,MAAM,CAAC;qBACjB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;qBACf,IAAI,CACH,KAAK,IACH,KAAK;qBACF,MAAM,CAAC,MAAM,CAAC;qBACd,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC;qBACpB,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,aAAa,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC;qBACjG,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;qBAC1E,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;qBAC9C,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC;qBACtB,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;qBACjB,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;qBAC9B,IAAI,CAAC,KAAK,IACT,KAAK;qBACF,UAAU,EAAE;qBACZ,QAAQ,CAAC,IAAI,CAAC;qBACd,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;qBACxC,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;qBAC3D,IAAI,CAAC,YAAY,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;qBACjD,UAAU,EAAE;qBACZ,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAClC,EACL,MAAM,IACJ,MAAM;qBACH,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;qBAC9B,UAAU,EAAE;qBACZ,QAAQ,CAAC,IAAI,CAAC;qBACd,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;qBAC1E,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;qBAC9C,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;qBAC3D,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;qBACxC,UAAU,EAAE;qBACZ,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC,EACnC,IAAI,IACF,IAAI;qBACD,UAAU,EAAE;qBACZ,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;qBAC9B,MAAM,EAAE,CACd;qBACA,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,YAAY,CAACT,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;qBACxF,EAAE,CAAC,UAAU,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,WAAW,EAAE,CAAC;qBAC1D,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,aAAa,CAACA,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;aAC1F;iBAAM;;gBAEL,IAAI,CAAC,GAAG;qBACL,SAAS,CAAC,MAAM,CAAC;qBACjB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;qBACf,IAAI,CACH,KAAK,IACH,KAAK;qBACF,MAAM,CAAC,MAAM,CAAC;qBACd,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC;qBACpB,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,aAAa,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC;qBACjG,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,GAAG,GAAG,CAAC;qBAC5E,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,GAAG,GAAG,CAAC;qBAChD,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC;qBACtB,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;qBACjB,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;qBAC9B,IAAI,CAAC,KAAK,IACT,KAAK;qBACF,UAAU,EAAE;qBACZ,QAAQ,CAAC,IAAI,CAAC;qBACd,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;qBACxC,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;qBAC3D,IAAI,CAAC,YAAY,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;qBACjD,UAAU,EAAE;qBACZ,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAClC,EACL,MAAM,IACJ,MAAM;qBACH,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;qBAC9B,UAAU,EAAE;qBACZ,QAAQ,CAAC,IAAI,CAAC;qBACd,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,GAAG,GAAG,CAAC;qBAC5E,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,GAAG,GAAG,CAAC;qBAChD,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;qBAC3D,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;qBACxC,UAAU,EAAE;qBACZ,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC,EACnC,IAAI,IACF,IAAI;qBACD,UAAU,EAAE;qBACZ,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;qBAC9B,MAAM,EAAE,CACd;qBACA,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,YAAY,CAACA,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;qBACxF,EAAE,CAAC,UAAU,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,WAAW,EAAE,CAAC;qBAC1D,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,aAAa,CAACA,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;aAC1F;YAED,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;gBACpB,IAAI,CAAC,KAAK;qBACP,MAAM,CAAC,SAAS,CAAC;qBACjB,SAAS,CAAC,cAAc,CAAC;qBACzB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;qBACf,IAAI,CACH,KAAK;oBACH,MAAM,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,EAAE,kBAAkB,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;oBAE/E,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC;yBACd,IAAI,CAAC,OAAO,EAAE,YAAY,CAAC;yBAC3B,KAAK,CAAC,kBAAkB,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;oBAE5D,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC;yBACd,IAAI,CAAC,OAAO,EAAE,cAAc,CAAC;yBAC7B,IAAI,CAAC,CAAC;wBACL,QAAQ,IAAI,CAAC,qBAAqB;4BAChC,KAAK,QAAQ;gCACX,OAAO,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;4BAEzC,KAAK,MAAM;gCACT,MAAM,UAAU,GAAGC,QAAW,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;gCACxC,OAAO,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;4BAE5C;gCACE,OAAO,CAAC,CAAC,KAAK,CAAC;yBAClB;qBACF,CAAC,CAAC;oBAEL,OAAO,EAAE,CAAC;iBACX,EACD,MAAM,IACJ,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,CAAC;oBACnC,QAAQ,IAAI,CAAC,qBAAqB;wBAChC,KAAK,QAAQ;4BACX,OAAO,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;wBAEzC,KAAK,MAAM;4BACT,MAAM,UAAU,GAAGA,QAAW,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;4BACxC,OAAO,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;wBAE5C;4BACE,OAAO,CAAC,CAAC,KAAK,CAAC;qBAClB;iBACF,CAAC,EACJ,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE,CACtB;qBACA,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,eAAe,CAACD,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;qBAC3F,EAAE,CAAC,UAAU,EAAE,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;qBAC3C,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,gBAAgB,CAACA,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;aAC7F;YAED,IAAI,IAAI,CAAC,SAAS,EAAE;gBAClB,IAAI,CAAC,UAAU;qBACZ,KAAK,EAAE;qBACP,UAAU,EAAE;qBACZ,QAAQ,CAAC,IAAI,CAAC;qBACd,IAAI,CAAC,WAAW,EAAE,iBAAiB,IAAI,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;aAC5E;YAED,IAAI,IAAI,CAAC,OAAO,EAAE;gBAChB,IAAI,CAAC,QAAQ;qBACV,KAAK,EAAE;qBACP,UAAU,EAAE;qBACZ,QAAQ,CAAC,IAAI,CAAC;qBACd,IAAI,CAAC,WAAW,EAAE,iBAAiB,IAAI,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;aAC1E;SACF,CAAC;QAEF,iBAAY,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YACvC,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,MAAM,CAAC;iBACjB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7B,MAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC,CAAC;YAEvE,MAAM,QAAQ,GAAG,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAExC,GAAG,CAAC,KAAK,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;YAE5B,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,cAAc,CAAC;iBACzB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7B,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAE/D,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEF,gBAAW,GAAG;YACZ,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,MAAM,CAAC;iBACjB,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC;iBAC1B,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YAEvB,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YAEhE,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB,CAAC;QAEF,kBAAa,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YACxC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEF,oBAAe,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YAC1C,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,cAAc,CAAC;iBACzB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7B,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,MAAM,CAAC;iBACjB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7B,MAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC,CAAC;YAEvE,MAAM,QAAQ,GAAG,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAExC,GAAG,CAAC,KAAK,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;YAE5B,IAAI,CAAC,WAAW,CACd,IAAI,EACJ,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,MAAM,CAAC;iBACjB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,IAAI,EAAE,CACV,CAAC;YAEF,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEF,mBAAc,GAAG;YACf,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YAEhE,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,MAAM,CAAC;iBACjB,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC;iBAC1B,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YAEvB,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB,CAAC;QAEF,qBAAgB,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YAC3C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEM,gBAAW,GAAG,CAAC,IAAI,EAAE,IAAI;YAC/B,MAAM,UAAU,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAChD,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC;YAChD,IAAI,KAAK,CAAC;YAEV,QAAQ,IAAI,CAAC,sBAAsB;gBACjC,KAAK,QAAQ;oBACX,KAAK,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBAC5C,MAAM;gBAER,KAAK,MAAM;oBACT,MAAM,UAAU,GAAGC,QAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBAC3C,KAAK,GAAG,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,CAAC;oBAC5C,MAAM;gBAER;oBACE,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;aACtB;YACD,MAAM,KAAK,GACT,IAAI,CAAC,kBAAkB,KAAK,IAAI;kBAC5B,8BAA8B,IAAI,CAAC,KAAK,QAAQ;kBAChD,8BAA8B,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;YAEhF,IAAI,CAAC,OAAO,CAAC,IAAI,CACf;UACI,IAAI,CAAC,gBAAgB,GAAG,EAAE,GAAG,GAAG,KAAK,EAAE;UACvC,KAAK;OACR,CACF,CAAC;YAEF,MAAM,kBAAkB,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,WAAW,GAAG,CAAC,CAAC;YAChE,MAAM,mBAAmB,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,YAAY,GAAG,CAAC,CAAC;YAElE,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,GAAG,GAAG,mBAAmB,IAAI,CAAC,CAAC;YACrF,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,GAAG,kBAAkB,GAAG,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC;YAC9G,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SAClC,CAAC;QAEM,gBAAW,GAAG;YACpB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SAClC,CAAC;QAEM,mBAAc,GAAG,IAAI;YAC3B,QAAQ,IAAI,CAAC,eAAe;gBAC1B,KAAK,QAAQ;oBACX,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;gBAEhC,KAAK,MAAM;oBACT,MAAM,SAAS,GAAGA,QAAW,CAAC,IAAI,CAAC,CAAC;oBACpC,OAAO,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;gBAErC;oBACE,OAAO,IAAI,CAAC;aACf;SACF,CAAC;QAEM,mBAAc,GAAG,IAAI;YAC3B,QAAQ,IAAI,CAAC,eAAe;gBAC1B,KAAK,QAAQ;oBACX,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;gBAEhC,KAAK,MAAM;oBACT,MAAM,SAAS,GAAGA,QAAW,CAAC,IAAI,CAAC,CAAC;oBACpC,OAAO,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;gBAErC;oBACE,OAAO,IAAI,CAAC;aACf;SACF,CAAC;KA9oBE;IAEJ,QAAQ;QACN,IAAI,CAAC,MAAM,GAAG;YACZ,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS;YACpB,KAAK,EAAE,CAAC,IAAI,CAAC,WAAW;YACxB,MAAM,EAAE,CAAC,IAAI,CAAC,YAAY;YAC1B,IAAI,EAAE,CAAC,IAAI,CAAC,UAAU;SACvB,CAAC;;QAGF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACxF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACxF,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAC1G,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAsB,EAAE,IAAI,CAAC,wBAAwB,CAAC,CAAC;QAC7G,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAsB,EAAE,IAAI,CAAC,wBAAwB,CAAC,CAAC;;QAG7G,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC3B,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC3B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;QAC5B,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,UAAU,GAAG,EAAE,GAAG,CAAC,CAAC;QACjD,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;QAC5B,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAE9B,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO,EAAE;;YAEzB,QAAQ,IAAI,CAAC,IAAI;gBACf,KAAK,KAAK;oBACR,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;oBACzB,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC;oBAClC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;oBAC3B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;oBACtB,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;oBAC7B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;oBAC3B,IAAI,CAAC,cAAc,GAAG,QAAQ,CAAC;oBAC/B,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;oBAC7B,MAAM;gBAER,KAAK,QAAQ;oBACX,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;oBAC5B,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC;oBAClC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;oBACtB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;oBAC3B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;oBAC5B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;oBAC3B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;oBACtB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;oBAC7B,MAAM;gBAER,KAAK,MAAM;oBACT,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;oBACtB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;oBAC5B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;oBACtB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;oBAC5B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;oBAC3B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;oBACtB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;oBACvB,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;oBAC9B,MAAM;aACT;;YAGD,IAAI,IAAI,CAAC,YAAY,EAAE;gBACrB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;gBACvB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gBACtB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gBACtB,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;aAC/B;SACF;;QAGD,IAAI,IAAI,CAAC,SAAS;YAAE,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,EAAE,CAAC;QAE5C,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,cAAc,KAAK,OAAO,EAAE;YACvD,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC;SAC9C;;QAGD,IAAI,CAAC,KAAK,GAAGM,MAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;;QAGhF,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK;aAClB,MAAM,CAAC,KAAK,CAAC;aACb,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC;aAC1B,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,gBAAgB,CAAC;aAC3F,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;aAC1B,IAAI,CAAC,qBAAqB,EAAE,eAAe,CAAC;aAC5C,IAAI,CACH,SAAS,EACT,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,MAAM;YACrE,IAAI,CAAC,MAAM,CAAC,GAAG;YACf,IAAI,CAAC,MAAM,CAAC,MAAM;YAClB,IAAI,CAAC,gBAAgB,EAAE,CAC1B,CAAC;;QAGJ,IAAI,CAAC,UAAU,GAAGH,YAAe,EAAE,CAAC,KAAK,CACvC,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,KAAK,CAAC,CAC1E,CAAC;;QAGF,IAAI,CAAC,UAAU,GAAGM,SAAY,EAAE;aAC7B,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC;aACnC,UAAU,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;aAC9C,KAAK,CAAC,CAAC,CAAC,CAAC;;QAGZ,CAAC,IAAI,CAAC,YAAY;cACd,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;cACjD,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;QAEpD,IAAI,CAAC,SAAS,GAAGC,UAAa,CAAC,IAAI,CAAC,UAAU,CAAC;aAC5C,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC;aAC5B,aAAa,CAAC,IAAI,CAAC,kBAAkB,CAAC;aACtC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAEnC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;aAClB,MAAM,CAAC,GAAG,CAAC;aACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;aAC5B,IAAI,CAAC,WAAW,EAAE,gBAAgB,IAAI,CAAC,MAAM,GAAG,CAAC;aACjD,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC;aACtC,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;aAC/C,OAAO,CAAC,oBAAoB,EAAE,IAAI,CAAC,eAAe,CAAC;aACnD,OAAO,CAAC,mBAAmB,EAAE,IAAI,CAAC,cAAc,CAAC;aACjD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;QAGxB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,SAAS,GAAGA,UAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAEvE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;iBAClB,MAAM,CAAC,GAAG,CAAC;iBACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;iBAC5B,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;iBAC/C,IAAI,CAAC,WAAW,EAAE,gBAAgB,IAAI,CAAC,MAAM,GAAG,CAAC;iBACjD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACzB;;QAGD,IAAI,IAAI,CAAC,UAAU,EAAE;YACnB,IAAI,CAAC,GAAG;iBACL,MAAM,CAAC,MAAM,CAAC;iBACd,IAAI,CAAC,OAAO,EAAE,YAAY,CAAC;iBAC3B,IAAI,CAAC,aAAa,EAAE,QAAQ,CAAC;iBAC7B,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;iBAC5C,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,IAAI,CAAC,SAAS,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;iBACpE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SAC1B;;QAGD,IAAI,CAAC,UAAU,GAAGC,WAAc,EAAE;aAC/B,MAAM,CAAC;YACNJ,GAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC;YAChEC,GAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC;SACjE,CAAC;aACD,IAAI,EAAE;aACN,UAAU,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;QAEhC,IAAI,CAAC,SAAS,GAAGI,QAAW,CAAC,IAAI,CAAC,UAAU,CAAC;aAC1C,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC;aACtB,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC;aAC5B,aAAa,CAAC,IAAI,CAAC,kBAAkB,CAAC;aACtC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAEnC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;aAClB,MAAM,CAAC,GAAG,CAAC;aACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;aAC5B,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC;aACtC,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;aAC/C,OAAO,CAAC,oBAAoB,EAAE,IAAI,CAAC,eAAe,CAAC;aACnD,OAAO,CAAC,mBAAmB,EAAE,IAAI,CAAC,cAAc,CAAC;aACjD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;QAGxB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,SAAS,GAAGA,QAAW,CAAC,IAAI,CAAC,UAAU,CAAC;iBAC1C,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC;iBACtB,QAAQ,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YAEhE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;iBAClB,MAAM,CAAC,GAAG,CAAC;iBACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;iBAC5B,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;iBAC/C,IAAI,CAAC,WAAW,EAAE,iBAAiB,CAAC;iBACpC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACzB;;QAGD,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG;iBACvB,MAAM,CAAC,MAAM,CAAC;iBACd,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;iBAC1B,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;iBAC9D,IAAI,CAAC,WAAW,EAAE,iBAAiB,IAAI,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;SAC5E;;QAGD,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG;iBACrB,MAAM,CAAC,MAAM,CAAC;iBACd,IAAI,CAAC,OAAO,EAAE,SAAS,CAAC;iBACxB,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;iBAC9D,IAAI,CAAC,WAAW,EAAE,iBAAiB,IAAI,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;SAC1E;;QAGD,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACrB,IAAI,CAAC,OAAO,GAAGN,MAAS,CAAC,MAAM,CAAC;iBAC7B,MAAM,CAAC,KAAK,CAAC;iBACb,IAAI,CAAC,OAAO,EAAE,oBAAoB,CAAC;iBACnC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC;iBACnB,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;SAChC;;QAGD,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACpB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,0BAA0B,EAAE,IAAI,CAAC,cAAc,KAAK,QAAQ,GAAG,IAAI,GAAG,KAAK,CAAC,CAAC;YAChG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,iBAAiB,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC;SAC/E;;QAGD,IAAI,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACpC,IAAI,CAAC,KAAK;iBACP,MAAM,CAAC,SAAS,CAAC;iBACjB,MAAM,CAAC,IAAI,CAAC;iBACZ,IAAI,CAAC,OAAO,EAAE,8BAA8B,CAAC;iBAC7C,IAAI,CAAC;gBACJ,OAAO;;uCAEsB,IAAI,CAAC,YAAY;SAC/C,CAAC;aACD,CAAC,CAAC;SACN;;QAGD,IAAI,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACtC,IAAI,CAAC,KAAK;iBACP,MAAM,CAAC,SAAS,CAAC;iBACjB,MAAM,CAAC,IAAI,CAAC;iBACZ,IAAI,CAAC,OAAO,EAAE,gCAAgC,CAAC;iBAC/C,IAAI,CAAC;gBACJ,OAAO;;uCAEsB,IAAI,CAAC,cAAc;SACjD,CAAC;aACD,CAAC,CAAC;SACN;QAED,IAAI,CAAC,WAAW,EAAE,CAAC;KACpB;IAED,WAAW,CAAC,OAAsB;QAChC,IAAI,OAAO,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE;YAC7C,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;KACF;IAED,WAAW;QACT,IAAI,IAAI,CAAC,OAAO;YAAE,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;KACzC;;;YA9aF,SAAS,SAAC;gBACT,QAAQ,EAAE,kBAAkB;gBAC5B,QAAQ,EAAE,EAAE;gBAEZ,eAAe,EAAE,uBAAuB,CAAC,MAAM;aAChD;;;YARQ,kBAAkB;YAfzB,UAAU;YAOH,gBAAgB;YAAE,QAAQ;;;yBAkBhC,WAAW,SAAC,kBAAkB;uBAG9B,WAAW,SAAC,sBAAsB;mBAGlC,KAAK;oBAGL,KAAK;qBAGL,KAAK;mBAGL,KAAK;2BAGL,KAAK;8BAGL,KAAK;gCAGL,KAAK;yBAGL,KAAK;8BAGL,KAAK;gCAGL,KAAK;yBAGL,KAAK;6BAGL,KAAK;6BAGL,KAAK;yBAGL,KAAK;0BAGL,KAAK;6BAGL,KAAK;oCAGL,KAAK;sCAGL,KAAK;qCAGL,KAAK;uCAGL,KAAK;qCAGL,KAAK;uCAGL,KAAK;wBAGL,KAAK;0BAGL,KAAK;2BAGL,KAAK;yBAGL,KAAK;wBAGL,KAAK;6BAGL,KAAK;sBAGL,KAAK;2BAGL,KAAK;oBAGL,KAAK;sBAGL,MAAM;sBAGN,MAAM;;;AC1GT;AACA,IAAI,MAAM,GAAG,CAAC,CAAC;MAQF,wBAAwB;IAmJnC,YACU,QAA4B,EAC5B,QAAoB,EACpB,OAAyB,EACzB,SAAmB;QAHnB,aAAQ,GAAR,QAAQ,CAAoB;QAC5B,aAAQ,GAAR,QAAQ,CAAY;QACpB,YAAO,GAAP,OAAO,CAAkB;QACzB,cAAS,GAAT,SAAS,CAAU;QArJ7B,eAAU,GAAG,IAAI,CAAC;QAGlB,cAAS,GAAG,IAAI,CAAC;QAMjB,UAAK,GAAG,GAAG,CAAC;QAGZ,WAAM,GAAG,GAAG,CAAC;QAGb,SAAI,GAAgC,QAAQ,CAAC;QAG7C,SAAI,GAAG,KAAK,CAAC;QAGb,sBAAiB,GAAG,EAAE,CAAC;QAGvB,eAAU,GAAG,CAAC,CAAC;QAGf,sBAAiB,GAAG,EAAE,CAAC;QAGvB,eAAU,GAAG,CAAC,CAAC;QAGf,mBAAc,GAAG,IAAI,CAAC;QAGtB,mBAAc,GAAG,IAAI,CAAC;QAGtB,cAAS,GAAG,IAAI,CAAC;QAGjB,cAAS,GAAG,IAAI,CAAC;QAGjB,eAAU,GAAG,KAAK,CAAC;QAGnB,gBAAW,GAAG,GAAG,GAAG,EAAE,CAAC;QAGvB,mBAAc,GAAuB,OAAO,CAAC;QAG7C,0BAAqB,GAAsB,IAAI,CAAC;QAGhD,4BAAuB,GAAG,EAAE,CAAC;QAG7B,+BAA0B,GAAG,EAAE,CAAC;QAGhC,2BAAsB,GAAsB,IAAI,CAAC;QAGjD,6BAAwB,GAAG,EAAE,CAAC;QAG9B,2BAAsB,GAAsB,IAAI,CAAC;QAGjD,6BAAwB,GAAG,EAAE,CAAC;QAG9B,cAAS,GAAG,EAAE,CAAC;QAGf,gBAAW,GAAG,EAAE,CAAC;QAGjB,iBAAY,GAAG,EAAE,CAAC;QAGlB,eAAU,GAAG,EAAE,CAAC;QAMhB,YAAO,GAAyB,IAAI,YAAY,EAAU,CAAC;QAG3D,YAAO,GAAyB,IAAI,YAAY,EAAU,CAAC;QAG3D,mBAAc,GAAyB,IAAI,YAAY,EAAU,CAAC;QAGlE,mBAAc,GAAyB,IAAI,YAAY,EAAU,CAAC;QA8TlE,gBAAW,GAAG;YACZ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;YAG/B,IAAI,CAAC,UAAU,CAAC,MAAM,CACpBO,MAAS,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAM,EAAE,CAAC;gBACnC,OAAOb,QAAW,CAAC,CAAC,CAAC,CAAC;aACvB,CAAC,CACH,CAAC;;YAGF,IAAI,CAAC,UAAU;iBACZ,MAAM,CAAC;gBACNO,GAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAM,EAAE,CAAC;oBACjC,MAAM,MAAM,GAAG,CAACA,GAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;oBACjC,OAAO,MAAM,GAAG,MAAM,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC;iBAC/C,CAAC;gBACFC,GAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAM,EAAE,CAAC;oBACjC,MAAM,MAAM,GAAG,CAACA,GAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;oBACjC,OAAO,MAAM,GAAG,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC;iBAC9C,CAAC;aACH,CAAC;iBACD,IAAI,EAAE,CAAC;YAEV,IAAI,CAAC,KAAK;iBACP,UAAU,EAAE;iBACZ,QAAQ,CAAC,IAAI,CAAC;iBACd,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAExB,IAAI,CAAC,KAAK;iBACP,UAAU,EAAE;iBACZ,QAAQ,CAAC,IAAI,CAAC;iBACd,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;YAGxB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBACnB,IAAI,CAAC,KAAK;qBACP,UAAU,EAAE;qBACZ,QAAQ,CAAC,IAAI,CAAC;qBACd,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aACzB;YAED,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBACnB,IAAI,CAAC,KAAK;qBACP,UAAU,EAAE;qBACZ,QAAQ,CAAC,IAAI,CAAC;qBACd,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aACzB;;YAGD,IAAI,CAAC,GAAG;iBACL,SAAS,CAAC,WAAW,CAAC;iBACtB,IAAI,CAAC,QAAQ,EAAE,OAAO,IAAI,CAAC,IAAI,KAAK,MAAM,GAAG,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,QAAQ,GAAG,IAAI,CAAC,CAAC;iBAC1F,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;iBACtB,IAAI,CACH,KAAK;gBACH,KAAK;qBACF,MAAM,CAAC,MAAM,CAAC;qBACd,IAAI,CAAC,WAAW,EAAE,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,cAAc,IAAI,CAAC,UAAU,GAAG,CAAC;qBAC/E,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC;qBACrB,KAAK,CAAC,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;qBAC9C,KAAK,CAAC,cAAc,EAAE,IAAI,CAAC,SAAS,CAAC;qBACrC,IAAI,CAAC,GAAG,EAAE,IAAI;oBACb,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oBACpD,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;iBAC3B,CAAC;qBACD,IAAI,CAAC,KAAK,IACT,KAAK;qBACF,UAAU,EAAE;qBACZ,QAAQ,CAAC,IAAI,CAAC;qBACd,IAAI,CAACM,aAAgB,CAAC;qBACtB,IAAI,CAAC,GAAG,EAAE,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAC/C,CAAC;aACL,EACD,MAAM,IACJ,MAAM,CAAC,IAAI,CAAC,MAAM,IAChB,MAAM;iBACH,UAAU,EAAE;iBACZ,QAAQ,CAAC,IAAI,CAAC;iBACd,IAAI,CAACA,aAAgB,CAAC;iBACtB,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CACzC,EACH,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE,CACtB,CAAC;;YAGJ,IAAI,IAAI,CAAC,IAAI,EAAE;gBACb,IAAI,CAAC,GAAG;qBACL,SAAS,CAAC,WAAW,CAAC;qBACtB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;qBACtB,IAAI,CACH,KAAK,IACH,KAAK;qBACF,MAAM,CAAC,MAAM,CAAC;qBACd,IAAI,CAAC,WAAW,EAAE,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,cAAc,IAAI,CAAC,UAAU,GAAG,CAAC;qBAC/E,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC;qBACrB,IAAI,CAAC,GAAG,EAAE,IAAI;oBACb,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oBACpD,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;iBAC3B,CAAC;qBACD,KAAK,CAAC,OAAO,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;qBAC7C,IAAI,CAAC,KAAK,IACT,KAAK;qBACF,UAAU,EAAE;qBACZ,QAAQ,CAAC,IAAI,CAAC;qBACd,IAAI,CAACA,aAAgB,CAAC;qBACtB,IAAI,CAAC,GAAG,EAAE,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAC/C,EACL,MAAM,IACJ,MAAM,CAAC,IAAI,CAAC,MAAM;oBAChB,OAAO,MAAM;yBACV,UAAU,EAAE;yBACZ,QAAQ,CAAC,IAAI,CAAC;yBACd,IAAI,CAACA,aAAgB,CAAC;yBACtB,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;iBAC1C,CAAC,EACJ,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE,CACtB,CAAC;aACL;;YAGD,IAAI,IAAI,CAAC,UAAU,EAAE;;gBAEnB,IAAI,CAAC,GAAG;qBACL,SAAS,CAAC,UAAU,CAAC;qBACrB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;qBACtB,IAAI,CACH,KAAK,IACH,KAAK;qBACF,MAAM,CAAC,GAAG,CAAC;qBACX,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC;qBACvB,IAAI,CAAC,WAAW,EAAE,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,qBAAqB,IAAI,CAAC,UAAU,GAAG,CAAC;qBACtF,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;qBAElD,SAAS,CAAC,QAAQ,CAAC;qBACnB,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC;qBACnB,IAAI,CACH,KAAK,IACH,KAAK;qBACF,MAAM,CAAC,QAAQ,CAAC;qBAChB,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,IAAI,CAAC,UAAU,CAACd,QAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;qBACtE,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;qBACnC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;qBAC7B,KAAK,CAAC,cAAc,EAAE,IAAI,CAAC,SAAS,CAAC;qBACrC,IAAI,CAAC,KAAK,IACT,KAAK;qBACF,UAAU,EAAE;qBACZ,QAAQ,CAAC,IAAI,CAAC;qBACd,IAAI,CAACc,aAAgB,CAAC;qBACtB,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CACvC,EACL,SAAQ,EACR,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE,CACtB,EACL,MAAM,IACJ,MAAM;qBACH,SAAS,CAAC,QAAQ,CAAC;qBACnB,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC;qBACnB,IAAI,CACH,KAAK,IACH,KAAK;qBACF,MAAM,CAAC,QAAQ,CAAC;qBAChB,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,IAAI,CAAC,UAAU,CAACd,QAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;qBACtE,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;qBACnC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;qBAC7B,KAAK,CAAC,cAAc,EAAE,IAAI,CAAC,SAAS,CAAC,EAC1C,MAAM,IACJ,MAAM,CAAC,IAAI,CAAC,MAAM,IAChB,MAAM;qBACH,UAAU,EAAE;qBACZ,QAAQ,CAAC,IAAI,CAAC;qBACd,IAAI,CAACc,aAAgB,CAAC;qBACtB,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,IAAI,CAAC,UAAU,CAACd,QAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;qBACtE,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CACvC,EACH,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE,CACtB,EACL,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE,CACtB,CAAC;aACL;YAED,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;gBACpB,IAAI,CAAC,KAAK;qBACP,MAAM,CAAC,SAAS,CAAC;qBACjB,SAAS,CAAC,cAAc,CAAC;qBACzB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;qBACtB,IAAI,CACH,KAAK;oBACH,MAAM,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;oBAE3D,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC;yBACd,IAAI,CAAC,OAAO,EAAE,YAAY,CAAC;yBAC3B,KAAK,CAAC,kBAAkB,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;oBAE5D,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC;yBACd,IAAI,CAAC,OAAO,EAAE,cAAc,CAAC;yBAC7B,IAAI,CAAC,CAAC;wBACL,QAAQ,IAAI,CAAC,qBAAqB;4BAChC,KAAK,QAAQ;gCACX,OAAO,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;4BAEzC,KAAK,MAAM;gCACT,MAAM,UAAU,GAAGA,QAAW,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;gCACxC,OAAO,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;4BAE5C;gCACE,OAAO,CAAC,CAAC,KAAK,CAAC;yBAClB;qBACF,CAAC,CAAC;oBAEL,OAAO,EAAE,CAAC;iBACX,EACD,MAAM;oBACJ,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,CAAC;wBACnC,QAAQ,IAAI,CAAC,qBAAqB;4BAChC,KAAK,QAAQ;gCACX,OAAO,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;4BAEzC,KAAK,MAAM;gCACT,MAAM,UAAU,GAAGA,QAAW,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;gCACxC,OAAO,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;4BAE5C;gCACE,OAAO,CAAC,CAAC,KAAK,CAAC;yBAClB;qBACF,CAAC,CAAC;oBAEH,OAAO,MAAM,CAAC;iBACf,EACD,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE,CACtB;qBACA,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,eAAe,CAACD,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;qBAC3F,EAAE,CAAC,UAAU,EAAE,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;qBAC3C,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,gBAAgB,CAACA,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;aAC7F;YAED,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;gBACrB,IAAI,CAAC,OAAO;qBACT,MAAM,CAAC,gBAAgB,CAAC;qBACxB,SAAS,CAAC,IAAI,CAAC;qBACf,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;qBACtB,IAAI,CACH,KAAK;oBACH,MAAM,WAAW,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,cAAc,CAAC,CAAC;oBAErE,WAAW;yBACR,MAAM,CAAC,IAAI,CAAC;yBACZ,KAAK,CAAC,OAAO,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;yBAC7C,MAAM,CAAC,MAAM,CAAC;yBACd,IAAI,CAAC,OAAO,EAAE,kBAAkB,CAAC,CAAC;oBAErC,WAAW;yBACR,MAAM,CAAC,IAAI,CAAC;yBACZ,IAAI,CAAC,OAAO,EAAE,gCAAgC,CAAC;yBAC/C,IAAI,CAAC,CAAC;wBACL,OAAO,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC;qBACjF,CAAC,CAAC;oBAEL,WAAW;yBACR,MAAM,CAAC,IAAI,CAAC;yBACZ,IAAI,CAAC,OAAO,EAAE,sCAAsC,CAAC;yBACrD,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;oBAEjB,OAAO,WAAW,CAAC;iBACpB,EACD,SAAQ,EACR,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE,CACtB,CAAC;aACL;YAED,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,KAAK,EAAE,CAAC;YACtC,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;SACxB,CAAC;QAEF,oBAAe,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YAC1C,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,cAAc,CAAC;iBACzB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7B,IAAI,CAAC,GAAG;iBACL,SAAS,CAAC,OAAO,CAAC;iBAClB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7B,IAAI,CAAC,GAAG;iBACL,SAAS,CAAC,OAAO,CAAC;iBAClB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;YAE3B,IAAI,IAAI,CAAC,IAAI,EAAE;gBACb,IAAI,CAAC,GAAG;qBACL,SAAS,CAAC,OAAO,CAAC;qBAClB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;qBAC7B,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;aAC9B;YAED,IAAI,IAAI,CAAC,UAAU,EAAE;gBACnB,IAAI,CAAC,GAAG;qBACL,SAAS,CAAC,SAAS,CAAC;qBACpB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;qBAC7B,SAAS,CAAC,QAAQ,CAAC;qBACnB,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;aAC9B;YAED,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEF,mBAAc,GAAG;YACf,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YAEhE,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,OAAO,CAAC;iBAClB,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC;iBAC1B,OAAO,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;YAE5B,IAAI,IAAI,CAAC,UAAU,EAAE;gBACnB,IAAI,CAAC,GAAG;qBACL,SAAS,CAAC,QAAQ,CAAC;qBACnB,OAAO,CAAC,QAAQ,EAAE,KAAK,CAAC;qBACxB,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;aAC/B;YAED,IAAI,IAAI,CAAC,IAAI,EAAE;gBACb,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;aACxD;SACF,CAAC;QAEF,qBAAgB,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YAC3C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEF,uBAAkB,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK;YACvC,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAACG,KAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACjE,MAAM,SAAS,GAAGa,UAAa,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAEC,SAAY,CAAC,UAAU,CAAC,CAAC,CAAC;;YAG3E,IAAI,SAAS,KAAK,CAAC;gBAAE,OAAO,KAAK,CAAC;YAElC,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC;YAC3D,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;YACvD,MAAM,WAAW,GAAG,CAAC,UAAU,GAAG,CAAC,SAAS,GAAG,CAAC,SAAS,GAAG,UAAU,GAAG,SAAS,GAAG,SAAS,CAAC;YAC/F,MAAM,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAACA,SAAY,CAAC,WAAW,CAAC,CAAC,CAAC;;YAGxE,MAAM,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;YACtE,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,YAAY,CAAC,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;YACrE,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,YAAY,CAAC,CAAC,OAAO,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;YAEtE,IAAI,CAAC,WAAW;iBACb,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;iBACxC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;iBACxC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;;YAG3B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,EAAE,YAAY,CAAC,CAAC;YAExD,IAAI,CAAC,SAAS,GAAG;gBACf,IAAI,EAAE,WAAW;gBACjB,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;oBAC5B,OAAO;wBACL,KAAK,EAAE,CAAC,CAAC,KAAK;wBACd,KAAK,EAAE,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC;qBAC9B,CAAC;iBACH,CAAC;aACH,CAAC;YAEF,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;SAC3D,CAAC;QAEF,sBAAiB,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK;YACtC,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;YACtD,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;YAC1C,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB,CAAC;QAEF,wBAAmB,GAAG;YACpB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;SAC3D,CAAC;QAEM,gBAAW,GAAG,CAAC,IAAI,EAAE,YAAY;YACvC,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC;YAChD,MAAM,mBAAmB,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;YACzD,MAAM,mBAAmB,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,YAAY,CAAC;YAC9D,MAAM,iBAAiB,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,qBAAqB,EAAE,CAAC;YACtE,MAAM,mBAAmB,GAAG,mBAAmB,CAAC,IAAI,GAAG,iBAAiB,CAAC,KAAK,GAAG,CAAC,CAAC;YACnF,MAAM,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;YACnD,IAAI,QAAQ,CAAC;;YAIb,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,CAAC;gBAC3C,MAAM,UAAU,GAAGhB,QAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC;gBAC9D,OAAO,IAAI,CAAC,oBAAoB,CAAC,UAAU,CAAC,CAAC;aAC9C,CAAC,CAAC;YAEH,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;gBACjD,OAAO,IAAI,CAAC,sBAAsB;sBAC9B,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;sBACjE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;aAC9C,CAAC,CAAC;;YAGH,IAAI,mBAAmB,GAAG,WAAW,EAAE;gBACrC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;gBACnC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;gBACpC,QAAQ,GAAG,GAAG,mBAAmB,CAAC,IAAI,GAAG,iBAAiB,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC;aAC1E;iBAAM,IAAI,mBAAmB,GAAG,WAAW,EAAE;gBAC5C,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;gBACpC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;gBACnC,QAAQ,GAAG,GAAG,mBAAmB,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC;aAChD;;;YAKD,IAAI,CAAC,OAAO,CAAC,KAAK,CAChB,KAAK,EACL,GAAG,mBAAmB,CAAC,GAAG,GAAG,mBAAmB,CAAC,MAAM,GAAG,CAAC,GAAG,mBAAmB,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,IAAI,CACtG,CAAC;YACF,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;YACrC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SAClC,CAAC;QAEM,gBAAW,GAAG;YACpB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SAClC,CAAC;QAEM,mBAAc,GAAG,IAAI;YAC3B,MAAM,SAAS,GAAGA,QAAW,CAAC,IAAI,CAAC,CAAC;YACpC,OAAO,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;SACpC,CAAC;QAEM,mBAAc,GAAG,IAAI;YAC3B,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;SAC/B,CAAC;KA9rBE;IAEJ,QAAQ;QACN,IAAI,CAAC,MAAM,GAAG;YACZ,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS;YACpB,KAAK,EAAE,CAAC,IAAI,CAAC,WAAW;YACxB,MAAM,EAAE,CAAC,IAAI,CAAC,YAAY;YAC1B,IAAI,EAAE,CAAC,IAAI,CAAC,UAAU;SACvB,CAAC;QAEF,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;;QAGzB,IAAI,CAAC,WAAW,GAAGF,YAAa,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACzD,IAAI,CAAC,WAAW,GAAGD,QAAS,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACrD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAC1G,IAAI,CAAC,oBAAoB,GAAGC,YAAa,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;QAC3E,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAsB,EAAE,IAAI,CAAC,wBAAwB,CAAC,CAAC;QAC7G,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAsB,EAAE,IAAI,CAAC,wBAAwB,CAAC,CAAC;;QAG7G,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;QACnB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC3B,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC3B,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;QAC5B,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;QAE5B,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO,EAAE;;YAEzB,QAAQ,IAAI,CAAC,IAAI;gBACf,KAAK,QAAQ;oBACX,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;oBAC3B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;oBAC3B,MAAM;gBAER,KAAK,MAAM;oBACT,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;oBACnB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;oBACxB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;oBACxB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;oBAC3B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;oBAC3B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;oBACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;oBACvB,MAAM;aACT;SACF;;QAGD,IAAI,IAAI,CAAC,SAAS;YAAE,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,EAAE,CAAC;QAE5C,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,cAAc,KAAK,OAAO,EAAE;YACvD,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC;SAC9C;;QAGD,IAAI,CAAC,MAAM,GAAGmB,IAAO,EAAE;aACpB,CAAC,CAAC,CAAC,CAAM,EAAE,CAAC,KAAK,IAAI,CAAC,UAAU,CAACjB,QAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aAClE,CAAC,CAAC,CAAC,CAAM,KAAK,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;;QAGrC,IAAI,IAAI,CAAC,UAAU,EAAE;YACnB,IAAI,CAAC,MAAM,CAAC,KAAK,CAACkB,eAAkB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;SAClD;;QAGD,IAAI,IAAI,CAAC,IAAI,EAAE;YACb,IAAI,CAAC,MAAM,GAAGC,IAAO,EAAE;iBACpB,CAAC,CAAC,CAAC,CAAM,EAAE,CAAC,KAAK,IAAI,CAAC,UAAU,CAACnB,QAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBAClE,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC;iBACf,EAAE,CAAC,CAAC,CAAM,EAAE,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;YAEzC,IAAI,IAAI,CAAC,UAAU,EAAE;gBACnB,IAAI,CAAC,MAAM,CAAC,KAAK,CAACkB,eAAkB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;aAClD;SACF;;QAGD,IAAI,CAAC,KAAK,GAAGZ,MAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;;QAGhF,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK;aAClB,MAAM,CAAC,KAAK,CAAC;aACb,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;aAC9C,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;aACnE,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;aAC1B,IAAI,CAAC,qBAAqB,EAAE,eAAe,CAAC;aAC5C,IAAI,CACH,SAAS,EACT,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,MAAM;YACzF,IAAI,CAAC,MAAM,CAAC,GAAG;YACf,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CACvB,CAAC;;QAGJ,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,GAAG;aACtB,MAAM,CAAC,MAAM,CAAC;aACd,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;aAChE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC;aAC3B,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;aAC1B,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,kBAAkB,CAACP,OAAQ,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;aACxF,EAAE,CAAC,UAAU,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,iBAAiB,CAACA,OAAQ,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;aACtF,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,mBAAmB,EAAE,CAAC,CAAC;QAEnE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,GAAG;aACxB,MAAM,CAAC,MAAM,CAAC;aACd,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;aACb,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC;aACvB,IAAI,CAAC,OAAO,EAAE,cAAc,CAAC,CAAC;;QAGjC,IAAI,CAAC,UAAU,GAAGI,YAAe,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;;QAGtF,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;;QAGzC,IAAI,CAAC,UAAU,GAAGiB,SAAY,EAAE;aAC7B,MAAM,CACLP,MAAS,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAM,EAAE,CAAC;YACnC,OAAOb,QAAW,CAAC,CAAC,CAAC,CAAC;SACvB,CAAC,CACH;aACA,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;QAEjE,IAAI,CAAC,SAAS,GAAGU,UAAa,CAAC,IAAI,CAAC,UAAU,CAAC;aAC5C,KAAK,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC;aACvB,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC;aAC5B,aAAa,CAAC,IAAI,CAAC,kBAAkB,CAAC;aACtC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAEnC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;aAClB,MAAM,CAAC,GAAG,CAAC;aACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;aAC5B,IAAI,CAAC,WAAW,EAAE,gBAAgB,IAAI,CAAC,MAAM,GAAG,CAAC;aACjD,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC;aACtC,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;aAC/C,OAAO,CAAC,oBAAoB,EAAE,IAAI,CAAC,eAAe,CAAC;aACnD,OAAO,CAAC,mBAAmB,EAAE,IAAI,CAAC,cAAc,CAAC;aACjD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;QAGxB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,SAAS,GAAGA,UAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAEvE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;iBAClB,MAAM,CAAC,GAAG,CAAC;iBACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;iBAC5B,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;iBAC/C,IAAI,CAAC,WAAW,EAAE,gBAAgB,IAAI,CAAC,MAAM,GAAG,CAAC;iBACjD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACzB;;QAGD,IAAI,CAAC,UAAU,GAAGC,WAAc,EAAE;aAC/B,MAAM,CAAC;YACNJ,GAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAM,EAAE,CAAC;gBACjC,MAAM,MAAM,GAAG,CAACA,GAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;gBACjC,OAAO,MAAM,GAAG,MAAM,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC;aAC/C,CAAC;YACFC,GAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAM,EAAE,CAAC;gBACjC,MAAM,MAAM,GAAG,CAACA,GAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;gBACjC,OAAO,MAAM,GAAG,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC;aAC9C,CAAC;SACH,CAAC;aACD,IAAI,EAAE;aACN,KAAK,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;QAE3B,IAAI,CAAC,SAAS,GAAGI,QAAW,CAAC,IAAI,CAAC,UAAU,CAAC;aAC1C,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC;aACtB,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC;aAC5B,aAAa,CAAC,IAAI,CAAC,kBAAkB,CAAC;aACtC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAEnC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;aAClB,MAAM,CAAC,GAAG,CAAC;aACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;aAC5B,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC;aACtC,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;aAC/C,OAAO,CAAC,oBAAoB,EAAE,IAAI,CAAC,eAAe,CAAC;aACnD,OAAO,CAAC,mBAAmB,EAAE,IAAI,CAAC,cAAc,CAAC;aACjD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;QAGxB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,SAAS,GAAGA,QAAW,CAAC,IAAI,CAAC,UAAU,CAAC;iBAC1C,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC;iBACtB,QAAQ,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YAEhE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;iBAClB,MAAM,CAAC,GAAG,CAAC;iBACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;iBAC5B,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;iBAC/C,IAAI,CAAC,WAAW,EAAE,iBAAiB,CAAC;iBACpC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACzB;;QAGD,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACrB,IAAI,CAAC,OAAO,GAAGN,MAAS,CAAC,MAAM,CAAC;iBAC7B,MAAM,CAAC,KAAK,CAAC;iBACb,IAAI,CAAC,OAAO,EAAE,mBAAmB,CAAC;iBAClC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC;iBACnB,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;;YAG/B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,gBAAgB,CAAC,CAAC;;YAG3D,MAAM,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,+BAA+B,CAAC,CAAC;YAEjG,MAAM,iBAAiB,GAAG,YAAY,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;YAEvD,iBAAiB;iBACd,SAAS,CAAC,IAAI,CAAC;iBACf,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;iBACf,IAAI,CAAC,KAAK,IAAI,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;SACtC;;QAGD,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACpB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,0BAA0B,EAAE,IAAI,CAAC,cAAc,KAAK,QAAQ,GAAG,IAAI,GAAG,KAAK,CAAC,CAAC;YAChG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,iBAAiB,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC;SAC/E;;QAGD,IAAI,CAAC,GAAG;aACL,MAAM,CAAC,UAAU,CAAC;aAClB,IAAI,CAAC,IAAI,EAAE,aAAa,IAAI,CAAC,UAAU,EAAE,CAAC;aAC1C,MAAM,CAAC,MAAM,CAAC;aACd,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;aACnE,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;;QAGhC,IAAI,CAAC,GAAG;aACL,MAAM,CAAC,UAAU,CAAC;aAClB,IAAI,CAAC,IAAI,EAAE,oBAAoB,IAAI,CAAC,UAAU,EAAE,CAAC;aACjD,MAAM,CAAC,MAAM,CAAC;aACd,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;aACnE,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC;aAC5B,IAAI,CAAC,WAAW,EAAE,cAAc,IAAI,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,CAAC;QAE3D,IAAI,CAAC,WAAW,EAAE,CAAC;QAEnB,MAAM,EAAE,CAAC;KACV;IAED,WAAW,CAAC,OAAsB;QAChC,IAAI,OAAO,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE;YAC7C,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;KACF;IAED,WAAW;QACT,IAAI,IAAI,CAAC,OAAO;YAAE,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;KACzC;;;YAvaF,SAAS,SAAC;gBACT,QAAQ,EAAE,mBAAmB;gBAC7B,QAAQ,EAAE,EAAE;gBAEZ,eAAe,EAAE,uBAAuB,CAAC,MAAM;aAChD;;;YAXQ,kBAAkB;YAlBzB,UAAU;YAOH,gBAAgB;YAAE,QAAQ;;;yBAwBhC,WAAW,SAAC,kBAAkB;wBAG9B,WAAW,SAAC,uBAAuB;mBAGnC,KAAK;oBAGL,KAAK;qBAGL,KAAK;mBAGL,KAAK;mBAGL,KAAK;gCAGL,KAAK;yBAGL,KAAK;gCAGL,KAAK;yBAGL,KAAK;6BAGL,KAAK;6BAGL,KAAK;wBAGL,KAAK;wBAGL,KAAK;yBAGL,KAAK;0BAGL,KAAK;6BAGL,KAAK;oCAGL,KAAK;sCAGL,KAAK;yCAGL,KAAK;qCAGL,KAAK;uCAGL,KAAK;qCAGL,KAAK;uCAGL,KAAK;wBAGL,KAAK;0BAGL,KAAK;2BAGL,KAAK;yBAGL,KAAK;oBAGL,KAAK;sBAGL,MAAM;sBAGN,MAAM;6BAGN,MAAM;6BAGN,MAAM;;;MChHI,yBAAyB;IA6CpC,YAAoB,QAA4B,EAAU,QAAoB;QAA1D,aAAQ,GAAR,QAAQ,CAAoB;QAAU,aAAQ,GAAR,QAAQ,CAAY;QA3C9E,eAAU,GAAG,IAAI,CAAC;QAGlB,eAAU,GAAG,IAAI,CAAC;QAMlB,UAAK,GAAG,GAAG,CAAC;QAGZ,SAAI,GAAwC,UAAU,CAAC;QAGvD,UAAK,GAAG,SAAS,CAAC;QAGlB,cAAS,GAAG,KAAK,CAAC;QAGlB,sBAAiB,GAAG,EAAE,CAAC;QAMvB,eAAU,GAAG,EAAE,CAAC;QAkEhB,qBAAgB,GAAG,MAAM;YACvB,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,IAAI,GAAG,CAAC;SACjC,CAAC;QAEF,oBAAe,GAAG;YAChB,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAElF,OAAO,UAAU,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SACrG,CAAC;QAEF,mBAAc,GAAG,IAAI;YACnB,MAAM,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YACrD,MAAM,GAAG,GAAG,KAAK,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,KAAK,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;YAEjG,OAAO;gBACL;oBACE,UAAU,EAAE,KAAK;oBACjB,QAAQ,EAAE,GAAG;iBACd;aACF,CAAC;SACH,CAAC;QAEF,cAAS,GAAG;YACV,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;;YAG/D,IAAI,CAAC,KAAK;iBACP,MAAM,CAAC,MAAM,CAAC;iBACd,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAC7C,IAAI,CAAC,OAAO,EAAE,kBAAkB,CAAC;iBACjC,IAAI,CAAC,GAAG,EAAE,CAAC;gBACV,OAAO,IAAI,CAAC,GAAG,CAAC;oBACd,WAAW,EAAE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU;oBAC1C,WAAW,EAAE,IAAI,CAAC,MAAM;oBACxB,UAAU,EAAE,CAAC,CAAC,UAAU;oBACxB,QAAQ,EAAE,CAAC,CAAC,QAAQ;iBACrB,CAAC,CAAC;aACJ,CAAC,CAAC;;YAGL,IAAI,CAAC,KAAK;iBACP,MAAM,CAAC,MAAM,CAAC;iBACd,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC;iBACjD,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;iBAC5B,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC;iBACxB,IAAI,CAAC,GAAG,EAAE,CAAC;gBACV,OAAO,IAAI,CAAC,GAAG,CAAC;oBACd,WAAW,EAAE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU;oBAC1C,WAAW,EAAE,IAAI,CAAC,MAAM;oBACxB,UAAU,EAAE,CAAC,CAAC,UAAU;oBACxB,QAAQ,EAAE,CAAC,CAAC,QAAQ;iBACrB,CAAC,CAAC;aACJ,CAAC,CAAC;YAEL,QAAQ,IAAI,CAAC,IAAI;gBACf,KAAK,WAAW;oBACd,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,KAAK,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,MAAM,MAAM,CAAC,CAAC;oBAC1G,MAAM;gBACR,KAAK,UAAU;oBACb,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;oBACxC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,KAAK,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,CAAC;oBAClG,MAAM;aACT;SACF,CAAC;QAEF,gBAAW,GAAG;YACZ,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;YAE9C,KAAK;iBACF,MAAM,CAAC,cAAc,CAAC;iBACtB,UAAU,EAAE;iBACZ,QAAQ,CAAC,GAAG,CAAC;iBACb,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC;YAE/C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;YAErD,IAAI,CAAC,UAAU;iBACZ,UAAU,EAAE;iBACZ,QAAQ,CAAC,GAAG,CAAC;iBACb,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SAC1C,CAAC;QAEF,aAAQ,GAAG,CAAC,UAAU,EAAE,KAAK;YAC3B,MAAM,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;YAE5C,UAAU,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;gBACzB,MAAMe,aAAW,GAAGpB,WAAc,CAAC,CAAC,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;gBAErE,OAAO,CAAC;oBACN,CAAC,CAAC,QAAQ,GAAGoB,aAAW,CAAC,CAAC,CAAC,CAAC;oBAE5B,OAAO,IAAI,CAAC,GAAG,CAAC;wBACd,WAAW,EAAE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU;wBAC1C,WAAW,EAAE,IAAI,CAAC,MAAM;wBACxB,UAAU,EAAE,CAAC,CAAC,UAAU;wBACxB,QAAQ,EAAE,CAAC,CAAC,QAAQ;qBACrB,CAAC,CAAC;iBACJ,CAAC;aACH,CAAC,CAAC;SACJ,CAAC;QAEF,cAAS,GAAG,CAAC,UAAU,EAAE,KAAK;YAC5B,KAAK,GAAGxB,QAAS,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC;YAChC,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;YAEjC,UAAU,CAAC,KAAK,CAAC,MAAM,EAAE;gBACvB,MAAMwB,aAAW,GAAGpB,WAAc,CAACJ,QAAS,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,KAAK,CAAC,CAAC;gBAE5E,OAAO,CAAC;oBACN,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;wBACpB,MAAM,aAAa,GAAG,IAAI,CAAC,WAAW,CAACwB,aAAW,CAAC,CAAC,CAAC,CAAC,CAAC;wBACvD,IAAI,CAAC,KAAK,GAAG,aAAa,CAAC;wBAC3B,OAAO,aAAa,CAAC;qBACtB,CAAC,CAAC;iBACJ,CAAC;aACH,CAAC,CAAC;SACJ,CAAC;KAtKgF;IAElF,QAAQ;QACN,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC;QACzB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QACpD,IAAI,CAAC,WAAW,GAAGxB,QAAS,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACrD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAE/C,QAAQ,IAAI,CAAC,IAAI;YACf,KAAK,UAAU;gBACb,IAAI,CAAC,UAAU,GAAG,CAAC,EAAE,CAAC;gBACtB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;gBACnB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACpB,MAAM;YAER,KAAK,WAAW;gBACd,IAAI,CAAC,UAAU,GAAG,CAAC,GAAG,CAAC;gBACvB,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;gBACpB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACpB,MAAM;YAER,KAAK,QAAQ;gBACX,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;gBACpB,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;gBACpB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBACrB,MAAM;SACT;QAED,IAAI,CAAC,GAAG,GAAGQ,GAAM,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;QAErE,IAAI,CAAC,KAAK,GAAGC,MAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;QAEhF,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK;aAClB,MAAM,CAAC,KAAK,CAAC;aACb,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC;aACzB,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC;aAC3B,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;aAC1B,IAAI,CAAC,qBAAqB,EAAE,eAAe,CAAC;aAC5C,IAAI,CAAC,SAAS,EAAE,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,KAAK,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;QAE1F,IAAI,CAAC,SAAS,EAAE,CAAC;KAClB;IAED,WAAW,CAAC,OAAsB;QAChC,IAAI,OAAO,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE;YAC7C,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC;YACjD,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;KACF;;;YA5GF,SAAS,SAAC;gBACT,QAAQ,EAAE,oBAAoB;gBAC9B,QAAQ,EAAE;;;;;;;;;;GAUT;aAEF;;;YAjBQ,kBAAkB;YAPQ,UAAU;;;yBA0B1C,WAAW,SAAC,kBAAkB;yBAG9B,WAAW,SAAC,wBAAwB;mBAGpC,KAAK;oBAGL,KAAK;mBAGL,KAAK;oBAGL,KAAK;wBAGL,KAAK;gCAGL,KAAK;0BAGL,KAAK;yBAGL,KAAK;;;MC7BK,6BAA6B;IAsCxC,YAAoB,QAAoB;QAApB,aAAQ,GAAR,QAAQ,CAAY;QApCxC,eAAU,GAAG,IAAI,CAAC;QAGlB,mBAAc,GAAG,IAAI,CAAC;QAMtB,UAAK,GAAG,GAAG,CAAC;QAGZ,WAAM,GAAG,EAAE,CAAC;QAGZ,SAAI,GAAwD,MAAM,CAAC;QAGnE,UAAK,GAAG,SAAS,CAAC;QAGlB,kBAAa,GAAkB,IAAI,CAAC;QAGpC,gBAAW,GAAG,CAAC,CAAC;QAGhB,mBAAc,GAAG,CAAC,CAAC;QAGnB,mBAAc,GAAG,CAAC,CAAC;KAMyB;IAE5C,QAAQ;QACN,IAAI,CAAC,MAAM,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC;QAEvD,IAAI,IAAI,CAAC,IAAI,KAAK,KAAK,EAAE;YACvB,IAAI,CAAC,MAAM,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC;SACxD;QAED,IAAI,IAAI,CAAC,IAAI,KAAK,WAAW,IAAI,IAAI,CAAC,IAAI,KAAK,WAAW,EAAE;YAC1D,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;SACtB;QAED,IAAI,IAAI,CAAC,aAAa,KAAK,IAAI,EAAE;YAC/B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC;SACjC;QAED,IAAI,CAAC,KAAK,GAAGA,MAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;QAEhF,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK;aAClB,MAAM,CAAC,KAAK,CAAC;aACb,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC;aACzB,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC;aAC3B,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;aAC1B,IAAI,CAAC,qBAAqB,EAAE,eAAe,CAAC;aAC5C,IAAI,CAAC,SAAS,EAAE,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;QAE5F,IAAI,IAAI,CAAC,IAAI,KAAK,MAAM,IAAI,IAAI,CAAC,IAAI,KAAK,WAAW,IAAI,IAAI,CAAC,IAAI,KAAK,MAAM,IAAI,IAAI,CAAC,IAAI,KAAK,WAAW,EAAE;YAC1G,IAAI,CAAC,GAAG;iBACL,MAAM,CAAC,MAAM,CAAC;iBACd,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;iBAC1B,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC;iBACpB,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,WAAW,CAAC;iBACtC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;SAC/B;QAED,IAAI,IAAI,CAAC,IAAI,KAAK,MAAM,IAAI,IAAI,CAAC,IAAI,KAAK,WAAW,EAAE;YACrD,IAAI,CAAC,GAAG;iBACL,MAAM,CAAC,MAAM,CAAC;iBACd,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;iBAC1B,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC;iBACxB,IAAI,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC;SAC9B;QAED,IAAI,CAAC,WAAW,EAAE,CAAC;KACpB;IAED,WAAW,CAAC,OAAsB;QAChC,IAAI,OAAO,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE;YAC7C,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;KACF;IAED,WAAW;QACT,MAAM,IAAI,GAAQ,IAAI,CAAC,IAAI,CAAC;QAE5B,MAAM,CAAC,GAAGK,WAAc,EAAE;aACvB,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aAC7B,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;QAEjE,MAAM,CAAC,GAAGA,WAAc,EAAE;aACvB,MAAM,CAAC,CAAC,CAACJ,GAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,cAAc,EAAE,CAACC,GAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,CAAC;aAC5F,KAAK,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;QAElE,MAAMc,MAAI,GAAGL,IAAO,EAAE;aACnB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;aACjB,CAAC,CAAC,CAAC,CAAM,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAEvB,MAAMM,MAAI,GAAGJ,IAAO,EAAE;aACnB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;aACjB,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC;aACf,EAAE,CAAC,CAAC,CAAM,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAExB,IAAI,IAAI,CAAC,IAAI,KAAK,MAAM,IAAI,IAAI,CAAC,IAAI,KAAK,WAAW,IAAI,IAAI,CAAC,IAAI,KAAK,MAAM,IAAI,IAAI,CAAC,IAAI,KAAK,WAAW,EAAE;YAC1G,IAAI,CAAC,GAAG;iBACL,SAAS,CAAC,YAAY,CAAC;iBACvB,UAAU,EAAE;iBACZ,QAAQ,CAAC,IAAI,CAAC;iBACd,IAAI,CAAC,GAAG,EAAE,MAAMG,MAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SAChC;QAED,IAAI,IAAI,CAAC,IAAI,KAAK,MAAM,IAAI,IAAI,CAAC,IAAI,KAAK,WAAW,EAAE;YACrD,IAAI,CAAC,GAAG;iBACL,SAAS,CAAC,YAAY,CAAC;iBACvB,UAAU,EAAE;iBACZ,QAAQ,CAAC,IAAI,CAAC;iBACd,IAAI,CAAC,GAAG,EAAE,MAAMC,MAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SAChC;QAED,IAAI,IAAI,CAAC,IAAI,KAAK,KAAK,EAAE;YACvB,MAAM,QAAQ,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;;YAGpE,IAAI,CAAC,GAAG;iBACL,SAAS,CAAC,WAAW,CAAC;iBACtB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;iBACf,IAAI,CACH,KAAK,IACH,KAAK;iBACF,MAAM,CAAC,MAAM,CAAC;iBACd,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC;iBACzB,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;iBACzB,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC;iBACtB,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC;iBACvB,IAAI,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC;iBAC5D,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;iBACjB,IAAI,CAAC,KAAK;gBACT,KAAK;qBACF,UAAU,EAAE;qBACZ,QAAQ,CAAC,IAAI,CAAC;qBACd,IAAI,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;qBACrC,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAE9C,OAAO,KAAK,CAAC;aACd,CAAC,EACN,MAAM,IACJ,MAAM;iBACH,UAAU,EAAE;iBACZ,QAAQ,CAAC,IAAI,CAAC;iBACd,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;iBACzB,IAAI,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBACrC,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC;iBACvB,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBAC1C,IAAI,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,EACjE,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE,CACtB,CAAC;SACL;KACF;;;YA3KF,SAAS,SAAC;gBACT,QAAQ,EAAE,wBAAwB;gBAClC,QAAQ,EAAE,EAAE;gBAEZ,eAAe,EAAE,uBAAuB,CAAC,MAAM;aAChD;;;YAnBC,UAAU;;;yBAqBT,WAAW,SAAC,kBAAkB;6BAG9B,WAAW,SAAC,4BAA4B;mBAGxC,KAAK;oBAGL,KAAK;qBAGL,KAAK;mBAGL,KAAK;oBAGL,KAAK;4BAGL,KAAK;0BAGL,KAAK;6BAGL,KAAK;6BAGL,KAAK;;;MCvBK,8BAA8B;IAgJzC,YAAoB,QAA4B,EAAU,QAAoB,EAAU,OAAyB;QAA7F,aAAQ,GAAR,QAAQ,CAAoB;QAAU,aAAQ,GAAR,QAAQ,CAAY;QAAU,YAAO,GAAP,OAAO,CAAkB;QA9IjH,eAAU,GAAG,IAAI,CAAC;QAGlB,oBAAe,GAAG,IAAI,CAAC;QAMvB,UAAK,GAAG,GAAG,CAAC;QAGZ,WAAM,GAAG,GAAG,CAAC;QAGb,SAAI,GAAwC,QAAQ,CAAC;QAGrD,cAAS,GAAG,EAAE,CAAC;QAGf,gBAAW,GAAG,CAAC,CAAC;QAGhB,iBAAY,GAAG,EAAE,CAAC;QAGlB,eAAU,GAAG,EAAE,CAAC;QAGhB,cAAS,GAAG,KAAK,CAAC;QAGlB,oBAAe,GAAsB,IAAI,CAAC;QAG1C,sBAAiB,GAAG,EAAE,CAAC;QAGvB,oBAAe,GAAsB,IAAI,CAAC;QAG1C,sBAAiB,GAAG,EAAE,CAAC;QAGvB,eAAU,GAAG,CAAC,CAAC;QAGf,mBAAc,GAAG,IAAI,CAAC;QAGtB,eAAU,GAAG,KAAK,CAAC;QAGnB,gBAAW,GAAG,GAAG,GAAG,EAAE,CAAC;QAGvB,mBAAc,GAAuB,OAAO,CAAC;QAG7C,0BAAqB,GAAsB,IAAI,CAAC;QAGhD,4BAAuB,GAAG,EAAE,CAAC;QAG7B,6BAAwB,GAAW,IAAI,CAAC;QAGxC,+BAA0B,GAAG,EAAE,CAAC;QAGhC,kCAA6B,GAAa,IAAI,CAAC;QAG/C,oCAA+B,GAAG,EAAE,CAAC;QAGrC,2BAAsB,GAAW,IAAI,CAAC;QAGtC,6BAAwB,GAAG,EAAE,CAAC;QAG9B,2BAAsB,GAAa,IAAI,CAAC;QAGxC,6BAAwB,GAAG,EAAE,CAAC;QAM9B,YAAO,GAAyB,IAAI,YAAY,EAAU,CAAC;QAG3D,YAAO,GAAyB,IAAI,YAAY,EAAU,CAAC;QAmS3D,gBAAW,GAAG,CAAC,QAAQ,GAAG,IAAI;YAC5B,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,IAAI,IAAI,KAAK,KAAK,CAAC,CAAC;;YAGzE,IAAI,CAAC,SAAS,GAAGC,KAAQ,EAAE;iBACxB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;iBACnB,KAAK,CAACC,cAAiB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;YAGvC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;;YAGlD,IAAI,CAAC,QAAQ,GAAGjB,GAAM,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,IAAS;gBAC/C,OAAOA,GAAM,CAAC,IAAI,EAAE,CAAC,CAAM;oBACzB,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;iBACb,CAAC,CAAC;aACJ,CAAC,CAAC;YAEH,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC;YAEpE,IAAI,CAAC,UAAU;iBACZ,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAC1B,UAAU,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;iBAC5B,IAAI,EAAE,CAAC;YAEV,IAAI,CAAC,KAAK;iBACP,UAAU,EAAE;iBACZ,QAAQ,CAAC,CAAC,CAAC;iBACX,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAExB,IAAI,CAAC,KAAK;iBACP,UAAU,EAAE;iBACZ,QAAQ,CAAC,CAAC,CAAC;iBACX,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;YAGxB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBACnB,IAAI,CAAC,KAAK;qBACP,UAAU,EAAE;qBACZ,QAAQ,CAAC,CAAC,CAAC;qBACX,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aACzB;YAED,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBACnB,IAAI,CAAC,KAAK;qBACP,UAAU,EAAE;qBACZ,QAAQ,CAAC,CAAC,CAAC;qBACX,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aACzB;;YAGD,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBACtB,IAAI,CAAC,QAAQ;qBACV,SAAS,CAAC,WAAW,CAAC;qBACtB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;qBACf,IAAI,CACH,KAAK,IACH,KAAK;qBACF,MAAM,CAAC,MAAM,CAAC;qBACd,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC;qBACzB,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;qBACtC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;qBAC1C,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,EAChC,MAAM,IACJ,MAAM;qBACH,UAAU,EAAE;qBACZ,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,MAAM,QAAQ,GAAG,CAAC,GAAG,IAAI,CAAC,CAAC;qBAC5C,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;qBACtC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;qBAC1C,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,EAChC,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE,CACtB,CAAC;aACL;;YAGD,MAAM,SAAS,GAAG,IAAI,CAAC,IAAI;iBACxB,SAAS,CAAC,YAAY,CAAC;iBACvB,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;iBACpB,IAAI,CACH,KAAK,IACH,KAAK;iBACF,MAAM,CAAC,GAAG,CAAC;iBACX,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;iBAC1B,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAChD,MAAM,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAC5D,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE,CACtB,CAAC;YAEJ,SAAS;iBACN,SAAS,CAAC,MAAM,CAAC;iBACjB,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC;iBACZ,IAAI,CACH,KAAK,IACH,KAAK;iBACF,MAAM,CAAC,MAAM,CAAC;iBACd,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC;iBACpB,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,IAAI,KAAK,MAAM,CAAC;iBAC5C,OAAO,CAAC,iBAAiB,EAAE,IAAI,CAAC,IAAI,KAAK,KAAK,CAAC;iBAC/C,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC;gBACd,IAAI,CAAC,CAAC;gBAEN,IAAI,IAAI,CAAC,IAAI,KAAK,QAAQ,EAAE;oBAC1B,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;iBACzE;qBAAM;oBACL,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;iBACzE;gBAED,OAAO,CAAC,CAAC;aACV,CAAC;iBACD,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBACrC,IAAI,CAAC,OAAO,EAAE,CAAC;gBACd,IAAI,KAAK,CAAC;gBAEV,IAAI,IAAI,CAAC,IAAI,KAAK,QAAQ,EAAE;oBAC1B,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;iBACzC;qBAAM;oBACL,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;iBACzC;gBAED,OAAO,KAAK,CAAC;aACd,CAAC;iBACD,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;iBACjB,IAAI,CAAC,KAAK;gBACT,KAAK;qBACF,UAAU,EAAE;qBACZ,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,MAAM,QAAQ,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC;qBAC3C,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,MAAM,QAAQ,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC;qBACxC,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;qBACrC,IAAI,CAAC,QAAQ,EAAE,CAAC;oBACf,OAAO,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBACtD,CAAC,CAAC;gBAEL,OAAO,KAAK,CAAC;aACd,CAAC,EACN,MAAM,IACJ,MAAM,CAAC,IAAI,CAAC,MAAM;;;;;;;gBAShB,MAAM;qBACH,UAAU,EAAE;qBACZ,QAAQ,CAAC,IAAI,CAAC;qBACd,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;qBAC9C,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;qBACxF,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;qBACrC,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAEtE,OAAO,MAAM,CAAC;aACf,CAAC,EAEJ,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE,CACtB,CAAC;;YAGJ,IAAI,CAAC,SAAS;iBACX,SAAS,CAAC,gBAAgB,CAAC;iBAC3B,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;iBACf,IAAI,CACH,KAAK,IACH,KAAK;iBACF,MAAM,CAAC,MAAM,CAAC;iBACd,IAAI,CAAC,OAAO,EAAE,eAAe,CAAC;iBAC9B,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC;iBACnB,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;iBACtC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;iBAC1C,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,EAChC,MAAM,IACJ,MAAM;iBACH,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;iBAC9B,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;iBACtC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;iBAC1C,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC;iBAC3B,UAAU,EAAE;iBACZ,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC,EACnC,IAAI,IACF,IAAI;iBACD,UAAU,EAAE;iBACZ,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;iBAC9B,MAAM,EAAE,CACd;iBACA,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,YAAY,CAACT,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;iBACxF,EAAE,CAAC,UAAU,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,WAAW,EAAE,CAAC;iBAC1D,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,aAAa,CAACA,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;YAEzF,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;YAClB,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;YACnB,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;YAEvB,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;gBACpB,IAAI,CAAC,KAAK;qBACP,MAAM,CAAC,SAAS,CAAC;qBACjB,SAAS,CAAC,cAAc,CAAC;qBACzB,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;qBACpB,IAAI,CACH,KAAK;oBACH,MAAM,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;oBAE3D,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC;yBACd,IAAI,CAAC,OAAO,EAAE,YAAY,CAAC;yBAC3B,KAAK,CAAC,kBAAkB,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;oBAE5D,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC;yBACd,IAAI,CAAC,OAAO,EAAE,cAAc,CAAC;yBAC7B,IAAI,CAAC,CAAC;wBACL,QAAQ,IAAI,CAAC,qBAAqB;4BAChC,KAAK,QAAQ;gCACX,OAAO,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;4BAEvC,KAAK,MAAM;gCACT,MAAM,UAAU,GAAGC,QAAW,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;gCACtC,OAAO,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;4BAE5C;gCACE,OAAO,CAAC,CAAC,GAAG,CAAC;yBAChB;qBACF,CAAC,CAAC;oBAEL,OAAO,EAAE,CAAC;iBACX,EACD,MAAM;oBACJ,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,CAAC;wBACnC,QAAQ,IAAI,CAAC,qBAAqB;4BAChC,KAAK,QAAQ;gCACX,OAAO,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;4BAEvC,KAAK,MAAM;gCACT,MAAM,UAAU,GAAGA,QAAW,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;gCACtC,OAAO,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;4BAE5C;gCACE,OAAO,CAAC,CAAC,GAAG,CAAC;yBAChB;qBACF,CAAC,CAAC;oBAEH,OAAO,MAAM,CAAC;iBACf,EACD,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE,CACtB;qBACA,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,eAAe,CAACD,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;qBAC3F,EAAE,CAAC,UAAU,EAAE,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;qBAC3C,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,gBAAgB,CAACA,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;aAC7F;SACF,CAAC;QAEF,iBAAY,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YACvC,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,YAAY,CAAC;iBACvB,SAAS,CAAC,MAAM,CAAC;iBACjB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7B,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;YAE5C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEF,gBAAW,GAAG;YACZ,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YAExD,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB,CAAC;QAEF,kBAAa,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YACxC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEF,oBAAe,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YAC1C,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,cAAc,CAAC;iBACzB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7B,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,YAAY,CAAC;iBACvB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEF,mBAAc,GAAG;YACf,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YAEhE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YAE9D,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB,CAAC;QAEF,qBAAgB,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YAC3C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEM,mBAAc,GAAG,IAAI;YAC3B,QAAQ,IAAI,CAAC,eAAe;gBAC1B,KAAK,QAAQ;oBACX,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;gBAEhC,KAAK,MAAM;oBACT,MAAM,SAAS,GAAGC,QAAW,CAAC,IAAI,CAAC,CAAC;oBACpC,OAAO,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;gBAErC;oBACE,OAAO,IAAI,CAAC;aACf;SACF,CAAC;QAEM,gBAAW,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI;;YAGtC,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC;YAChD,MAAM,mBAAmB,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;YACzD,MAAM,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;YACnD,IAAI,mBAAmB,CAAC;YACxB,IAAI,iBAAiB,CAAC;YACtB,IAAI,mBAAmB,CAAC;YACxB,IAAI,SAAS,CAAC;YACd,IAAI,SAAS,CAAC;;YAId,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,CAAC;gBAC3C,QAAQ,IAAI,CAAC,wBAAwB;oBACnC,KAAK,MAAM;wBACT,MAAM,SAAS,GAAGA,QAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;wBACxC,OAAO,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC,CAAC;oBAE9C;wBACE,OAAO,IAAI,CAAC,GAAG,CAAC;iBACnB;aACF,CAAC,CAAC;YAEH,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,uBAAuB,CAAC,CAAC,IAAI,CAAC,CAAC;gBACjD,IAAI,KAAK,GAAG,CAAC,CAAC;gBAEd,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;oBACrB,IAAI,CAAC,KAAK,KAAK,EAAE;wBACf,KAAK,GAAG,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;qBACzB;iBACF,CAAC,CAAC;gBAEH,OAAO,IAAI,CAAC,yBAAyB,CAAC,KAAK,CAAC,CAAC;aAC9C,CAAC,CAAC;YAEH,IAAI,CAAC,OAAO;iBACT,MAAM,CAAC,gBAAgB,CAAC;iBACxB,MAAM,CAAC,OAAO,CAAC;iBACf,IAAI,CAAC,CAAC;gBACL,IAAI,IAAI,GAAG,EAAE,CAAC;gBACd,IAAI,KAAK,CAAC;gBACV,IAAI,KAAK,CAAC;gBAEV,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,KAAK;oBAC/B,QAAQ,IAAI,CAAC,sBAAsB;wBACjC,KAAK,MAAM;4BACT,MAAM,SAAS,GAAGA,QAAW,CAAC,GAAG,CAAC,CAAC;4BACnC,KAAK,GAAG,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC,CAAC;4BAC7C,MAAM;wBAER;4BACE,KAAK,GAAG,GAAG,CAAC;qBACf;oBAED,QAAQ,IAAI,CAAC,sBAAsB;wBACjC,KAAK,QAAQ;4BACX,KAAK,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;4BAC3C,MAAM;wBAER;4BACE,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;qBACrB;oBAED,IAAI,GAAG,KAAK,KAAK,EAAE;wBACjB,IAAI,IAAI;;oCAEgB,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC;;;6DAGD,KAAK;mEACC,KAAK;;aAE3D,CAAC;qBACH;iBACF,CAAC,CAAC;gBAEH,OAAO,IAAI,CAAC;aACb,CAAC,CAAC;YAEL,iBAAiB,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,qBAAqB,EAAE,CAAC;YAChE,mBAAmB,GAAG,mBAAmB,CAAC,IAAI,GAAG,mBAAmB,CAAC,KAAK,GAAG,iBAAiB,CAAC,KAAK,GAAG,CAAC,CAAC;YACzG,mBAAmB,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,YAAY,CAAC;;YAGxD,IAAI,mBAAmB,GAAG,WAAW,EAAE;gBACrC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;gBACnC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;gBAEpC,IAAI,IAAI,CAAC,IAAI,KAAK,QAAQ,EAAE;oBAC1B,SAAS,GAAG,GAAG,mBAAmB,CAAC,IAAI,GAAG,CAAC,mBAAmB,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,GAAG,iBAAiB,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC;iBACjH;qBAAM;oBACL,SAAS,GAAG,GAAG,mBAAmB,CAAC,IAAI,GAAG,CAAC,mBAAmB,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,GAAG,iBAAiB,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC;iBACjH;aACF;iBAAM,IAAI,mBAAmB,GAAG,WAAW,EAAE;gBAC5C,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;gBACpC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;gBAEnC,IAAI,IAAI,CAAC,IAAI,KAAK,QAAQ,EAAE;oBAC1B,SAAS,GAAG,GAAG,mBAAmB,CAAC,IAAI,GAAG,CAAC,mBAAmB,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC;iBACvF;qBAAM;oBACL,SAAS,GAAG,GAAG,mBAAmB,CAAC,IAAI,GAAG,CAAC,mBAAmB,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC;iBACvF;aACF;YAED,SAAS,GAAG,IAAI,CAAC,GAAG;iBACjB,SAAS,CAAC,YAAY,CAAC;iBACvB,MAAM,CAAC,aAAa,CAAC;iBACrB,SAAS,CAAC,MAAM,CAAC;iBACjB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,IAAI,EAAE;iBACN,qBAAqB,EAAE,CAAC;;YAG3B,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,SAAS,CAAC,GAAG,GAAG,mBAAmB,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;YACtF,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;YACtC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SAClC,CAAC;QAEM,gBAAW,GAAG;YACpB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SAClC,CAAC;QAEM,mBAAc,GAAG,IAAI;YAC3B,QAAQ,IAAI,CAAC,eAAe;gBAC1B,KAAK,QAAQ;oBACX,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;gBAEhC,KAAK,MAAM;oBACT,MAAM,SAAS,GAAGA,QAAW,CAAC,IAAI,CAAC,CAAC;oBACpC,OAAO,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;gBAErC;oBACE,OAAO,IAAI,CAAC;aACf;SACF,CAAC;KAprBmH;IAErH,QAAQ;;QAEN,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,IAAI,IAAI,KAAK,KAAK,CAAC,CAAC;;QAGzE,IAAI,CAAC,SAAS,GAAGwB,KAAQ,EAAE;aACxB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;aACnB,KAAK,CAACC,cAAiB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;QAIvC,IAAI,CAAC,MAAM,GAAG;YACZ,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS;YACpB,KAAK,EAAE,CAAC,IAAI,CAAC,WAAW;YACxB,MAAM,EAAE,CAAC,IAAI,CAAC,YAAY;YAC1B,IAAI,EAAE,CAAC,IAAI,CAAC,UAAU;SACvB,CAAC;;QAGF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACxF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACxF,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAC1G,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,wBAAwB,EAAE,IAAI,CAAC,0BAA0B,CAAC,CAAC;QACnH,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CACrD,IAAI,CAAC,6BAA6B,EAClC,IAAI,CAAC,+BAA+B,CACrC,CAAC;QACF,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAsB,EAAE,IAAI,CAAC,wBAAwB,CAAC,CAAC;QAC7G,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAsB,EAAE,IAAI,CAAC,wBAAwB,CAAC,CAAC;;QAG7G,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC3B,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC3B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;QAC5B,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;;QAG5B,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO,EAAE;;YAEzB,QAAQ,IAAI,CAAC,IAAI;gBACf,KAAK,KAAK;oBACR,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;oBACzB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;oBAC3B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;oBACtB,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;oBAC7B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;oBAC3B,IAAI,CAAC,cAAc,GAAG,QAAQ,CAAC;oBAC/B,MAAM;gBAER,KAAK,QAAQ;oBACX,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;oBAC5B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;oBACtB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;oBAC3B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;oBAC5B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;oBAC3B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;oBACtB,MAAM;gBAER,KAAK,MAAM;oBACT,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;oBACtB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;oBAC3B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;oBAC5B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;oBACtB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;oBAC5B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;oBAC3B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;oBACtB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;oBACxB,IAAI,CAAC,cAAc,GAAG,QAAQ,CAAC;oBAC/B,MAAM;aACT;SACF;;QAGD,IAAI,IAAI,CAAC,SAAS;YAAE,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,EAAE,CAAC;QAE5C,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,cAAc,KAAK,OAAO,EAAE;YACvD,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC;SAC9C;;QAGD,IAAI,CAAC,KAAK,GAAGnB,MAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;;QAGhF,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK;aAClB,MAAM,CAAC,KAAK,CAAC;aACb,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC;aAC1B,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;aACnE,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;aAC1B,IAAI,CAAC,qBAAqB,EAAE,eAAe,CAAC;aAC5C,IAAI,CACH,SAAS,EACT,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CACjH,CAAC;QAEJ,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;QAChE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,gBAAgB,CAAC,CAAC;QACtE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;;QAGvD,IAAI,CAAC,UAAU,GAAGH,YAAe,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;;QAGtF,IAAI,CAAC,UAAU,GAAGM,SAAY,EAAE;aAC7B,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;aACjC,UAAU,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;aAC9C,KAAK,CAAC,CAAC,CAAC,CAAC;;QAGZ,CAAC,IAAI,CAAC,YAAY;cACd,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;cACjD,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;QAEpD,IAAI,CAAC,SAAS,GAAGC,UAAa,CAAC,IAAI,CAAC,UAAU,CAAC;aAC5C,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC;aAC5B,aAAa,CAAC,IAAI,CAAC,kBAAkB,CAAC;aACtC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAEnC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;aAClB,MAAM,CAAC,GAAG,CAAC;aACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;aAC5B,IAAI,CAAC,WAAW,EAAE,gBAAgB,IAAI,CAAC,MAAM,GAAG,CAAC;aACjD,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC;aACtC,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;aAC/C,OAAO,CAAC,oBAAoB,EAAE,IAAI,CAAC,eAAe,CAAC;aACnD,OAAO,CAAC,mBAAmB,EAAE,IAAI,CAAC,cAAc,CAAC;aACjD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;QAGxB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,SAAS,GAAGA,UAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAEvE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;iBAClB,MAAM,CAAC,GAAG,CAAC;iBACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;iBAC5B,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;iBAC/C,IAAI,CAAC,WAAW,EAAE,gBAAgB,IAAI,CAAC,MAAM,GAAG,CAAC;iBACjD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACzB;;;;;;;;;;;;QAeD,IAAI,CAAC,QAAQ,GAAGF,GAAM,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,IAAS;YAC/C,OAAOA,GAAM,CAAC,IAAI,EAAE,CAAC,CAAM;gBACzB,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;aACb,CAAC,CAAC;SACJ,CAAC,CAAC;QAEH,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC;QAEpE,IAAI,CAAC,UAAU,GAAGG,WAAc,EAAE;aAC/B,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;aAC1B,IAAI,EAAE;aACN,UAAU,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;QAEhC,IAAI,CAAC,SAAS,GAAGC,QAAW,CAAC,IAAI,CAAC,UAAU,CAAC;aAC1C,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC;aACtB,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC;aAC5B,aAAa,CAAC,IAAI,CAAC,kBAAkB,CAAC;aACtC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAEnC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;aAClB,MAAM,CAAC,GAAG,CAAC;aACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;aAC5B,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC;aACtC,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;aAC/C,OAAO,CAAC,oBAAoB,EAAE,IAAI,CAAC,eAAe,CAAC;aACnD,OAAO,CAAC,mBAAmB,EAAE,IAAI,CAAC,cAAc,CAAC;aACjD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;QAGxB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,SAAS,GAAGA,QAAW,CAAC,IAAI,CAAC,UAAU,CAAC;iBAC1C,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC;iBACtB,QAAQ,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YAEhE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;iBAClB,MAAM,CAAC,GAAG,CAAC;iBACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;iBAC5B,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;iBAC/C,IAAI,CAAC,WAAW,EAAE,iBAAiB,CAAC;iBACpC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACzB;;QAGD,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACrB,IAAI,CAAC,OAAO,GAAGN,MAAS,CAAC,MAAM,CAAC;iBAC7B,MAAM,CAAC,KAAK,CAAC;iBACb,IAAI,CAAC,OAAO,EAAE,mBAAmB,CAAC;iBAClC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC;iBACnB,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;;YAG/B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,gBAAgB,CAAC,CAAC;YAC3D,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,sBAAsB,CAAC,CAAC;;YAGjE,IAAI,CAAC,OAAO;iBACT,MAAM,CAAC,OAAO,CAAC;iBACf,IAAI,CAAC,OAAO,EAAE,+BAA+B,CAAC;iBAC9C,MAAM,CAAC,OAAO,CAAC,CAAC;SACpB;;QAGD,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACpB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,0BAA0B,EAAE,IAAI,CAAC,cAAc,KAAK,QAAQ,GAAG,IAAI,GAAG,KAAK,CAAC,CAAC;YAChG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,iBAAiB,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC;SAC/E;QAED,IAAI,CAAC,WAAW,EAAE,CAAC;KACpB;IAED,WAAW;QACT,IAAI,IAAI,CAAC,OAAO;YAAE,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;KACzC;IAED,WAAW,CAAC,OAAsB;QAChC,IAAI,OAAO,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE;YAC7C,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;SACzB;KACF;;;YAzYF,SAAS,SAAC;gBACT,QAAQ,EAAE,0BAA0B;gBACpC,QAAQ,EAAE,EAAE;gBAEZ,eAAe,EAAE,uBAAuB,CAAC,MAAM;aAChD;;;YARQ,kBAAkB;YAhBzB,UAAU;YAOH,gBAAgB;;;yBAmBtB,WAAW,SAAC,kBAAkB;8BAG9B,WAAW,SAAC,8BAA8B;mBAG1C,KAAK;oBAGL,KAAK;qBAGL,KAAK;mBAGL,KAAK;wBAGL,KAAK;0BAGL,KAAK;2BAGL,KAAK;yBAGL,KAAK;wBAGL,KAAK;8BAGL,KAAK;gCAGL,KAAK;8BAGL,KAAK;gCAGL,KAAK;yBAGL,KAAK;6BAGL,KAAK;yBAGL,KAAK;0BAGL,KAAK;6BAGL,KAAK;oCAGL,KAAK;sCAGL,KAAK;uCAGL,KAAK;yCAGL,KAAK;4CAGL,KAAK;8CAGL,KAAK;qCAGL,KAAK;uCAGL,KAAK;qCAGL,KAAK;uCAGL,KAAK;oBAGL,KAAK;sBAGL,MAAM;sBAGN,MAAM;;;MCxHI,mCAAmC;IAPhD;QASE,UAAK,GAAG,CAAC,CAAC;QAGV,UAAK,GAAG,EAAE,CAAC;QAGX,cAAS,GAAqC,MAAM,CAAC;QAGrD,YAAO,GAAG,KAAK,CAAC;KAMjB;IAJC,IACI,WAAW;QACb,OAAO,CAAC,wBAAwB,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,GAAG,SAAS,GAAG,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KACxG;;;YAvBF,SAAS,SAAC;gBACT,QAAQ,EAAE,+BAA+B;gBACzC,QAAQ,EAAE;;GAET;aAEF;;;oBAEE,KAAK;oBAGL,KAAK;wBAGL,KAAK;sBAGL,KAAK;0BAGL,WAAW,SAAC,OAAO;;;MCeT,+BAA+B;IAjC5C;QAmCE,UAAK,GAAG,EAAE,CAAC;QAGX,YAAO,GAAW,IAAI,CAAC;QAGvB,UAAK,GAAG,CAAC,CAAC;QAGV,SAAI,GAAW,IAAI,CAAC;QAGpB,gBAAW,GAAW,IAAI,CAAC;QAG3B,aAAQ,GAAG,KAAK,CAAC;QAGjB,iBAAY,GAAG,KAAK,CAAC;QAGrB,aAAQ,GAAG,KAAK,CAAC;QAGjB,gBAAW,GAAkB,IAAI,CAAC;QAElC,oBAAe,GAAG,KAAK,CAAC;QACxB,kBAAa,GAAG,KAAK,CAAC;QACtB,WAAM,GAAG,KAAK,CAAC;KA0BhB;IAxBC,IACI,WAAW;QACb,OAAO;YACL,cAAc;YACd,IAAI,CAAC,QAAQ,GAAG,uBAAuB,GAAG,EAAE;YAC5C,IAAI,CAAC,YAAY,GAAG,4BAA4B,GAAG,EAAE;YACrD,IAAI,CAAC,QAAQ,GAAG,uBAAuB,GAAG,EAAE;YAC5C,IAAI,CAAC,KAAK;SACX,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KACb;IAID,QAAQ;QACN,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACtB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;SAC7B;QAED,IAAI,IAAI,CAAC,IAAI,KAAK,GAAG,IAAI,IAAI,CAAC,IAAI,KAAK,IAAI,EAAE;YAC3C,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;SACpB;aAAM,IAAI,IAAI,CAAC,IAAI,KAAK,GAAG,EAAE;YAC5B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;SAC3B;KACF;;;YAxFF,SAAS,SAAC;gBACT,QAAQ,EAAE,2BAA2B;gBACrC,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA4BT;aAEF;;;oBAEE,KAAK;sBAGL,KAAK;oBAGL,KAAK;mBAGL,KAAK;0BAGL,KAAK;uBAGL,KAAK;2BAGL,KAAK;uBAGL,KAAK;0BAGL,KAAK;0BAOL,WAAW,SAAC,OAAO;2BAWnB,YAAY,SAAC,mCAAmC,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE;;;MC3CxD,yBAAyB;IAqGpC,YAAoB,QAAoB,EAAU,OAAyB,EAAU,QAA4B;QAA7F,aAAQ,GAAR,QAAQ,CAAY;QAAU,YAAO,GAAP,OAAO,CAAkB;QAAU,aAAQ,GAAR,QAAQ,CAAoB;QAnGjH,eAAU,GAAG,IAAI,CAAC;QAGlB,mBAAc,GAAG,IAAI,CAAC;QAStB,YAAO,GAAG,EAAE,CAAC;QAMb,UAAK,GAAG,IAAI,CAAC;QAGb,WAAM,GAAG,IAAI,CAAC;QAGd,UAAK,GAAG,GAAG,CAAC;QAGZ,WAAM,GAAG,GAAG,CAAC;QAGb,SAAI,GAAgC,QAAQ,CAAC;QAG7C,QAAG,GAAG,KAAK,CAAC;QAGZ,cAAS,GAAG,CAAC,CAAC;QAGd,gBAAW,GAAG,CAAC,CAAC;QAGhB,iBAAY,GAAG,CAAC,CAAC;QAGjB,eAAU,GAAG,CAAC,CAAC;QAGf,UAAK,GAAG,SAAS,CAAC;QAGlB,cAAS,GAAG,MAAM,CAAC;QAGnB,kBAAa,GAAG,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QAGzB,YAAO,GAAG,CAAC,CAAC;QAGZ,oBAAe,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;QAG9B,0BAAqB,GAAa,IAAI,CAAC;QAGvC,4BAAuB,GAAG,EAAE,CAAC;QAG7B,gBAAW,GAAG,KAAK,CAAC;QAGpB,qBAAgB,GAAG,KAAK,CAAC;QAGzB,2BAAsB,GAAa,IAAI,CAAC;QAGxC,6BAAwB,GAAG,EAAE,CAAC;QAG9B,YAAO,GAAyB,IAAI,YAAY,EAAU,CAAC;QAG3D,YAAO,GAAyB,IAAI,YAAY,EAAU,CAAC;QAsJ3D,gBAAW,GAAG;;YAGZ,IAAI,CAAC,eAAe;iBACjB,SAAS,CAAC,QAAQ,CAAC;iBACnB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;iBACf,IAAI,CACH,CAAC,KAAK,KACJ,KAAK;iBACF,MAAM,CAAC,QAAQ,CAAC;iBAChB,IAAI,CAAC,OAAO,EAAE,YAAY,CAAC;iBAC3B,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC,GAAG,CAAC;iBAC1B,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBAChE,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBAChE,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,OAAO,IAAI,CAAC,CAAC,EAChG,CAAC,MAAM,KACL,MAAM;iBACH,UAAU,EAAE;iBACZ,QAAQ,CAAC,IAAI,CAAC;iBACd,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBAChE,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBAChE,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,OAAO,IAAI,CAAC,CAAC;iBAC3F,UAAU,EAAE;iBACZ,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC,EACnC,CAAC,IAAI,KAAK,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAAC,MAAM,EAAE,CACpE,CAAC;YAEJ,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;gBACrB,IAAI,CAAC,eAAe;qBACjB,SAAS,CAAC,QAAQ,CAAC;qBACnB,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,eAAe,CAACP,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;qBAC3F,EAAE,CAAC,UAAU,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,cAAc,CAACA,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;qBACzF,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,gBAAgB,CAACA,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;;gBAG5F,IAAI,IAAI,CAAC,IAAI,KAAK,MAAM,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE;oBACrC,IAAI,CAAC,eAAe;yBACjB,SAAS,CAAC,MAAM,CAAC;yBACjB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;yBACf,IAAI,CACH,CAAC,KAAK,KACJ,KAAK;yBACF,MAAM,CAAC,MAAM,CAAC;yBACd,IAAI,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC;yBACjF,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC;yBACzB,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC;yBAC7B,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC;yBACrE,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;yBAC/D,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;yBAC/D,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,EACvB,CAAC,MAAM,KACL,MAAM;yBACH,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;yBAC9B,UAAU,EAAE;yBACZ,QAAQ,CAAC,IAAI,CAAC;yBACd,IAAI,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC;yBACjF,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC;yBACrE,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;yBAC/D,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;yBAC/D,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC;yBAClB,UAAU,EAAE;yBACZ,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC,EACnC,CAAC,IAAI,KAAK,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAAC,MAAM,EAAE,CACpE,CAAC;iBACL;aACF;SACF,CAAC;QAEF,oBAAe,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YAC1C,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,aAAa,CAAC;iBACxB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7B,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,aAAa,CAAC;iBACxB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;YAE3B,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;YAErC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEF,mBAAc,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YACzC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YAExF,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB,CAAC;QAEF,qBAAgB,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YAC3C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEM,gBAAW,GAAG,CAAC,IAAI,EAAE,IAAI;YAC/B,MAAM,UAAU,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAChD,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC;YAEhD,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;YAEpE,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE;gBAC1B,IAAI,CAAC,OAAO;qBACT,MAAM,CAAC,gBAAgB,CAAC;qBACxB,IAAI,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,kBAAkB,GAAG,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;aACxG;YAED,MAAM,kBAAkB,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,WAAW,GAAG,CAAC,CAAC;YAChE,MAAM,mBAAmB,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,YAAY,GAAG,CAAC,CAAC;YAElE,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,GAAG,GAAG,mBAAmB,IAAI,CAAC,CAAC;YACrF,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,GAAG,kBAAkB,GAAG,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC;YAC9G,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SAClC,CAAC;QAEM,gBAAW,GAAG;YACpB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SAClC,CAAC;KA3PmH;IAErH,QAAQ;QACN,IAAI,CAAC,MAAM,GAAG;YACZ,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS;YACpB,KAAK,EAAE,CAAC,IAAI,CAAC,WAAW;YACxB,MAAM,EAAE,CAAC,IAAI,CAAC,YAAY;YAC1B,IAAI,EAAE,CAAC,IAAI,CAAC,UAAU;SACvB,CAAC;QAEF,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO,EAAE;;YAEzB,QAAQ,IAAI,CAAC,IAAI;gBACf,KAAK,QAAQ;oBACX,MAAM;gBAER,KAAK,MAAM;oBACT,MAAM;aACT;SACF;QAED,QAAQ,IAAI,CAAC,cAAc;YACzB,KAAK,WAAW;gBACd,IAAI,CAAC,UAAU,GAAG2B,SAAY,EAAE,CAAC;gBACjC,MAAM;YAER,KAAK,cAAc;gBACjB,IAAI,CAAC,UAAU,GAAGC,YAAe,EAAE,CAAC;gBACpC,MAAM;YAER,KAAK,aAAa;gBAChB,IAAI,CAAC,UAAU,GAAGC,WAAc,EAAE,CAAC;gBACnC,MAAM;YAER;gBACE,MAAM;SACT;;QAGD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAC1G,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAsB,EAAE,IAAI,CAAC,wBAAwB,CAAC,CAAC;;QAI7G,IAAI,CAAC,eAAe,GAAGC,OAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;QAC5F,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;;;;QAM3E,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACpC;QAED,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SACrC;QAED,IAAI,CAAC,OAAO,GAAGC,OAAU,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;;QAGxD,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE;YAC1B,IAAI,CAAC,YAAY,GAAGnB,WAAc,EAAE;iBACjC,KAAK,CAAC,IAAI,CAAC,eAAe,CAAC;iBAC3B,MAAM,CAAC,CAACJ,GAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAM,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,EAAEC,GAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAM,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;;YAG9F,IAAI,CAAC,SAAS,GAAGG,WAAc,EAAE;iBAC9B,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC;iBACzB,MAAM,CAAC,CAACJ,GAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAM,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,EAAEC,GAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAM,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;SAC/F;;QAGD,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACrB,IAAI,CAAC,OAAO,GAAGF,MAAS,CAAC,MAAM,CAAC;iBAC7B,MAAM,CAAC,KAAK,CAAC;iBACb,IAAI,CAAC,OAAO,EAAE,oBAAoB,CAAC;iBACnC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC;iBACnB,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;;YAG/B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,gBAAgB,CAAC,CAAC;YAC3D,IAAI,CAAC,IAAI,CAAC,gBAAgB;gBAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,eAAe,CAAC,CAAC;SACvF;;QAGD,IAAI,CAAC,KAAK,GAAGA,MAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;;QAGhF,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK;aAClB,MAAM,CAAC,KAAK,CAAC;aACb,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;aACjE,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;aACnE,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;aAC1B,IAAI,CAAC,qBAAqB,EAAE,eAAe,CAAC;aAC5C,IAAI,CACH,SAAS,EACT,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,IAC5F,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAC/C,EAAE,CACH;aACA,MAAM,CAAC,GAAG,CAAC;aACX,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;;QAG9B,IAAI,CAAC,GAAG;aACL,MAAM,CAAC,GAAG,CAAC;aACX,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC;aACpB,SAAS,CAAC,MAAM,CAAC;aACjB,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC;aACnC,IAAI,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;;QAG1F,IAAI,CAAC,GAAG;aACL,MAAM,CAAC,MAAM,CAAC;aACd,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC;aACrB,KAAK,CAACyB,IAAa,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;aAC3F,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QAE3B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAE7F,IAAI,CAAC,WAAW,EAAE,CAAC;KACpB;IAED,WAAW,CAAC,OAAsB;QAChC,IAAI,OAAO,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE;YAC7C,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;KACF;IAED,WAAW;QACT,IAAI,IAAI,CAAC,OAAO;YAAE,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;KACzC;;;YAhPF,SAAS,SAAC;gBACT,QAAQ,EAAE,yBAAyB;gBACnC,QAAQ,EAAE,EAAE;gBAEZ,eAAe,EAAE,uBAAuB,CAAC,MAAM;aAChD;;;YA7BC,UAAU;YAOH,gBAAgB;YAchB,kBAAkB;;;yBAUxB,WAAW,SAAC,kBAAkB;6BAG9B,WAAW,SAAC,6BAA6B;mBAGzC,KAAK;uBAGL,KAAK;sBAGL,KAAK;6BAGL,KAAK;oBAGL,KAAK;qBAGL,KAAK;oBAGL,KAAK;qBAGL,KAAK;mBAGL,KAAK;kBAGL,KAAK;wBAGL,KAAK;0BAGL,KAAK;2BAGL,KAAK;yBAGL,KAAK;oBAGL,KAAK;wBAGL,KAAK;4BAGL,KAAK;sBAGL,KAAK;8BAGL,KAAK;oCAGL,KAAK;sCAGL,KAAK;0BAGL,KAAK;+BAGL,KAAK;qCAGL,KAAK;uCAGL,KAAK;sBAGL,MAAM;sBAGN,MAAM;;;MCtFI,2BAA2B;IAwHtC,YAAoB,QAA4B,EAAU,QAAoB,EAAU,OAAyB;QAA7F,aAAQ,GAAR,QAAQ,CAAoB;QAAU,aAAQ,GAAR,QAAQ,CAAY;QAAU,YAAO,GAAP,OAAO,CAAkB;QAtHjH,eAAU,GAAG,IAAI,CAAC;QAGlB,iBAAY,GAAG,IAAI,CAAC;QAMpB,UAAK,GAAG,GAAG,CAAC;QAGZ,WAAM,GAAG,GAAG,CAAC;QAGb,cAAS,GAAG,CAAC,CAAC;QAGd,gBAAW,GAAG,CAAC,CAAC;QAGhB,iBAAY,GAAG,EAAE,CAAC;QAGlB,eAAU,GAAG,EAAE,CAAC;QAGhB,UAAK,GAA0C,UAAU,CAAC;QAM1D,oBAAe,GAAsB,IAAI,CAAC;QAG1C,sBAAiB,GAAG,EAAE,CAAC;QAGvB,oBAAe,GAAsB,IAAI,CAAC;QAG1C,sBAAiB,GAAG,EAAE,CAAC;QAGvB,eAAU,GAAG,KAAK,CAAC;QAGnB,gBAAW,GAAG,GAAG,GAAG,EAAE,CAAC;QAGvB,mBAAc,GAAuB,OAAO,CAAC;QAG7C,0BAAqB,GAAa,IAAI,CAAC;QAGvC,4BAAuB,GAAG,EAAE,CAAC;QAG7B,4BAAuB,GAAsB,IAAI,CAAC;QAGlD,8BAAyB,GAAG,EAAE,CAAC;QAG/B,4BAAuB,GAAsB,IAAI,CAAC;QAGlD,8BAAyB,GAAG,EAAE,CAAC;QAG/B,2BAAsB,GAAa,IAAI,CAAC;QAGxC,6BAAwB,GAAG,EAAE,CAAC;QAG9B,UAAK,GAAgD,SAAS,CAAC;QAG/D,YAAO,GAAyB,IAAI,YAAY,EAAU,CAAC;QAG3D,YAAO,GAAyB,IAAI,YAAY,EAAU,CAAC;QAiM3D,gBAAW,GAAG;YACZ,IAAI,CAAC,GAAG;iBACL,SAAS,CAAC,MAAM,CAAC;iBACjB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;iBACf,IAAI,CACH,KAAK,IACH,KAAK;iBACF,MAAM,CAAC,MAAM,CAAC;iBACd,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC;iBACtB,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,CAAC,KAAK,KAAK,SAAS,IAAI,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC;iBAChE,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;iBACzC,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;iBACzC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;iBAC1C,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;iBAC3C,KAAK,CAAC,MAAM,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EACjD,MAAM,IACJ,MAAM,CAAC,IAAI,CAAC,MAAM;gBAChB,MAAM;qBACH,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,CAAC,KAAK,KAAK,SAAS,IAAI,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC;qBAChE,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;qBAC9B,UAAU,EAAE;qBACZ,QAAQ,CAAC,IAAI,CAAC;qBACd,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;qBACzC,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;qBACzC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;qBAC1C,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;qBAC3C,KAAK,CAAC,MAAM,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;qBAC5C,UAAU,EAAE;qBACZ,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAAC;gBAElC,OAAO,MAAM,CAAC;aACf,CAAC,EACJ,IAAI,IACF,IAAI;iBACD,UAAU,EAAE;iBACZ,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;iBAC9B,MAAM,EAAE,CACd;iBACA,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,cAAc,CAAChC,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;iBAC1F,EAAE,CAAC,UAAU,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,aAAa,EAAE,CAAC;iBAC5D,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,eAAe,CAACA,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;YAE3F,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;gBACpB,IAAI,CAAC,KAAK;qBACP,MAAM,CAAC,SAAS,CAAC;qBACjB,SAAS,CAAC,cAAc,CAAC;qBACzB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC;qBACtB,IAAI,CACH,KAAK;oBACH,MAAM,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;oBAE3D,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC;yBACd,IAAI,CAAC,OAAO,EAAE,YAAY,CAAC;yBAC3B,KAAK,CAAC,kBAAkB,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;oBAEtD,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC;yBACd,IAAI,CAAC,OAAO,EAAE,cAAc,CAAC;yBAC7B,IAAI,CAAC,CAAC;wBACL,IAAI,KAAK,GAAW,CAAC,CAAC;wBAEtB,QAAQ,IAAI,CAAC,qBAAqB;4BAChC,KAAK,QAAQ;gCACX,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;gCAClC,MAAM;yBACT;wBAED,OAAO,QAAQ,KAAK,EAAE,CAAC;qBACxB,CAAC,CAAC;oBAEL,OAAO,EAAE,CAAC;iBACX,EACD,MAAM,IACJ,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,CAAC;oBACnC,IAAI,KAAK,GAAW,CAAC,CAAC;oBAEtB,QAAQ,IAAI,CAAC,qBAAqB;wBAChC,KAAK,QAAQ;4BACX,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;4BAClC,MAAM;qBACT;oBAED,OAAO,QAAQ,KAAK,EAAE,CAAC;iBACxB,CAAC,EACJ,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE,CACtB;qBACA,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,eAAe,CAACA,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;qBAC3F,EAAE,CAAC,UAAU,EAAE,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;qBAC3C,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,gBAAgB,CAACA,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;aAC7F;SACF,CAAC;QAEF,mBAAc,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;;YAGzC,IAAI,IAAI,CAAC,KAAK,KAAK,IAAI,EAAE;gBACvB,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;aAC7C;YAED,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEF,kBAAa,GAAG;YACd,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB,CAAC;QAEF,oBAAe,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YAC1C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEF,oBAAe,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YAC1C,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,cAAc,CAAC;iBACzB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7B,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,QAAQ,CAAC;iBACnB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC;gBACX,IAAI,KAAK,GAAG,CAAC,KAAK,KAAK,CAAC,MAAM,EAAE;oBAC9B,OAAO,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC;iBACvB;qBAAM;oBACL,OAAO,CAAC,CAAC,KAAK,GAAG,IAAI,IAAI,CAAC,CAAC,KAAK,IAAI,CAACO,MAAS,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;iBAC5E;aACF,CAAC;iBACD,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEF,mBAAc,GAAG;YACf,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YAEhE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;SAC3D,CAAC;QAEF,qBAAgB,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YAC3C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEM,gBAAW,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI;;YAGtC,MAAM,UAAU,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAChD,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC;YAChD,IAAI,MAAM,CAAC;YACX,IAAI,MAAM,CAAC;YAEX,QAAQ,IAAI,CAAC,uBAAuB;gBAClC,KAAK,QAAQ;oBACX,MAAM,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBAC/C,MAAM;gBAER,KAAK,MAAM;oBACT,MAAM,UAAU,GAAGN,QAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBAC5C,MAAM,GAAG,IAAI,CAAC,mBAAmB,CAAC,UAAU,CAAC,CAAC;oBAC9C,MAAM;gBAER;oBACE,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,yBAAyB,EAAE,CAAC;aAC9D;YAED,QAAQ,IAAI,CAAC,uBAAuB;gBAClC,KAAK,QAAQ;oBACX,MAAM,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBAC/C,MAAM;gBAER,KAAK,MAAM;oBACT,MAAM,UAAU,GAAGA,QAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBAC5C,MAAM,GAAG,IAAI,CAAC,mBAAmB,CAAC,UAAU,CAAC,CAAC;oBAC9C,MAAM;gBAER;oBACE,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,yBAAyB,EAAE,CAAC;aAC9D;YAED,MAAM,KAAK,GACT,IAAI,CAAC,kBAAkB,KAAK,IAAI;kBAC5B,8BAA8B,IAAI,CAAC,KAAK,QAAQ;kBAChD,8BAA8B,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;YAEhF,IAAI,CAAC,OAAO,CAAC,IAAI,CACf;UACI,MAAM,MAAM,MAAM;UAClB,KAAK;OACR,CACF,CAAC;YAEF,MAAM,kBAAkB,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,WAAW,GAAG,CAAC,CAAC;YAChE,MAAM,mBAAmB,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,YAAY,GAAG,CAAC,CAAC;YAElE,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,GAAG,GAAG,mBAAmB,IAAI,CAAC,CAAC;YACrF,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,GAAG,kBAAkB,GAAG,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC;YAC9G,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;YAEjC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SAClC,CAAC;QAEM,gBAAW,GAAG;YACpB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SAClC,CAAC;QAEM,mBAAc,GAAG,IAAI;YAC3B,QAAQ,IAAI,CAAC,eAAe;gBAC1B,KAAK,QAAQ;oBACX,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;gBAEhC,KAAK,MAAM;oBACT,MAAM,SAAS,GAAGA,QAAW,CAAC,IAAI,CAAC,CAAC;oBACpC,OAAO,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;gBAErC;oBACE,OAAO,IAAI,CAAC;aACf;SACF,CAAC;QAEM,mBAAc,GAAG,IAAI;YAC3B,QAAQ,IAAI,CAAC,eAAe;gBAC1B,KAAK,QAAQ;oBACX,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;gBAEhC,KAAK,MAAM;oBACT,MAAM,SAAS,GAAGA,QAAW,CAAC,IAAI,CAAC,CAAC;oBACpC,OAAO,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;gBAErC;oBACE,OAAO,IAAI,CAAC;aACf;SACF,CAAC;KAlYmH;IAErH,QAAQ;QACN,IAAI,CAAC,MAAM,GAAG;YACZ,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS;YACpB,KAAK,EAAE,CAAC,IAAI,CAAC,WAAW;YACxB,MAAM,EAAE,CAAC,IAAI,CAAC,YAAY;YAC1B,IAAI,EAAE,CAAC,IAAI,CAAC,UAAU;SACvB,CAAC;;QAGF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACxF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACxF,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAC1G,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,uBAAuB,EAAE,IAAI,CAAC,yBAAyB,CAAC,CAAC;QAChH,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,uBAAuB,EAAE,IAAI,CAAC,yBAAyB,CAAC,CAAC;QAChH,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAsB,EAAE,IAAI,CAAC,wBAAwB,CAAC,CAAC;;QAG7G,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC3B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC5B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC5B,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;QAC5B,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;;QAG5B,IAAI,CAAC,KAAK,GAAGM,MAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;;QAGhF,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK;aAClB,MAAM,CAAC,KAAK,CAAC;aACb,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC;aAC1B,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;aACnE,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;aAC1B,IAAI,CAAC,qBAAqB,EAAE,eAAe,CAAC;aAC5C,IAAI,CACH,SAAS,EACT,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CACjH,CAAC;;QAGJ,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ;aACzB,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC;aAC3B,KAAK,EAAE;aACP,OAAO,EAAE,CAAC;QAEb,MAAM,WAAW,GAAQ;YACvB,CAACC,GAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAqB,KAAK,CAAC,CAAC,KAAK,CAAC;YACtD,CAACC,GAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAqB,KAAK,CAAC,CAAC,KAAK,CAAC;SACvD,CAAC;QACF,MAAM,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC;QAEhD,QAAQ,IAAI,CAAC,KAAK;YAChB,KAAK,WAAW;gBACd,IAAI,CAAC,UAAU,GAAGwB,cAAiB,EAAE;qBAClC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;qBACnB,KAAK,CAAC,MAAM,CAAC,CAAC;gBAEjB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;gBAC5C,MAAM;YAER,KAAK,UAAU;gBACb,IAAI,CAAC,UAAU,GAAGC,aAAgB,EAAE;qBACjC,MAAM,CAAC,WAAW,CAAC;qBACnB,KAAK,CAAC,MAAM,CAAC,CAAC;gBAEjB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;gBAC/C,MAAM;YAER,KAAK,UAAU;gBACb,IAAI,CAAC,UAAU,GAAGC,aAAgB,EAAE;qBACjC,MAAM,CAAC,WAAW,CAAC;qBACnB,KAAK,CAAC,MAAM,CAAC,CAAC;gBAEjB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,CAAC;gBAChD,MAAM;SACT;;;QAKD,MAAM,WAAW,GAAQ,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QACpE,MAAM,WAAW,GAAQ,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC;;QAG9E,IAAI,CAAC,UAAU,GAAGzB,SAAY,EAAE;aAC7B,MAAM,CAAC,WAAW,CAAC;aACnB,UAAU,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;aAC9C,YAAY,CAAC,GAAG,CAAC,CAAC;QAErB,IAAI,CAAC,SAAS,GAAGC,UAAa,CAAC,IAAI,CAAC,UAAU,CAAC;aAC5C,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC;aAC5B,aAAa,CAAC,IAAI,CAAC,kBAAkB,CAAC;aACtC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAEnC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;aAClB,MAAM,CAAC,GAAG,CAAC;aACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;aAC5B,IAAI,CAAC,WAAW,EAAE,gBAAgB,IAAI,CAAC,MAAM,GAAG,CAAC;aACjD,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC;aACtC,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;aAC/C,OAAO,CAAC,oBAAoB,EAAE,IAAI,CAAC,eAAe,CAAC;aACnD,OAAO,CAAC,mBAAmB,EAAE,IAAI,CAAC,cAAc,CAAC;aACjD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;QAGxB,IAAI,CAAC,UAAU,GAAGD,SAAY,EAAE;aAC7B,MAAM,CAAC,WAAW,CAAC;aACnB,UAAU,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;aAC5B,YAAY,CAAC,GAAG,CAAC,CAAC;QAErB,IAAI,CAAC,SAAS,GAAGG,QAAW,CAAC,IAAI,CAAC,UAAU,CAAC;aAC1C,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC;aAC5B,aAAa,CAAC,IAAI,CAAC,kBAAkB,CAAC;aACtC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAEnC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;aAClB,MAAM,CAAC,GAAG,CAAC;aACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;aAC5B,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC;aACtC,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;aAC/C,OAAO,CAAC,oBAAoB,EAAE,IAAI,CAAC,eAAe,CAAC;aACnD,OAAO,CAAC,mBAAmB,EAAE,IAAI,CAAC,cAAc,CAAC;aACjD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;QAGxB,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACrB,IAAI,CAAC,OAAO,GAAGN,MAAS,CAAC,MAAM,CAAC;iBAC7B,MAAM,CAAC,KAAK,CAAC;iBACb,IAAI,CAAC,OAAO,EAAE,oBAAoB,CAAC;iBACnC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC;iBACnB,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;SAChC;;QAGD,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACpB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,0BAA0B,EAAE,IAAI,CAAC,cAAc,KAAK,QAAQ,GAAG,IAAI,GAAG,KAAK,CAAC,CAAC;YAChG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,iBAAiB,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC;SAC/E;QAED,IAAI,CAAC,WAAW,EAAE,CAAC;KACpB;IAED,WAAW;QACT,IAAI,IAAI,CAAC,OAAO;YAAE,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;KACzC;IAED,WAAW,CAAC,OAAsB;QAChC,IAAI,OAAO,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE;YAC7C,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;KACF;;;YA3RF,SAAS,SAAC;gBACT,QAAQ,EAAE,sBAAsB;gBAChC,QAAQ,EAAE,EAAE;gBAEZ,eAAe,EAAE,uBAAuB,CAAC,MAAM;aAChD;;;YAlBQ,kBAAkB;YATzB,UAAU;YAMH,gBAAgB;;;yBAuBtB,WAAW,SAAC,kBAAkB;2BAG9B,WAAW,SAAC,0BAA0B;mBAGtC,KAAK;oBAGL,KAAK;qBAGL,KAAK;wBAGL,KAAK;0BAGL,KAAK;2BAGL,KAAK;yBAGL,KAAK;oBAGL,KAAK;qBAGL,KAAK;8BAGL,KAAK;gCAGL,KAAK;8BAGL,KAAK;gCAGL,KAAK;yBAGL,KAAK;0BAGL,KAAK;6BAGL,KAAK;oCAGL,KAAK;sCAGL,KAAK;sCAGL,KAAK;wCAGL,KAAK;sCAGL,KAAK;wCAGL,KAAK;qCAGL,KAAK;uCAGL,KAAK;oBAGL,KAAK;sBAGL,MAAM;sBAGN,MAAM;;;MC9EI,iCAAiC;IA0G5C,YAAoB,QAA4B,EAAU,QAAoB,EAAU,OAAyB;QAA7F,aAAQ,GAAR,QAAQ,CAAoB;QAAU,aAAQ,GAAR,QAAQ,CAAY;QAAU,YAAO,GAAP,OAAO,CAAkB;QAxGjH,eAAU,GAAG,IAAI,CAAC;QAGlB,uBAAkB,GAAG,IAAI,CAAC;QAS1B,YAAO,GAAG,EAAE,CAAC;QAMb,cAAS,GAAG,IAAI,CAAC;QAGjB,SAAI,GAAkB,IAAI,CAAC;QAG3B,UAAK,GAAG,IAAI,CAAC;QAGb,WAAM,GAAG,IAAI,CAAC;QAGd,UAAK,GAAG,GAAG,CAAC;QAGZ,WAAM,GAAG,GAAG,CAAC;QAGb,cAAS,GAAG,CAAC,CAAC;QAGd,gBAAW,GAAG,CAAC,CAAC;QAGhB,iBAAY,GAAG,CAAC,CAAC;QAGjB,eAAU,GAAG,CAAC,CAAC;QAGf,UAAK,GAAgD,SAAS,CAAC;QAG/D,eAAU,GAA0C,UAAU,CAAC;QAM/D,gBAAW,GAAG,KAAK,CAAC;QAGpB,2BAAsB,GAAa,IAAI,CAAC;QAGxC,6BAAwB,GAAG,EAAE,CAAC;QAG9B,eAAU,GAAG,KAAK,CAAC;QAGnB,gBAAW,GAAG,GAAG,CAAC;QAGlB,gBAAW,GAAkB,IAAI,CAAC;QAGlC,0BAAqB,GAAa,IAAI,CAAC;QAGvC,4BAAuB,GAAG,EAAE,CAAC;QAG7B,eAAU,GAAG,EAAE,CAAC;QAGhB,cAAS,GAAG,EAAE,CAAC;QAGf,YAAO,GAAyB,IAAI,YAAY,EAAU,CAAC;QAG3D,YAAO,GAAyB,IAAI,YAAY,EAAU,CAAC;QAsJ3D,gBAAW,GAAG;YACZ,IAAI,CAAC,GAAG;iBACL,MAAM,CAAC,MAAM,CAAC;iBACd,SAAS,CAAC,MAAM,CAAC;iBACjB,KAAK,CAAC,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC;gBAClB,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;gBACjF,IAAI,KAAK,EAAE;oBACT,OAAO,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;iBACrC;aACF,CAAC;iBACD,OAAO,CAAC,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC;gBACvB,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;aAC3E,CAAC,CAAC;YAEL,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;gBACrB,IAAI,CAAC,GAAG;qBACL,MAAM,CAAC,MAAM,CAAC;qBACd,SAAS,CAAC,MAAM,CAAC;qBACjB,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAClC,IAAI,CAAC,gBAAgB,CACnBP,OAAQ,EACR,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EACrE,KAAK,EACL,KAAK,CACN,CACF;qBACA,EAAE,CAAC,UAAU,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,eAAe,CAACA,OAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;qBAC/F,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC;qBAC5E,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAC9B,IAAI,CAAC,iBAAiB,CACpBA,OAAQ,EACR,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EACrE,KAAK,EACL,KAAK,CACN,CACF,CAAC;aACL;SACF,CAAC;QAEF,qBAAgB,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YAC3C,IAAI,IAAI,EAAE;gBACR,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;gBACrC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;aACpC;SACF,CAAC;QAEF,oBAAe,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YAC1C,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB,CAAC;QAEF,sBAAiB,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YAC5C,IAAI,IAAI,EAAE;gBACR,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;aACpC;SACF,CAAC;QAEM,gBAAW,GAAG,CAAC,IAAI,EAAE,IAAI;;YAG/B,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;YAE9B,IAAI,IAAI,CAAC,KAAK,EAAE;gBACd,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;aACrE;YAED,IAAI,CAAC,OAAO;iBACT,MAAM,CAAC,gBAAgB,CAAC;iBACxB,IAAI,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,kBAAkB,GAAG,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAEvG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SAClC,CAAC;QAEM,gBAAW,GAAG;YACpB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SAClC,CAAC;QAEM,gBAAW,GAAG,CAAC,IAAI;YACzB,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;SAC/B,CAAC;QAEM,uBAAkB,GAAG,CAAC,IAAI;YAChC,MAAMoC,OAAK,GAAGjC,KAAQ,CAAC,IAAI,CAAC,CAAC;YAC7B,MAAM,SAAS,GAAG,CAACiC,OAAK,CAAC,CAAC,CAAC,CAAC;YAC5B,MAAM,QAAQ,GAAG,CAACA,OAAK,CAAC,CAAC,CAAC,CAAC;YAE3B,MAAM,QAAQ,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAC9C,MAAM,YAAY,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC;YACpC,MAAM,WAAW,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC;YAElC,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC;;YAEhD,MAAM,SAAS,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAE7B,MAAM,kBAAkB,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,WAAW,GAAG,CAAC,CAAC;YAChE,MAAM,mBAAmB,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,YAAY,CAAC;YAE9D,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,SAAS,GAAG,QAAQ,GAAG,WAAW,GAAG,mBAAmB,GAAG,EAAE,IAAI,CAAC,CAAC;YAChG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,EAAE,GAAG,SAAS,GAAG,YAAY,GAAG,kBAAkB,IAAI,CAAC,CAAC;SAClF,CAAC;QAEF,WAAM,GAAG,CAAC,CAAC;YACT,MAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC,MAAM,CAAC;;YAI9C,MAAM,CAAC,GAAGxB,WAAc,EAAE;iBACvB,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC;iBACvB,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,GAAG,MAAM,EAAE,CAAC,IAAI,CAAC,WAAW,IAAI,MAAM,GAAG,CAAC,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC;YAExF,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC;iBACtB,SAAS,CAAC,MAAM,CAAC;iBACjB,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;iBAC7B,IAAI,CAAC,MAAM,CAAC;iBACZ,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;iBACjB,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;iBACzB,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;iBACxC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YAE1B,IAAI,IAAI,CAAC,WAAW,EAAE;gBACpB,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,cAAc,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;aAClH;YAED,CAAC,CAAC,IAAI,CACJD,UAAa,CAAC,CAAC,CAAC;iBACb,QAAQ,CAAC,EAAE,CAAC;iBACZ,UAAU,CAAC0B,KAAQ,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;iBAC/B,UAAU,CAAC,CAAC,CAAS,KACpB,IAAI,CAAC,iBAAiB,GAAG,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAC7G,CACJ;iBACE,MAAM,CAAC,SAAS,CAAC;iBACjB,MAAM,EAAE,CAAC;SACb,CAAC;KA5QmH;IAErH,QAAQ;QACN,IAAI,CAAC,MAAM,GAAG;YACZ,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS;YACpB,KAAK,EAAE,CAAC,IAAI,CAAC,WAAW;YACxB,MAAM,EAAE,CAAC,IAAI,CAAC,YAAY;YAC1B,IAAI,EAAE,CAAC,IAAI,CAAC,UAAU;SACvB,CAAC;;QAGF,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,CAAC,OAAO,EAAE,CAAC;QAE3E,MAAM,WAAW,GAAQ,CAAC,CAAC7B,GAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,EAAE,CAACC,GAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;QAClG,MAAM,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC;QAElD,QAAQ,IAAI,CAAC,UAAU;YACrB,KAAK,WAAW;gBACd,IAAI,CAAC,UAAU,GAAGwB,cAAiB,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;gBAExE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;gBAC5C,MAAM;YAER,KAAK,UAAU;gBACb,IAAI,CAAC,UAAU,GAAGC,aAAgB,EAAE,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;gBAEvE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;gBAC/C,MAAM;YAER,KAAK,UAAU;gBACb,IAAI,CAAC,UAAU,GAAGC,aAAgB,EAAE,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;gBAEvE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,CAAC;gBAChD,MAAM;SACT;;QAGD,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAsB,EAAE,IAAI,CAAC,wBAAwB,CAAC,CAAC;QAC7G,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAE1G,QAAQ,IAAI,CAAC,cAAc;YACzB,KAAK,WAAW;gBACd,IAAI,CAAC,UAAU,GAAGR,SAAY,EAAE,CAAC;gBACjC,MAAM;YAER,KAAK,cAAc;gBACjB,IAAI,CAAC,UAAU,GAAGC,YAAe,EAAE,CAAC;gBACpC,MAAM;YAER,KAAK,aAAa;gBAChB,IAAI,CAAC,UAAU,GAAGC,WAAc,EAAE,CAAC;gBACnC,MAAM;SACT;QAED,IAAI,CAAC,eAAe,GAAGC,OAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;QAC5F,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;QAE3E,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACpC;QAED,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SACrC;QAED,IAAI,CAAC,OAAO,GAAGC,OAAU,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;;;;;;QAQxD,IAAI,CAAC,KAAK,GAAGxB,MAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;;QAGhF,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACrB,IAAI,CAAC,OAAO,GAAGA,MAAS,CAAC,MAAM,CAAC;iBAC7B,MAAM,CAAC,KAAK,CAAC;iBACb,IAAI,CAAC,OAAO,EAAE,oBAAoB,CAAC;iBACnC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC;iBACnB,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;;YAG/B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,gBAAgB,CAAC,CAAC;YAC3D,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,eAAe,CAAC,CAAC;SAC3D;;QAGD,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK;aAClB,MAAM,CAAC,KAAK,CAAC;aACb,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC;aAC1B,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;aACnE,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;aAC1B,IAAI,CAAC,qBAAqB,EAAE,eAAe,CAAC;aAC5C,IAAI,CACH,SAAS,EACT,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CACjH,CAAC;;QAGJ,IAAI,CAAC,GAAG;aACL,MAAM,CAAC,GAAG,CAAC;aACX,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC;aACpB,SAAS,CAAC,MAAM,CAAC;aACjB,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC;aACnC,IAAI,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;;QAG1F,IAAI,CAAC,GAAG;aACL,MAAM,CAAC,MAAM,CAAC;aACd,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC;aACrB,KAAK,CAACyB,IAAa,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;aACxG,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;;QAG3B,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACpB,IAAI,CAAC,GAAG;iBACL,MAAM,CAAC,GAAG,CAAC;iBACX,IAAI,CAAC,WAAW,EAAE,aAAa,CAAC,IAAI,CAAC,UAAU,KAAK,CAAC,IAAI,CAAC,SAAS,GAAG,CAAC;iBACvE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SACtB;QAED,IAAI,CAAC,WAAW,EAAE,CAAC;KACpB;IAED,WAAW,CAAC,OAAsB;QAChC,IAAI,OAAO,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE;YAC7C,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;KACF;IAED,WAAW;QACT,IAAI,IAAI,CAAC,OAAO;YAAE,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;KACzC;;;YAtPF,SAAS,SAAC;gBACT,QAAQ,EAAE,6BAA6B;gBACvC,QAAQ,EAAE,EAAE;gBAEZ,eAAe,EAAE,uBAAuB,CAAC,MAAM;aAChD;;;YATQ,kBAAkB;YA1BzB,UAAU;YAOH,gBAAgB;;;yBA8BtB,WAAW,SAAC,kBAAkB;iCAG9B,WAAW,SAAC,iCAAiC;mBAG7C,KAAK;uBAGL,KAAK;sBAGL,KAAK;6BAGL,KAAK;wBAGL,KAAK;mBAGL,KAAK;oBAGL,KAAK;qBAGL,KAAK;oBAGL,KAAK;qBAGL,KAAK;wBAGL,KAAK;0BAGL,KAAK;2BAGL,KAAK;yBAGL,KAAK;oBAGL,KAAK;yBAGL,KAAK;qBAGL,KAAK;0BAGL,KAAK;qCAGL,KAAK;uCAGL,KAAK;yBAGL,KAAK;0BAGL,KAAK;0BAGL,KAAK;oCAGL,KAAK;sCAGL,KAAK;yBAGL,KAAK;wBAGL,KAAK;sBAGL,MAAM;sBAGN,MAAM;;;MCtGI,8BAA8B;IA0IzC,YACU,QAA4B,EAC5B,QAAoB,EACpB,OAAyB,EACzB,SAAmB;QAHnB,aAAQ,GAAR,QAAQ,CAAoB;QAC5B,aAAQ,GAAR,QAAQ,CAAY;QACpB,YAAO,GAAP,OAAO,CAAkB;QACzB,cAAS,GAAT,SAAS,CAAU;QA5I7B,eAAU,GAAG,IAAI,CAAC;QAGlB,oBAAe,GAAG,IAAI,CAAC;QAMvB,UAAK,GAAG,GAAG,CAAC;QAGZ,WAAM,GAAG,GAAG,CAAC;QAGb,aAAQ,GAAG,IAAI,CAAC;QAGhB,cAAS,GAAG,KAAK,CAAC;QAGlB,mBAAc,GAAG,IAAI,CAAC;QAGtB,oBAAe,GAAsB,IAAI,CAAC;QAG1C,sBAAiB,GAAG,EAAE,CAAC;QAGvB,eAAU,GAAG,CAAC,CAAC;QAGf,cAAS,GAAG,KAAK,CAAC;QAGlB,mBAAc,GAAG,IAAI,CAAC;QAGtB,oBAAe,GAAsB,IAAI,CAAC;QAG1C,sBAAiB,GAAG,EAAE,CAAC;QAGvB,eAAU,GAAG,CAAC,CAAC;QAGf,cAAS,GAAG,EAAE,CAAC;QAGf,gBAAW,GAAG,IAAI,CAAC,QAAQ,GAAG,CAAC,GAAG,EAAE,CAAC;QAGrC,iBAAY,GAAG,EAAE,CAAC;QAGlB,eAAU,GAAG,EAAE,CAAC;QAGhB,eAAU,GAAG,KAAK,CAAC;QAGnB,gBAAW,GAAG,GAAG,GAAG,EAAE,CAAC;QAGvB,mBAAc,GAAuB,OAAO,CAAC;QAG7C,0BAAqB,GAAsB,IAAI,CAAC;QAGhD,4BAAuB,GAAG,EAAE,CAAC;QAG7B,gBAAW,GAAG,KAAK,CAAC;QAGpB,2BAAsB,GAAsB,IAAI,CAAC;QAGjD,6BAAwB,GAAG,EAAE,CAAC;QAG9B,2BAAsB,GAAa,IAAI,CAAC;QAGxC,6BAAwB,GAAG,EAAE,CAAC;QAG9B,aAAQ,GAAG,KAAK,CAAC;QAGjB,UAAK,GAAgD,SAAS,CAAC;QAG/D,YAAO,GAAyB,IAAI,YAAY,EAAU,CAAC;QAG3D,YAAO,GAAyB,IAAI,YAAY,EAAU,CAAC;QAqrB3D,iBAAY,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YACvC,MAAM,IAAI,GAAGzB,MAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;YAErC,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,YAAY,CAAC;iBACvB,SAAS,CAAC,MAAM,CAAC;iBACjB,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7B,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;YAEvE,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;YAErC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEF,gBAAW,GAAG;YACZ,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,MAAM,CAAC;iBACjB,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC;iBAC1B,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YAEvB,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB,CAAC;QAEF,kBAAa,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YACxC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEF,oBAAe,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YAC1C,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,cAAc,CAAC;iBACzB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7B,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,YAAY,CAAC;iBACvB,SAAS,CAAC,MAAM,CAAC;iBACjB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7B,MAAM,GAAG,GAAG,IAAI,CAAC,KAAK;iBACnB,SAAS,CAAC,YAAY,CAAC;iBACvB,SAAS,CAAC,MAAM,CAAC;iBACjB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7B,MAAM,QAAQ,GAAG,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAExC,GAAG,CAAC,KAAK,CAAC,MAAM,EAAE,MAAM,QAAQ,CAAC,CAAC;YAElC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEF,mBAAc,GAAG;YACf,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YAEhE,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,YAAY,CAAC;iBACvB,SAAS,CAAC,MAAM,CAAC;iBACjB,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC;iBAC1B,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;SACxB,CAAC;QAEF,qBAAgB,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YAC3C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEM,gBAAW,GAAG,CAAC,IAAI,EAAE,IAAI;YAC/B,MAAM,UAAU,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAChD,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC;YAChD,IAAI,KAAK,CAAC;YAEV,QAAQ,IAAI,CAAC,sBAAsB;gBACjC,KAAK,QAAQ;oBACX,KAAK,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBAC5C,MAAM;gBAER,KAAK,MAAM;oBACT,MAAM,UAAU,GAAGN,QAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBAC3C,KAAK,GAAG,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,CAAC;oBAC5C,MAAM;gBAER;oBACE,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;aACtB;YAED,MAAM,KAAK,GACT,IAAI,CAAC,kBAAkB,KAAK,IAAI;kBAC5B,8BAA8B,IAAI,CAAC,KAAK,QAAQ;kBAChD,8BAA8B,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;YAEhF,IAAI,CAAC,OAAO,CAAC,IAAI,CACf;UACI,KAAK;UACL,KAAK;OACR,CACF,CAAC;YAEF,MAAM,kBAAkB,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,WAAW,GAAG,CAAC,CAAC;YAChE,MAAM,mBAAmB,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,YAAY,CAAC;YAC9D,MAAM,cAAc,GAAG,CAAC,CAAC;YAEzB,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,GAAG,GAAG,mBAAmB,GAAG,cAAc,IAAI,CAAC,CAAC;gBACtG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,GAAG,kBAAkB,GAAG,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC;aAC/G;iBAAM;gBACL,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,GAAG,GAAG,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,GAAG,mBAAmB,GAAG,CAAC,IAAI,CAAC,CAAC;gBAClH,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,KAAK,GAAG,cAAc,IAAI,CAAC,CAAC;aACpF;YAED,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SAClC,CAAC;QAEM,gBAAW,GAAG;YACpB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SAClC,CAAC;QAEM,mBAAc,GAAG,IAAI;YAC3B,QAAQ,IAAI,CAAC,eAAe;gBAC1B,KAAK,QAAQ;oBACX,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;gBAEhC,KAAK,MAAM;oBACT,MAAM,SAAS,GAAGA,QAAW,CAAC,IAAI,CAAC,CAAC;oBACpC,OAAO,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;gBAErC;oBACE,OAAO,IAAI,CAAC;aACf;SACF,CAAC;QAEM,mBAAc,GAAG,IAAI;YAC3B,QAAQ,IAAI,CAAC,eAAe;gBAC1B,KAAK,QAAQ;oBACX,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;gBAEhC,KAAK,MAAM;oBACT,MAAM,SAAS,GAAGA,QAAW,CAAC,IAAI,CAAC,CAAC;oBACpC,OAAO,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;gBAErC;oBACE,OAAO,IAAI,CAAC;aACf;SACF,CAAC;KA1xBE;IAEJ,QAAQ;QACN,IAAI,CAAC,MAAM,GAAG;YACZ,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS;YACpB,KAAK,EAAE,CAAC,IAAI,CAAC,WAAW;YACxB,MAAM,EAAE,CAAC,IAAI,CAAC,YAAY;YAC1B,IAAI,EAAE,CAAC,IAAI,CAAC,UAAU;SACvB,CAAC;;QAGF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACxF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACxF,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAC1G,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAsB,EAAE,IAAI,CAAC,wBAAwB,CAAC,CAAC;QAC7G,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAsB,EAAE,IAAI,CAAC,wBAAwB,CAAC,CAAC;;QAG7G,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC3B,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;QAC5B,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC3B,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;QAE5B,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,cAAc,KAAK,OAAO,EAAE;YACvD,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC;SAC9C;;QAGD,IAAI,CAAC,KAAK,GAAGM,MAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;;QAGhF,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK;aAClB,MAAM,CAAC,KAAK,CAAC;aACb,IAAI,CAAC,OAAO,EAAE;YACb,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC;aACpB;iBAAM;gBACL,OAAO,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;aAC3D;SACF,CAAC;aACD,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;aACnE,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;aAC1B,IAAI,CAAC,qBAAqB,EAAE,eAAe,CAAC;aAC5C,IAAI,CAAC,SAAS,EAAE;YACf,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,OAAO,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,MAAM;oBAC5E,IAAI,CAAC,MAAM,CAAC,GAAG;oBACf,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;aACxB;iBAAM;gBACL,OAAO,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,IAAI;qBAC3G,MAAM;oBACP,IAAI,CAAC,MAAM,CAAC,GAAG;oBACf,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;aACxB;SACF,CAAC,CAAC;;QAGL,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACrB,IAAI,CAAC,OAAO,GAAGA,MAAS,CAAC,MAAM,CAAC;iBAC7B,MAAM,CAAC,KAAK,CAAC;iBACb,IAAI,CAAC,OAAO,EAAE;gBACb,OAAO,IAAI,CAAC,QAAQ,GAAG,oBAAoB,GAAG,mBAAmB,CAAC;aACnE,CAAC;iBACD,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC;iBACnB,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;SAChC;;QAGD,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACpB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,0BAA0B,EAAE,IAAI,CAAC,cAAc,KAAK,QAAQ,GAAG,IAAI,GAAG,KAAK,CAAC,CAAC;YAChG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,iBAAiB,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC;SAC/E;;QAGD,IAAI,CAAC,UAAU,GAAGH,YAAe,EAAE,CAAC,KAAK,CACvC,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,IAAI,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,CAC7E,CAAC;QAEF,IAAI,IAAI,CAAC,QAAQ,EAAE;;YAEjB,IAAI,CAAC,UAAU,GAAGM,SAAY,EAAE;iBAC7B,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;iBACjC,UAAU,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;iBAC9C,KAAK,CAAC,CAAC,CAAC,CAAC;;YAGZ,CAAC,IAAI,CAAC,YAAY;kBACd,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;kBACjD,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;YAEpD,IAAI,CAAC,SAAS,GAAGC,UAAa,CAAC,IAAI,CAAC,UAAU,CAAC;iBAC5C,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC;iBAC5B,aAAa,CAAC,IAAI,CAAC,kBAAkB,CAAC;iBACtC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YAEnC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;iBAClB,MAAM,CAAC,GAAG,CAAC;iBACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;iBAC5B,IAAI,CAAC,WAAW,EAAE,gBAAgB,IAAI,CAAC,MAAM,GAAG,CAAC;iBACjD,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC;iBACtC,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;iBAC/C,OAAO,CAAC,oBAAoB,EAAE,IAAI,CAAC,eAAe,CAAC;iBACnD,OAAO,CAAC,mBAAmB,EAAE,IAAI,CAAC,cAAc,CAAC;iBACjD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;;;;;;;;;;;YAexB,IAAI,CAAC,QAAQ,GAAGF,GAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,IAAS;gBAC1C,MAAM,KAAK,qBAAQ,IAAI,CAAE,CAAC;gBAC1B,OAAO,KAAK,CAAC,GAAG,CAAC;gBAEjB,OAAOA,GAAM,CAAC6B,MAAS,CAAC,KAAK,CAAC,CAAC,CAAC;aACjC,CAAC,CAAC;YAEH,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC;YAEpE,IAAI,CAAC,UAAU,GAAG1B,WAAc,EAAE;iBAC/B,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAC1B,IAAI,EAAE;iBACN,UAAU,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;YAEhC,IAAI,CAAC,SAAS,GAAGC,QAAW,CAAC,IAAI,CAAC,UAAU,CAAC;iBAC1C,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC;iBACtB,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC;iBAC5B,aAAa,CAAC,IAAI,CAAC,kBAAkB,CAAC;iBACtC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YAEnC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;iBAClB,MAAM,CAAC,GAAG,CAAC;iBACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;iBAC5B,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC;iBACtC,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;iBAC/C,OAAO,CAAC,oBAAoB,EAAE,IAAI,CAAC,eAAe,CAAC;iBACnD,OAAO,CAAC,mBAAmB,EAAE,IAAI,CAAC,cAAc,CAAC;iBACjD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;YAGxB,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,IAAI,CAAC,SAAS,GAAGA,QAAW,CAAC,IAAI,CAAC,UAAU,CAAC;qBAC1C,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC;qBACtB,QAAQ,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;gBAEhE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;qBAClB,MAAM,CAAC,GAAG,CAAC;qBACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;qBAC5B,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;qBAC/C,IAAI,CAAC,WAAW,EAAE,iBAAiB,CAAC;qBACpC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aACzB;;YAGD,IAAI,CAAC,QAAQ,GAAGH,SAAY,EAAE;iBAC3B,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;iBAC1C,UAAU,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC,CAAC;iBAC5C,YAAY,CAAC,GAAG,CAAC;iBACjB,YAAY,CAAC,GAAG,CAAC,CAAC;YAErB,IAAI,CAAC,mBAAmB,EAAE,CAAC;SAC5B;aAAM;;YAEL,IAAI,CAAC,QAAQ,GAAGD,GAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,IAAS;gBAC1C,MAAM,KAAK,qBAAQ,IAAI,CAAE,CAAC;gBAC1B,OAAO,KAAK,CAAC,GAAG,CAAC;gBACjB,OAAOA,GAAM,CAAC6B,MAAS,CAAC,KAAK,CAAC,CAAC,CAAC;aACjC,CAAC,CAAC;YAEH,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC;YAEpE,IAAI,CAAC,UAAU,GAAG1B,WAAc,EAAE;iBAC/B,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAC1B,UAAU,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;iBAC3B,IAAI,EAAE,CAAC;YAEV,IAAI,CAAC,SAAS,GAAGD,UAAa,CAAC,IAAI,CAAC,UAAU,CAAC;iBAC5C,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC;iBACtB,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC;iBAC5B,aAAa,CAAC,IAAI,CAAC,kBAAkB,CAAC;iBACtC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YAEnC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;iBAClB,MAAM,CAAC,GAAG,CAAC;iBACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;iBAC5B,IAAI,CAAC,WAAW,EAAE,gBAAgB,IAAI,CAAC,MAAM,GAAG,CAAC;iBACjD,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC;iBACtC,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;iBAC/C,OAAO,CAAC,oBAAoB,EAAE,IAAI,CAAC,eAAe,CAAC;iBACnD,OAAO,CAAC,mBAAmB,EAAE,IAAI,CAAC,cAAc,CAAC;iBACjD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;YAGxB,IAAI,CAAC,UAAU,GAAGD,SAAY,EAAE;iBAC7B,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;iBACjC,UAAU,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;iBAC5B,KAAK,CAAC,CAAC,CAAC,CAAC;;YAGZ,CAAC,IAAI,CAAC,YAAY;kBACd,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;kBACjD,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;YAEpD,IAAI,CAAC,SAAS,GAAGG,QAAW,CAAC,IAAI,CAAC,UAAU,CAAC;iBAC1C,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC;iBAC5B,aAAa,CAAC,IAAI,CAAC,kBAAkB,CAAC;iBACtC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YAEnC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;iBAClB,MAAM,CAAC,GAAG,CAAC;iBACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;iBAC5B,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC;iBACtC,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;iBAC/C,OAAO,CAAC,oBAAoB,EAAE,IAAI,CAAC,eAAe,CAAC;iBACnD,OAAO,CAAC,mBAAmB,EAAE,IAAI,CAAC,cAAc,CAAC;iBACjD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;YAGxB,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,IAAI,CAAC,SAAS,GAAGF,UAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBACvE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;qBAClB,MAAM,CAAC,GAAG,CAAC;qBACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;qBAC5B,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;qBAC/C,IAAI,CAAC,WAAW,EAAE,gBAAgB,IAAI,CAAC,MAAM,GAAG,CAAC;qBACjD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aACzB;;;;;;;;;;;;;;YAiBD,IAAI,CAAC,QAAQ,GAAGD,SAAY,EAAE;iBAC3B,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;iBAC1C,UAAU,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC,CAAC;iBAC5C,YAAY,CAAC,GAAG,CAAC;iBACjB,YAAY,CAAC,GAAG,CAAC,CAAC;YAErB,IAAI,CAAC,qBAAqB,EAAE,CAAC;SAC9B;KACF;IAED,WAAW;QACT,IAAI,IAAI,CAAC,OAAO;YAAE,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;KACzC;IAED,WAAW,CAAC,OAAsB;QAChC,IAAI,OAAO,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE;YAC7C,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,IAAI,CAAC,mBAAmB,EAAE,CAAC;aAC5B;iBAAM;gBACL,IAAI,CAAC,qBAAqB,EAAE,CAAC;aAC9B;SACF;KACF;IAED,mBAAmB;;QAEjB,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;;QAGlD,IAAI,CAAC,QAAQ,GAAGD,GAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,IAAS;YAC1C,MAAM,KAAK,qBAAQ,IAAI,CAAE,CAAC;YAC1B,OAAO,KAAK,CAAC,GAAG,CAAC;YAEjB,OAAOA,GAAM,CAAC6B,MAAS,CAAC,KAAK,CAAC,CAAC,CAAC;SACjC,CAAC,CAAC;QAEH,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC;QAEpE,IAAI,CAAC,UAAU;aACZ,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;aAC1B,UAAU,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;aAC5B,IAAI,EAAE,CAAC;QAEV,IAAI,CAAC,KAAK;aACP,UAAU,EAAE;aACZ,QAAQ,CAAC,IAAI,CAAC;aACd,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAExB,IAAI,CAAC,KAAK;aACP,UAAU,EAAE;aACZ,QAAQ,CAAC,IAAI,CAAC;aACd,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;;;;;;;QAUxB,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,IAAI,CAAC,KAAK;iBACP,UAAU,EAAE;iBACZ,QAAQ,CAAC,IAAI,CAAC;iBACd,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACzB;;QAGD,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;QAEtG,IAAI,CAAC,GAAG;aACL,SAAS,CAAC,WAAW,CAAC;aACtB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;aACf,IAAI,CACH,KAAK,IACH,KAAK;aACF,MAAM,CAAC,MAAM,CAAC;aACd,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC;aACzB,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;aACtC,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;aACxC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;aAC1C,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,EAChC,MAAM,IACJ,MAAM;aACH,UAAU,EAAE;aACZ,QAAQ,CAAC,IAAI,CAAC;aACd,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;aACtC,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;aACxC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;aAC1C,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CACjC,CAAC;QAEJ,IAAI,CAAC,GAAG;aACL,SAAS,CAAC,YAAY,CAAC;aACvB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;aACf,IAAI,CACH,KAAK,IACH,KAAK;aACF,MAAM,CAAC,GAAG,CAAC;aACX,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;aAC1B,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC;YACtB,OAAO,aAAa,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;SAClD,CAAC,EACN,MAAM,IACJ,MAAM;aACH,UAAU,EAAE;aACZ,QAAQ,CAAC,IAAI,CAAC;aACd,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC;YACtB,OAAO,aAAa,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;SAClD,CAAC,CACP,CAAC;QAEJ,IAAI,CAAC,GAAG;aACL,SAAS,CAAC,YAAY,CAAC;aACvB,SAAS,CAAC,MAAM,CAAC;aACjB,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;YACT,MAAM,KAAK,qBAAQ,CAAC,CAAE,CAAC;YACvB,OAAO,KAAK,CAAC,GAAG,CAAC;YAEjB,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAEhC,MAAM,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,UAAS,GAAG;gBACnC,OAAO,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,CAAC;aACtD,CAAC,CAAC;YAEH,OAAO,OAAO,CAAC;SAChB,CAAC;aACD,IAAI,CACH,KAAK,IACH,KAAK;aACF,MAAM,CAAC,MAAM,CAAC;aACd,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC;aACpB,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,aAAa,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC;aACjG,IAAI,CAAC,YAAY,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;aACjD,IAAI,CAAC,mBAAmB,EAAE,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC;aAC7C,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;aACtC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC;aACxC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC;aACtB,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;aACjB,IAAI,CAAC,KAAK;YACT,OAAO,KAAK;iBACT,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;iBAC9B,UAAU,EAAE;iBACZ,QAAQ,CAAC,CAAC,CAAC;iBACX,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;iBAC3D,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;iBACxC,UAAU,EAAE;iBACZ,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAAC;SACnC,CAAC,EACN,MAAM,IACJ,MAAM;aACH,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;aAC9B,UAAU,EAAE;aACZ,QAAQ,CAAC,IAAI,CAAC;aACd,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;aACtC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC;aACxC,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;aAC3D,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;aACxC,UAAU,EAAE;aACZ,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC,EACnC,IAAI,IACF,IAAI;aACD,UAAU,EAAE;aACZ,QAAQ,CAAC,CAAC,CAAC;aACX,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;aAC9B,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;aACjB,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC,CAC5B;aACA,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,YAAY,CAACtC,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;aACxF,EAAE,CAAC,UAAU,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,WAAW,EAAE,CAAC;aAC1D,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,aAAa,CAACA,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;QAEzF,IAAI,CAAC,YAAY,EAAE,CAAC;QAEpB,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,CAAC;KACrC;IAED,qBAAqB;;QAEnB,IAAI,CAAC,QAAQ,GAAGS,GAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,IAAS;YAC1C,MAAM,KAAK,qBAAQ,IAAI,CAAE,CAAC;YAC1B,OAAO,KAAK,CAAC,GAAG,CAAC;YACjB,OAAOA,GAAM,CAAC6B,MAAS,CAAC,KAAK,CAAC,CAAC,CAAC;SACjC,CAAC,CAAC;QAEH,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC;QAEpE,IAAI,CAAC,UAAU;aACZ,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;aAC1B,UAAU,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;aAC3B,IAAI,EAAE,CAAC;;QAGV,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QAElD,IAAI,CAAC,KAAK;aACP,UAAU,EAAE;aACZ,QAAQ,CAAC,IAAI,CAAC;aACd,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAExB,IAAI,CAAC,KAAK;aACP,UAAU,EAAE;aACZ,QAAQ,CAAC,IAAI,CAAC;aACd,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;QAGxB,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,IAAI,CAAC,KAAK;iBACP,UAAU,EAAE;iBACZ,QAAQ,CAAC,IAAI,CAAC;iBACd,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACzB;;;;;;;;QAUD,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;QAEtG,IAAI,CAAC,GAAG;aACL,SAAS,CAAC,WAAW,CAAC;aACtB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;aACf,IAAI,CACH,KAAK,IACH,KAAK;aACF,MAAM,CAAC,MAAM,CAAC;aACd,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC;aACzB,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;aACtC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC;aACzB,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC,EAChD,MAAM,IACJ,MAAM;aACH,UAAU,EAAE;aACZ,QAAQ,CAAC,IAAI,CAAC;aACd,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;aACtC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC;aACzB,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC,CACjD,CAAC;QAEJ,IAAI,CAAC,GAAG;aACL,SAAS,CAAC,YAAY,CAAC;aACvB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;aACf,IAAI,CACH,KAAK,IACH,KAAK;aACF,MAAM,CAAC,GAAG,CAAC;aACX,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;aAC1B,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC;YACtB,OAAO,gBAAgB,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC;SAClD,CAAC,EACN,MAAM,IACJ,MAAM;aACH,UAAU,EAAE;aACZ,QAAQ,CAAC,IAAI,CAAC;aACd,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC;YACtB,OAAO,gBAAgB,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC;SAClD,CAAC,CACP,CAAC;QAEJ,IAAI,CAAC,GAAG;aACL,SAAS,CAAC,YAAY,CAAC;aACvB,SAAS,CAAC,MAAM,CAAC;aACjB,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;YACT,MAAM,KAAK,qBAAQ,CAAC,CAAE,CAAC;YACvB,OAAO,KAAK,CAAC,GAAG,CAAC;YAEjB,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAEhC,MAAM,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,UAAS,GAAG;gBACnC,OAAO,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,CAAC;aACtD,CAAC,CAAC;YAEH,OAAO,OAAO,CAAC;SAChB,CAAC;aACD,IAAI,CACH,KAAK,IACH,KAAK;aACF,MAAM,CAAC,MAAM,CAAC;aACd,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC;aACpB,IAAI,CACH,MAAM,EACN,CAAC,IAAI,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,wBAAwB,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAC/F;aACA,IAAI,CAAC,YAAY,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;aACjD,IAAI,CAAC,mBAAmB,EAAE,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC;aAC7C,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;aACZ,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;aAChB,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;aACtC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC;aACzC,IAAI,CAAC,KAAK;YACT,OAAO,KAAK;iBACT,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;iBAC9B,UAAU,EAAE;iBACZ,QAAQ,CAAC,CAAC,CAAC;iBACX,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;iBAC5C,UAAU,EAAE;iBACZ,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAAC;SACnC,CAAC,EACN,MAAM,IACJ,MAAM;aACH,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;aAC9B,UAAU,EAAE;aACZ,QAAQ,CAAC,IAAI,CAAC;aACd,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;aAC5C,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC;aACzC,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;aACtC,UAAU,EAAE;aACZ,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC,EACnC,IAAI,IACF,IAAI;aACD,UAAU,EAAE;aACZ,QAAQ,CAAC,CAAC,CAAC;aACX,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;aAC9B,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CACtB;aACA,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,YAAY,CAACtC,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;aACxF,EAAE,CAAC,UAAU,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,WAAW,EAAE,CAAC;aAC1D,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,aAAa,CAACA,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;QAEzF,IAAI,CAAC,YAAY,EAAE,CAAC;QAEpB,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,CAAC;KACrC;IAED,YAAY;;QAEV,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACpB,MAAM,UAAU,qBAAQ,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAE,CAAC;YACvC,OAAO,UAAU,CAAC,GAAG,CAAC;YACtB,MAAM,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,UAAS,GAAG;gBACzD,OAAO,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC;aACvB,CAAC,CAAC;YAEH,IAAI,CAAC,KAAK;iBACP,MAAM,CAAC,SAAS,CAAC;iBACjB,SAAS,CAAC,cAAc,CAAC;iBACzB,IAAI,CAAC,UAAU,CAAC;iBAChB,IAAI,CACH,KAAK;gBACH,MAAM,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;gBAE3D,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC;qBACd,IAAI,CAAC,OAAO,EAAE,YAAY,CAAC;qBAC3B,KAAK,CAAC,kBAAkB,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBAE5D,EAAE,CAAC,MAAM,CAAC,MAAM,EAAE,cAAc,CAAC;qBAC9B,IAAI,CAAC,OAAO,EAAE,cAAc,CAAC;qBAC7B,IAAI,CAAC,CAAC;oBACL,QAAQ,IAAI,CAAC,qBAAqB;wBAChC,KAAK,QAAQ;4BACX,OAAO,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;wBAEzC,KAAK,MAAM;4BACT,MAAM,UAAU,GAAGC,QAAW,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;4BACxC,OAAO,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;wBAE5C;4BACE,OAAO,CAAC,CAAC,KAAK,CAAC;qBAClB;iBACF,CAAC,CAAC;gBAEL,OAAO,EAAE,CAAC;aACX,EACD,MAAM;gBACJ,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,CAAC;oBACnC,QAAQ,IAAI,CAAC,qBAAqB;wBAChC,KAAK,QAAQ;4BACX,OAAO,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;wBAEzC,KAAK,MAAM;4BACT,MAAM,UAAU,GAAGA,QAAW,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;4BACxC,OAAO,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;wBAE5C;4BACE,OAAO,CAAC,CAAC,KAAK,CAAC;qBAClB;iBACF,CAAC,CAAC;gBAEH,OAAO,MAAM,CAAC;aACf,EACD,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE,CACtB;iBACA,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,eAAe,CAACD,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;iBAC3F,EAAE,CAAC,UAAU,EAAE,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;iBAC3C,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,gBAAgB,CAACA,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;SAC7F;KACF;;;YA9xBF,SAAS,SAAC;gBACT,QAAQ,EAAE,0BAA0B;gBACpC,QAAQ,EAAE,EAAE;gBAEZ,eAAe,EAAE,uBAAuB,CAAC,MAAM;aAChD;;;YARQ,kBAAkB;YAhBzB,UAAU;YAOH,gBAAgB;YAAE,QAAQ;;;yBAmBhC,WAAW,SAAC,kBAAkB;8BAG9B,WAAW,SAAC,8BAA8B;mBAG1C,KAAK;oBAGL,KAAK;qBAGL,KAAK;uBAGL,KAAK;wBAGL,KAAK;6BAGL,KAAK;8BAGL,KAAK;gCAGL,KAAK;yBAGL,KAAK;wBAGL,KAAK;6BAGL,KAAK;8BAGL,KAAK;gCAGL,KAAK;yBAGL,KAAK;wBAGL,KAAK;0BAGL,KAAK;2BAGL,KAAK;yBAGL,KAAK;yBAGL,KAAK;0BAGL,KAAK;6BAGL,KAAK;oCAGL,KAAK;sCAGL,KAAK;0BAGL,KAAK;qCAGL,KAAK;uCAGL,KAAK;qCAGL,KAAK;uCAGL,KAAK;uBAGL,KAAK;oBAGL,KAAK;sBAGL,MAAM;sBAGN,MAAM;;;MCnGI,uCAAuC;IA8IlD,YACU,QAA4B,EAC5B,QAAoB,EACpB,OAAyB,EACzB,SAAmB;QAHnB,aAAQ,GAAR,QAAQ,CAAoB;QAC5B,aAAQ,GAAR,QAAQ,CAAY;QACpB,YAAO,GAAP,OAAO,CAAkB;QACzB,cAAS,GAAT,SAAS,CAAU;QAhJ7B,eAAU,GAAG,IAAI,CAAC;QAGlB,0BAAqB,GAAG,IAAI,CAAC;QAM7B,UAAK,GAAG,GAAG,CAAC;QAGZ,WAAM,GAAG,EAAE,CAAC;QAGZ,kBAAa,GAAG,mBAAmB,CAAC;QAGpC,eAAU,GAAG,KAAK,CAAC;QAGnB,cAAS,GAAG,EAAE,CAAC;QAGf,gBAAW,GAAG,EAAE,CAAC;QAGjB,iBAAY,GAAG,EAAE,CAAC;QAGlB,eAAU,GAAG,EAAE,CAAC;QAGhB,cAAS,GAAG,CAAC,CAAC;QAGd,cAAS,GAAG,KAAK,CAAC;QAGlB,eAAU,GAAG,CAAC,CAAC;QAGf,eAAU,GAAkB,IAAI,CAAC;QAGjC,oBAAe,GAAa,IAAI,CAAC;QAGjC,sBAAiB,GAAG,EAAE,CAAC;QAGvB,yBAAoB,GAAG,EAAE,CAAC;QAG1B,cAAS,GAAG,KAAK,CAAC;QAGlB,eAAU,GAAG,KAAK,CAAC;QAGnB,sBAAiB,GAAG,IAAI,CAAC;QAGzB,gBAAW,GAAG,GAAG,GAAG,EAAE,CAAC;QAGvB,mBAAc,GAAuB,QAAQ,CAAC;QAG9C,0BAAqB,GAAsB,IAAI,CAAC;QAGhD,4BAAuB,GAAG,EAAE,CAAC;QAG7B,gBAAW,GAAG,KAAK,CAAC;QAGpB,2BAAsB,GAAsB,IAAI,CAAC;QAGjD,6BAAwB,GAAG,EAAE,CAAC;QAG9B,4BAAuB,GAAG,WAAW,CAAC;QAGtC,2BAAsB,GAAa,IAAI,CAAC;QAGxC,6BAAwB,GAAG,EAAE,CAAC;QAG9B,uBAAkB,GAAG,EAAE,CAAC;QAGxB,+BAA0B,GAAG,KAAK,CAAC;QAGnC,8BAAyB,GAAG,KAAK,CAAC;QAGlC,eAAU,GAAG,KAAK,CAAC;QAMnB,YAAO,GAAyB,IAAI,YAAY,EAAU,CAAC;QAG3D,YAAO,GAAyB,IAAI,YAAY,EAAU,CAAC;QAEnD,iBAAY,GAAG,KAAK,CAAC;QACrB,cAAS,GAAG,KAAK,CAAC;QAKlB,eAAU,GAAG,EAAE,CAAC;QAwZxB,iBAAY,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YACvC,MAAM,IAAI,GAAGO,MAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;YAErC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAEvD,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YAEhC,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,cAAc,CAAC;iBACzB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC;;gBAEX,OAAO,CAAC,KAAK,KAAK,CAAC;aACpB,CAAC;iBACD,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7B,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;YAErC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEF,gBAAW,GAAG;YACZ,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,MAAM,CAAC;iBACjB,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC;iBAC1B,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YAEvB,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YAEhE,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB,CAAC;QAEF,kBAAa,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YACxC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEM,gBAAW,GAAG,CAAC,IAAI,EAAE,IAAI;YAC/B,MAAM,UAAU,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAChD,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC;YAEhD,MAAM,UAAU,GAAG,IAAI,CAAC,KAAK,GAAGgC,GAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAM,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC;YACvE,MAAM,iBAAiB,GAAG,IAAI,CAAC,YAAY,GAAGA,GAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAM,KAAK,CAAC,CAAC,YAAY,CAAC,CAAC;YAE5F,IAAI,YAAY,GAAG,EAAE,CAAC;YACtB,IAAI,6BAA6B,GAAG,EAAE,CAAC;YACvC,IAAI,uBAAuB,GAAG,EAAE,CAAC;YACjC,IAAI,mBAAmB,GAAG,EAAE,CAAC;YAC7B,IAAI,sBAAsB,GAAG,EAAE,CAAC;YAChC,IAAI,gBAAgB,GAAG,EAAE,CAAC;YAC1B,IAAI,YAAY,GAAG,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;YAC3C,IAAI,gBAAgB,GAAG,EAAE,CAAC;;YAG1B,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBACtB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,sBAAsB,EAAE,IAAI,CAAC,CAAC;gBAEnD,QAAQ,IAAI,CAAC,sBAAsB;oBACjC,KAAK,QAAQ;wBACX,YAAY,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;wBACnD,MAAM;oBAER,KAAK,MAAM;wBACT,MAAM,UAAU,GAAGtC,QAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;wBAC3C,YAAY,GAAG,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,CAAC;wBACnD,MAAM;oBAER;wBACE,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC;iBAC7B;aACF;;YAGD,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC,cAAc,EAAE;gBAClE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,sBAAsB,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;gBAC7D,6BAA6B,GAAG,MAAM,CAAC;gBAEvC,uBAAuB,GAAG,GAAG,IAAI,CAAC,iBAAiB,CACjDA,QAAW,CAAC,IAAI,CAAC,gBAAgB,CAAC,CACnC,MAAM,IAAI,CAAC,iBAAiB,CAACA,QAAW,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,EAAE,CAAC;aACnE;;YAGD,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,YAAY,EAAE;gBAC1D,mBAAmB;oBACjB,IAAI,CAAC,kBAAkB,KAAK,IAAI;0BAC5B,GAAG,IAAI,CAAC,oBAAoB,CAAC,iBAAiB,CAAC,KAAK,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,kBAAkB,GAAG;0BACnG,GAAG,IAAI,CAAC,oBAAoB,CAAC,iBAAiB,CAAC,KAAK,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,YAAY,CAAC,GAC5F,IAAI,CAAC,kBACP,GAAG,CAAC;aACX;iBAAM,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,YAAY,KAAK,IAAI,EAAE;gBACvD,mBAAmB;oBACjB,IAAI,CAAC,kBAAkB,KAAK,IAAI;0BAC5B,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,kBAAkB,KAAK,IAAI,CAAC,oBAAoB,CAAC,iBAAiB,CAAC,GAAG;0BAClG,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC,kBAAkB,KAAK,IAAI,CAAC,oBAAoB,CACnG,iBAAiB,CAClB,GAAG,CAAC;aACZ;iBAAM,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,YAAY,KAAK,IAAI,EAAE;gBACvD,mBAAmB,GAAG,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;aAC/C;;YAGD,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,OAAO,EAAE;gBAClC,gBAAgB,GAAG,GAAG,IAAI,CAAC,iBAAiB,CAACA,QAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,IAAI,CAAC,iBAAiB,CACnGA,QAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAC1B,EAAE,CAAC;aACL;;YAGD,IAAI,YAAY,KAAK,EAAE,EAAE;gBACvB,sBAAsB,GAAG,MAAM,CAAC;aACjC;;YAGD,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,KAAK,EAAE;gBACtD,YAAY,GAAG,IAAI,CAAC,kBAAkB,KAAK,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,EAAE,GAAG,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC;aAC9G;iBAAM,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,KAAK,KAAK,IAAI,EAAE;gBACnD,YAAY;oBACV,IAAI,CAAC,kBAAkB,KAAK,IAAI;0BAC5B,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,kBAAkB,EAAE;0BACzC,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;aAC1E;iBAAM,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,KAAK,KAAK,IAAI,EAAE;gBACvE,YAAY;oBACV,IAAI,CAAC,kBAAkB,KAAK,IAAI;0BAC5B,GAAG,IAAI,CAAC,oBAAoB,CAAC,UAAU,CAAC,KAAK,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,kBAAkB,GAAG;0BACpF,GAAG,IAAI,CAAC,oBAAoB,CAAC,UAAU,CAAC,KAAK,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,GAC9E,IAAI,CAAC,kBACP,GAAG,CAAC;aACX;iBAAM,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,KAAK,KAAK,IAAI,EAAE;gBACpD,YAAY;oBACV,IAAI,CAAC,kBAAkB,KAAK,IAAI;0BAC5B,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,kBAAkB,KAAK,IAAI,CAAC,oBAAoB,CAAC,UAAU,CAAC,GAAG;0BACpF,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,kBAAkB,KAAK,IAAI,CAAC,oBAAoB,CAC5F,UAAU,CACX,GAAG,CAAC;aACZ;;YAGD,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,KAAK,KAAK,IAAI,IAAI,IAAI,CAAC,YAAY,KAAK,IAAI,EAAE;gBAC7F,gBAAgB,GAAG,sCAAsC,IAAI,CAAC,sBAAsB,IAClF,IAAI,CAAC,oBAAoB,GAAG,SAAS,GAAG,EAC1C,gBAAgB,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC;aACzF;YAED,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;gBAChB,OAAO;sDACyC,YAAY;sBAC5C,6BAA6B,KAAK,uBAAuB;sDACzB,mBAAmB;sBACnD,sBAAsB,KAAK,gBAAgB;oEACG,YAAY,iBAAiB,gBAAgB;OAC1G,CAAC;aACH,CAAC,CAAC;YAEH,MAAM,kBAAkB,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,WAAW,GAAG,CAAC,CAAC;YAChE,MAAM,mBAAmB,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,YAAY,CAAC;YAC9D,MAAM,cAAc,GAAG,CAAC,CAAC;YAEzB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,GAAG,GAAG,mBAAmB,GAAG,cAAc,IAAI,CAAC,CAAC;YAEtG,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;gBACxB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,GAAG,kBAAkB,GAAG,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC;aAC/G;iBAAM;gBACL,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,kBAAkB,GAAG,CAAC,UAAU,CAAC,KAAK,IAAI,CAAC,CAAC;aACxF;YAED,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SAClC,CAAC;QAEM,gBAAW,GAAG;YACpB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SAClC,CAAC;QAEF,oBAAe,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YAC1C,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;gBAC3B,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG;qBACtB,SAAS,CAAC,MAAM,CAAC;qBACjB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;qBAC7B,IAAI,EAAE,CAAC;gBAEV,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;aAClC;YAED,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,cAAc,CAAC;iBACzB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7B,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,MAAM,CAAC;iBACjB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7B,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,MAAM,CAAC;iBACjB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;iBAC7B,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEF,mBAAc,GAAG;YACf,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YAEhE,IAAI,CAAC,KAAK;iBACP,SAAS,CAAC,MAAM,CAAC;iBACjB,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC;iBAC1B,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;;YAGvB,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB,CAAC;QAEF,qBAAgB,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;YAC3C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;SACpC,CAAC;QAEM,mBAAc,GAAG,IAAI;YAC3B,QAAQ,IAAI,CAAC,eAAe;gBAC1B,KAAK,QAAQ;oBACX,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,oBAAoB,EAAE,CAAC;gBAEjE;oBACE,OAAO,GAAG,IAAI,GAAG,IAAI,CAAC,oBAAoB,EAAE,CAAC;aAChD;SACF,CAAC;KA7lBE;IAEJ,QAAQ;QACN,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC;QAE7C,IAAI,CAAC,MAAM,GAAG;YACZ,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS;YACpB,KAAK,EAAE,CAAC,IAAI,CAAC,WAAW;YACxB,MAAM,EAAE,CAAC,IAAI,CAAC,YAAY;YAC1B,IAAI,EAAE,CAAC,IAAI,CAAC,UAAU;SACvB,CAAC;QAEF,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,GAAG,IAAI,GAAG,KAAK,CAAC;QAC1D,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;;QAGpE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACxF,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAC1G,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAsB,EAAE,IAAI,CAAC,wBAAwB,CAAC,CAAC;QAC7G,IAAI,CAAC,iBAAiB,GAAGF,YAAa,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;QACrE,IAAI,CAAC,oBAAoB,GAAGD,QAAS,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;QACvE,IAAI,CAAC,0BAA0B,GAAGA,QAAS,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;;QAG5E,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC3B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC5B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;QAC5B,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,UAAU,GAAG,EAAE,GAAG,CAAC,CAAC;QAEjD,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,cAAc,KAAK,OAAO,EAAE;YACvD,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC;SAC9C;;QAGD,IAAI,CAAC,KAAK,GAAGS,MAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;;QAGhF,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK;aAClB,MAAM,CAAC,KAAK,CAAC;aACb,IAAI,CAAC,OAAO,EAAE;YACb,OAAO,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;SAC3D,CAAC;aACD,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,gBAAgB,CAAC;aAC3F,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;aAC1B,IAAI,CAAC,qBAAqB,EAAE,eAAe,CAAC;aAC5C,IAAI,CAAC,SAAS,EAAE;YACf,OAAO,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,IAAI;iBAC3G,MAAM;gBACP,IAAI,CAAC,MAAM,CAAC,GAAG;gBACf,IAAI,CAAC,MAAM,CAAC,MAAM;gBAClB,IAAI,CAAC,gBAAgB,EAAE,CAAC;SAC3B,CAAC,CAAC;;QAGL,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACrB,IAAI,CAAC,OAAO,GAAGA,MAAS,CAAC,MAAM,CAAC;iBAC7B,MAAM,CAAC,KAAK,CAAC;iBACb,IAAI,CAAC,OAAO,EAAE,oBAAoB,CAAC;iBACnC,OAAO,CAAC,sBAAsB,EAAE,IAAI,CAAC,SAAS,CAAC;iBAC/C,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC;iBACnB,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;SAChC;;QAGD,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;YAC5C,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,0BAA0B,EAAE,IAAI,CAAC,cAAc,KAAK,QAAQ,GAAG,IAAI,GAAG,KAAK,CAAC,CAAC;YAChG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,iBAAiB,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC;SAC/E;;QAGD,IAAI,CAAC,UAAU,GAAGK,WAAc,EAAE;aAC/B,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC2B,GAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAM,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;aAC9D,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QAE3B,IAAI,CAAC,SAAS,GAAG5B,UAAa,CAAC,IAAI,CAAC,UAAU,CAAC;;aAE5C,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC;aACtB,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC;aAC5B,aAAa,CAAC,IAAI,CAAC,kBAAkB,CAAC;aACtC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAEnC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;aAClB,MAAM,CAAC,GAAG,CAAC;aACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;aAC5B,IAAI,CAAC,WAAW,EAAE,gBAAgB,IAAI,CAAC,MAAM,GAAG,CAAC;aACjD,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC;aACtC,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;aAC/C,OAAO,CAAC,oBAAoB,EAAE,IAAI,CAAC,eAAe,CAAC;aACnD,OAAO,CAAC,mBAAmB,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;;;QAIrD,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,SAAS,GAAGA,UAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAEvE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG;iBAClB,MAAM,CAAC,GAAG,CAAC;iBACX,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;iBAC5B,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;iBAC/C,IAAI,CAAC,WAAW,EAAE,gBAAgB,IAAI,CAAC,MAAM,GAAG,CAAC;iBACjD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACzB;QAED,IAAI,IAAI,CAAC,UAAU,EAAE;YACnB,IAAI,CAAC,GAAG;iBACL,MAAM,CAAC,MAAM,CAAC;iBACd,IAAI,CAAC,OAAO,EAAE,YAAY,CAAC;iBAC3B,IAAI,CAAC,aAAa,EAAE,QAAQ,CAAC;iBAC7B,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;iBAC5C,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;iBACrE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SAC1B;;QAGD,IAAI,MAAM,CAAC;QAEX,IAAI,IAAI,CAAC,YAAY,EAAE;YACrB,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;SACzF;aAAM,IAAI,IAAI,CAAC,UAAU,EAAE;YAC1B,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO,EAAE,CAAC;SACzE;aAAM;YACL,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;SAC/D;QAED,IAAI,CAAC,UAAU,GAAGP,YAAe,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;QAElD,IAAI,CAAC,WAAW,EAAE,CAAC;KACpB;IAED,WAAW,CAAC,OAAsB;QAChC,IAAI,OAAO,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE;YAC7C,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;KACF;IAED,WAAW;QACT,IAAI,IAAI,CAAC,OAAO;YAAE,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;KACzC;IAED,WAAW;QACT,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,GAAG,IAAI,GAAG,KAAK,CAAC;QAC1D,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;QAEpE,MAAM,SAAS,GAAGmC,GAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAM,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC;QACzD,MAAM,aAAa,GACjB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,KAAK,KAAK,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,KAAK,KAAK,IAAI,GAAG,IAAI,GAAG,KAAK,CAAC;QAE/G,IAAI,gBAAgB,GAAG,CAAC,CAAC;QACzB,MAAM,SAAS,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;QACjC,IAAI,MAAM,GAAG,KAAK,CAAC;QAEnB,SAAS,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK;YAC9C,IAAI,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC,IAAI,KAAK,CAAC,KAAK,KAAK,IAAI,KAAK,CAAC,MAAM,EAAE;gBAC1D,gBAAgB,EAAE,CAAC;aACpB;iBAAM;gBACL,MAAM,GAAG,IAAI,CAAC;aACf;SACF,CAAC,CAAC;QAEH,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACzC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YAC/D,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,SAAS,GAAG,IAAI,EAAE,SAAS,GAAG,GAAG,EAAE,SAAS,GAAG,IAAI,EAAE,SAAS,CAAC,CAAC,CAAC;YAC/F,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAEhC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,SAAS,GAAG,IAAI,EAAE,SAAS,GAAG,GAAG,EAAE,SAAS,GAAG,IAAI,EAAE,SAAS,CAAC,CAAC,CAAC;YAC/F,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAEhC,IAAI,CAAC,GAAG;iBACL,MAAM,CAAC,SAAS,CAAC;iBACjB,SAAS,CAAC,MAAM,CAAC;iBACjB,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;gBACT,MAAM,MAAM,GAAGzC,QAAS,CAAC,KAAK,CAAC,CAAC;gBAChC,OAAO,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;aACzB,CAAC,CAAC;SACN;aAAM,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,YAAY,EAAE;YAC/C,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YACzD,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;YACrD,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAEhC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;YACrD,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAEhC,IAAI,CAAC,GAAG;iBACL,MAAM,CAAC,SAAS,CAAC;iBACjB,SAAS,CAAC,MAAM,CAAC;iBACjB,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;gBACT,MAAM,MAAM,GAAGA,QAAS,CAAC,KAAK,CAAC,CAAC;gBAChC,OAAO,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;aACzB,CAAC,CAAC;SACN;aAAM;YACL,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YAC1E,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC,MAAM,CAAC,CAAC,IAAI,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAEpF,IAAI,CAAC,KAAK;iBACP,UAAU,EAAE;iBACZ,QAAQ,CAAC,IAAI,CAAC;iBACd,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;YAGxB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBACnB,IAAI,CAAC,KAAK;qBACP,UAAU,EAAE;qBACZ,QAAQ,CAAC,IAAI,CAAC;qBACd,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aACzB;SACF;QAED,IAAI,CAAC,GAAG;aACL,SAAS,CAAC,MAAM,CAAC;aACjB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;aACf,IAAI,CACH,KAAK,IACH,KAAK;aACF,MAAM,CAAC,MAAM,CAAC;aACd,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC;aACpB,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;aAChB,IAAI,CAAC,QAAQ,EAAE;YACd,OAAO,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC;SACtC,CAAC;aACD,IAAI,CAAC,MAAM,EAAE,CAAC;YACb,IAAI,IAAI,CAAC,YAAY,EAAE;gBACrB,OAAO,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,wBAAwB,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC;aAClG;iBAAM;gBACL,OAAO,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;aACjC;SACF,CAAC;aACD,IAAI,CAAC,GAAG,EAAE;YACT,OAAO,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;SAC5B,CAAC;aACD,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC;YACd,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,IAAI;;gBAE5C,OAAO,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aAC5C,EAAE,CAAC,CAAC,CAAC;SACP,CAAC;aACD,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;aAC9B,IAAI,CAAC,KAAK;YACT,QACE,KAAK;iBACF,UAAU,EAAE;;iBAEZ,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC;iBACxB,IAAI,CAAC0C,UAAa,CAAC;iBACnB,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC;;gBAElB,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,gBAAgB,GAAG,CAAC,IAAI,aAAa,EAAE;oBAClE,OAAO,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;iBACjC;qBAAM,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;oBACrC,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;oBACvD,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;oBAC5C,OAAO,KAAK,CAAC;iBACd;qBAAM;oBACL,OAAO,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;iBACjC;aACF,CAAC;iBACD,UAAU,EAAE;iBACZ,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC,EACjC;SACH,CAAC,EACN,MAAM,IACJ,MAAM;aACH,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;aAC9B,UAAU,EAAE;aACZ,QAAQ,CAAC,IAAI,CAAC;aACd,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC;;YAElB,IAAI,CAAC,CAAC,KAAK,KAAK,IAAI,IAAI,CAAC,CAAC,KAAK,KAAK,CAAC,EAAE;gBACrC,OAAO,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;aAC3B;iBAAM,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;gBACrC,OAAO,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;aACjC;iBAAM;gBACL,OAAO,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;aAClD;SACF,CAAC;aACD,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC;YACd,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,IAAI;gBAC5C,OAAO,GAAG,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aAC3C,EAAE,CAAC,CAAC,CAAC;SACP,CAAC;aACD,UAAU,EAAE;aACZ,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC,EACnC,IAAI,IACF,IAAI;aACD,UAAU,EAAE;aACZ,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;aAC9B,MAAM,EAAE,CACd;aACA,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,YAAY,CAACxC,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;aACxF,EAAE,CAAC,UAAU,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,WAAW,EAAE,CAAC;aAC1D,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,aAAa,CAACA,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;QAEzF,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACpB,IAAI,CAAC,KAAK;iBACP,MAAM,CAAC,SAAS,CAAC;iBACjB,SAAS,CAAC,cAAc,CAAC;iBACzB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;iBACf,IAAI,CACH,KAAK;gBACH,MAAM,EAAE,GAAG,KAAK;qBACb,MAAM,CAAC,IAAI,CAAC;qBACZ,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;qBAC5B,OAAO,CAAC,mBAAmB,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;gBAEhD,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC;qBACd,IAAI,CAAC,OAAO,EAAE,YAAY,CAAC;qBAC3B,KAAK,CAAC,kBAAkB,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;qBACxD,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;gBAEnC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC;qBACd,IAAI,CAAC,OAAO,EAAE,oBAAoB,CAAC;qBACnC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC;qBACjC,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;gBAE1C,EAAE,CAAC,MAAM,CAAC,qBAAqB,CAAC;qBAC7B,MAAM,CAAC,MAAM,CAAC;qBACd,IAAI,CAAC,OAAO,EAAE,cAAc,CAAC;qBAC7B,IAAI,CAAC,CAAC;oBACL,QAAQ,IAAI,CAAC,qBAAqB;wBAChC,KAAK,QAAQ;4BACX,OAAO,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;wBAEzC,KAAK,MAAM;4BACT,MAAM,UAAU,GAAGC,QAAW,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;4BACxC,OAAO,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;wBAE5C;4BACE,OAAO,CAAC,CAAC,KAAK,CAAC;qBAClB;iBACF,CAAC,CAAC;gBAEL,EAAE,CAAC,MAAM,CAAC,qBAAqB,CAAC;qBAC7B,MAAM,CAAC,KAAK,CAAC;qBACb,IAAI,CAAC,OAAO,EAAE,eAAe,CAAC;qBAC9B,OAAO,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;gBAEtC,EAAE,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,CAAC;oBAChC,OAAO,sCAAsC,CAAC,CAAC,sBAAsB,IACnE,CAAC,CAAC,oBAAoB,GAAG,SAAS,GAAG,EACvC,gBAAgB,IAAI,CAAC,0BAA0B,CAAC,CAAC,CAAC,kBAAkB,CAAC,eAAe,CAAC;iBACtF,CAAC,CAAC;gBAEH,OAAO,EAAE,CAAC;aACX,EACD,MAAM;gBACJ,MAAM,CAAC,OAAO,CAAC,mBAAmB,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;gBACpD,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;gBAC7D,MAAM,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;gBAEnE,IAAI,IAAI,CAAC,SAAS,EAAE;oBAClB,MAAM,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,CAAC;wBACpC,OAAO,sCAAsC,CAAC,CAAC,sBAAsB,IACnE,CAAC,CAAC,oBAAoB,GAAG,SAAS,GAAG,EACvC,gBAAgB,IAAI,CAAC,0BAA0B,CAAC,CAAC,CAAC,kBAAkB,CAAC,eAAe,CAAC;qBACtF,CAAC,CAAC;iBACJ;gBAED,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,CAAC;oBACnC,QAAQ,IAAI,CAAC,qBAAqB;wBAChC,KAAK,QAAQ;4BACX,OAAO,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;wBAEzC,KAAK,MAAM;4BACT,MAAM,UAAU,GAAGA,QAAW,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;4BACxC,OAAO,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;wBAE5C;4BACE,OAAO,CAAC,CAAC,KAAK,CAAC;qBAClB;iBACF,CAAC,CAAC;gBAEH,OAAO,MAAM,CAAC;aACf,EACD,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE,CACtB;iBACA,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,eAAe,CAACD,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;iBAC3F,EAAE,CAAC,UAAU,EAAE,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;iBAC3C,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,gBAAgB,CAACA,OAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;SAC7F;KACF;;;YArhBF,SAAS,SAAC;gBACT,QAAQ,EAAE,oCAAoC;gBAC9C,QAAQ,EAAE,EAAE;gBAEZ,eAAe,EAAE,uBAAuB,CAAC,MAAM;aAChD;;;YARQ,kBAAkB;YApBzB,UAAU;YAUH,gBAAgB;YAAE,QAAQ;;;yBAoBhC,WAAW,SAAC,kBAAkB;oCAG9B,WAAW,SAAC,wCAAwC;mBAGpD,KAAK;oBAGL,KAAK;qBAGL,KAAK;4BAGL,KAAK;yBAGL,KAAK;wBAGL,KAAK;0BAGL,KAAK;2BAGL,KAAK;yBAGL,KAAK;wBAGL,KAAK;wBAGL,KAAK;yBAGL,KAAK;yBAGL,KAAK;8BAGL,KAAK;gCAGL,KAAK;mCAGL,KAAK;wBAGL,KAAK;yBAGL,KAAK;gCAGL,KAAK;0BAGL,KAAK;6BAGL,KAAK;oCAGL,KAAK;sCAGL,KAAK;0BAGL,KAAK;qCAGL,KAAK;uCAGL,KAAK;sCAGL,KAAK;qCAGL,KAAK;uCAGL,KAAK;iCAGL,KAAK;yCAGL,KAAK;wCAGL,KAAK;yBAGL,KAAK;oBAGL,KAAK;sBAGL,MAAM;sBAGN,MAAM;;;MC7FI,iBAAiB;;;YAjC7B,QAAQ,SAAC;gBACR,YAAY,EAAE;oBACZ,uBAAuB;oBACvB,uBAAuB;oBACvB,wBAAwB;oBACxB,yBAAyB;oBACzB,6BAA6B;oBAC7B,8BAA8B;oBAC9B,+BAA+B;oBAC/B,yBAAyB;oBACzB,mCAAmC;oBACnC,2BAA2B;oBAC3B,iCAAiC;oBACjC,8BAA8B;oBAC9B,uCAAuC;iBACxC;gBACD,OAAO,EAAE,CAAC,YAAY,EAAE,gBAAgB,CAAC;gBACzC,OAAO,EAAE;oBACP,uBAAuB;oBACvB,uBAAuB;oBACvB,wBAAwB;oBACxB,yBAAyB;oBACzB,6BAA6B;oBAC7B,8BAA8B;oBAC9B,+BAA+B;oBAC/B,yBAAyB;oBACzB,mCAAmC;oBACnC,2BAA2B;oBAC3B,iCAAiC;oBACjC,8BAA8B;oBAC9B,uCAAuC;iBACxC;aACF;;;ACnDD;;ACAA;;;;;;"}